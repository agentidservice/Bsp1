<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Stadtportal Paderborn</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
:root{--bg:#f5f3ef;--bg-dark:#1a1a1a;--text:#1a1a1a;--text-muted:#6b6b6b;--accent:#c8a96e;--accent-dark:#a8893e;--white:#ffffff;--border:#e2ddd6;--card:#ffffff;--nav-h:72px}
*{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--text)}
nav{position:fixed;top:0;left:0;right:0;z-index:1000;height:var(--nav-h);background:rgba(245,243,239,.92);backdrop-filter:blur(12px);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 48px}
.nav-logo{font-family:'Playfair Display',serif;font-size:22px;font-weight:700;letter-spacing:-.5px}
.nav-logo span{color:var(--accent)}
.nav-links{display:flex;gap:4px}
.nav-link{padding:8px 16px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;border:none;background:none;color:var(--text-muted);transition:all .2s}
.nav-link:hover,.nav-link.active{background:var(--accent);color:var(--white)}
.nav-hamburger{display:none;flex-direction:column;gap:5px;background:none;border:none;cursor:pointer;padding:8px}
.nav-hamburger span{display:block;width:24px;height:2px;background:var(--text);border-radius:2px;transition:all .3s}
.mobile-nav-overlay{display:none;position:fixed;inset:0;z-index:999;background:rgba(245,243,239,.98);flex-direction:column;align-items:center;justify-content:center;gap:12px}
.mobile-nav-overlay.open{display:flex}
.mobile-nav-overlay .nav-link{font-size:18px;padding:14px 32px;width:260px;text-align:center}
.mobile-nav-close{position:absolute;top:20px;right:24px;background:none;border:none;font-size:28px;cursor:pointer;color:var(--text)}
.page{display:none;padding-top:var(--nav-h);min-height:100vh}
.page.active{display:block}
.hero{background:var(--bg-dark);color:var(--white);padding:100px 48px 80px;position:relative;overflow:hidden}
.hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 70% 50%,rgba(200,169,110,.2) 0%,transparent 60%)}
.hero-tag{font-size:11px;font-weight:600;letter-spacing:3px;text-transform:uppercase;color:var(--accent);margin-bottom:20px}
.hero h1{font-family:'Playfair Display',serif;font-size:clamp(36px,5vw,64px);font-weight:900;line-height:1.1;margin-bottom:20px;max-width:700px}
.hero p{font-size:17px;color:rgba(255,255,255,.65);max-width:560px;line-height:1.7;margin-bottom:40px}
.hero-btns{display:flex;gap:12px;flex-wrap:wrap}
.btn-primary{padding:14px 28px;background:var(--accent);color:var(--white);border:none;border-radius:10px;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s}
.btn-primary:hover{background:var(--accent-dark);transform:translateY(-1px)}
.btn-secondary{padding:14px 28px;background:transparent;color:var(--white);border:1px solid rgba(255,255,255,.25);border-radius:10px;font-size:15px;font-weight:500;cursor:pointer;transition:all .2s}
.btn-secondary:hover{border-color:var(--accent);color:var(--accent)}
.section{padding:80px 48px}
.section-header{margin-bottom:48px}
.section-tag{font-size:11px;font-weight:600;letter-spacing:3px;text-transform:uppercase;color:var(--accent);margin-bottom:12px}
.section-title{font-family:'Playfair Display',serif;font-size:clamp(28px,3vw,42px);font-weight:700}
.cards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:24px}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:28px;cursor:pointer;transition:all .25s}
.card:hover{transform:translateY(-4px);box-shadow:0 16px 40px rgba(0,0,0,.08);border-color:var(--accent)}
.card-icon{font-size:32px;margin-bottom:16px}
.card-title{font-family:'Playfair Display',serif;font-size:20px;font-weight:700;margin-bottom:8px}
.card-desc{font-size:14px;color:var(--text-muted);line-height:1.6}
.article-hero{background:var(--bg-dark);color:var(--white);padding:80px 48px 60px}
.article-hero .section-tag{color:var(--accent)}
.article-hero h1{font-family:'Playfair Display',serif;font-size:clamp(28px,4vw,52px);font-weight:900;line-height:1.15;max-width:800px;margin-top:12px}
.article-body{max-width:820px;margin:0 auto;padding:64px 48px}
.article-body h2{font-family:'Playfair Display',serif;font-size:26px;font-weight:700;margin:48px 0 16px}
.article-body h3{font-size:18px;font-weight:600;margin:32px 0 12px}
.article-body p{font-size:16px;line-height:1.8;color:#3a3a3a;margin-bottom:20px}
.article-body ul{margin:0 0 20px 20px}
.article-body li{font-size:16px;line-height:1.8;color:#3a3a3a;margin-bottom:8px}
.info-box{background:linear-gradient(135deg,rgba(200,169,110,.12),rgba(200,169,110,.05));border:1px solid rgba(200,169,110,.3);border-radius:12px;padding:24px 28px;margin:32px 0}
.info-box strong{color:var(--accent-dark)}

/* ‚îÄ‚îÄ STADTBOT (unten links) ‚îÄ‚îÄ */
.stadtbot-widget{position:fixed;left:20px;bottom:20px;z-index:900;display:flex;flex-direction:column;align-items:flex-start}
.stadtbot-toggle{width:64px;height:64px;background:var(--bg-dark);border:2px solid var(--accent);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:26px;box-shadow:0 8px 32px rgba(0,0,0,.3);transition:all .25s;position:relative}
.stadtbot-toggle:hover{transform:scale(1.08);box-shadow:0 12px 40px rgba(200,169,110,.35);border-color:var(--accent-dark)}
.stadtbot-badge{position:absolute;top:-4px;right:-4px;width:18px;height:18px;background:#22c55e;border-radius:50%;border:2px solid var(--bg);display:flex;align-items:center;justify-content:center;font-size:9px;font-weight:700;color:#fff;animation:pulse-dot 2s infinite}
.stadtbot-window{position:absolute;bottom:76px;left:0;width:min(400px,92vw);background:#fff;border-radius:20px;border:1px solid var(--border);box-shadow:0 25px 60px rgba(0,0,0,.15);display:none;flex-direction:column;overflow:hidden;height:auto}
.stadtbot-window.open{display:flex;animation:scaleInLeft .3s ease-out}
.stadtbot-window.expanded{height:min(580px,80vh)}

/* Bot Header */
.bot-header{padding:16px 20px;background:var(--bg-dark);display:flex;align-items:center;justify-content:space-between;flex-shrink:0}
.bot-header-left{display:flex;align-items:center;gap:12px}
.bot-avatar{width:38px;height:38px;background:linear-gradient(135deg,var(--accent-dark),var(--accent));border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.bot-header-name{font-size:15px;font-weight:600;color:#fff}
.bot-header-status{font-size:11px;color:rgba(255,255,255,.5);display:flex;align-items:center;gap:5px;margin-top:2px}
.bot-status-dot{width:6px;height:6px;background:#22c55e;border-radius:50%;display:inline-block;animation:pulse-dot 2s infinite}
.bot-reset{background:none;border:1px solid rgba(255,255,255,.2);border-radius:8px;color:rgba(255,255,255,.6);font-size:11px;font-weight:500;cursor:pointer;padding:5px 10px;font-family:'DM Sans',sans-serif;transition:all .2s;display:none;white-space:nowrap}
.bot-reset:hover{border-color:var(--accent);color:var(--accent)}
.bot-reset.visible{display:block}

/* Fortschrittsstrahl */
.bot-progress-bar-wrap{height:3px;background:rgba(200,169,110,.15);flex-shrink:0;display:none}
.bot-progress-bar-wrap.visible{display:block}
.bot-progress-bar-inner{height:100%;background:linear-gradient(90deg,var(--accent-dark),var(--accent));width:0;transition:width .5s cubic-bezier(.4,0,.2,1)}
.bot-steps-row{display:flex;align-items:center;justify-content:center;gap:0;padding:10px 20px 8px;background:#faf9f7;border-bottom:1px solid var(--border);flex-shrink:0;display:none}
.bot-steps-row.visible{display:flex}
.bot-step{display:flex;align-items:center;gap:6px;font-size:11px;color:var(--text-muted);font-weight:500;white-space:nowrap}
.bot-step-dot{width:22px;height:22px;border-radius:50%;border:2px solid var(--border);background:#fff;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:700;color:var(--text-muted);transition:all .3s;flex-shrink:0}
.bot-step.active .bot-step-dot{border-color:var(--accent);background:var(--accent);color:#fff}
.bot-step.done .bot-step-dot{border-color:#22c55e;background:#22c55e;color:#fff}
.bot-step.active .bot-step-label{color:var(--accent-dark);font-weight:600}
.bot-step.done .bot-step-label{color:#22c55e}
.bot-step-label{font-size:10px}
.bot-step-sep{width:24px;height:2px;background:var(--border);margin:0 4px;flex-shrink:0;transition:background .3s}
.bot-step-sep.done{background:#22c55e}

/* Chat-Bereich */
.bot-messages{overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px;background:var(--bg);min-height:0;height:300px}
.bot-messages.collapsed{display:none!important;height:0!important}
.bot-messages::-webkit-scrollbar{width:4px}
.bot-messages::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px}
.bot-msg{display:flex;gap:8px;animation:fadeInUp .25s ease-out}
.bot-msg.user{flex-direction:row-reverse}
.bot-msg-avatar{width:30px;height:30px;border-radius:50%;background:linear-gradient(135deg,var(--accent-dark),var(--accent));display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0;margin-top:2px}
.bot-msg.user .bot-msg-avatar{background:#e2ddd6;font-size:16px}
.bot-msg-bubble{max-width:82%;padding:10px 14px;border-radius:16px;font-size:13px;line-height:1.6;color:var(--text);background:#fff;border:1px solid var(--border);box-shadow:0 2px 8px rgba(0,0,0,.04)}
.bot-msg.user .bot-msg-bubble{background:var(--bg-dark);color:#fff;border:none;border-radius:16px 16px 4px 16px}
.bot-msg:not(.user) .bot-msg-bubble{border-radius:4px 16px 16px 16px}
.bot-page-chip{display:inline-flex;align-items:center;gap:6px;margin-top:8px;padding:7px 14px;background:rgba(200,169,110,.1);border:1px solid rgba(200,169,110,.35);border-radius:20px;font-size:12px;font-weight:600;color:var(--accent-dark);cursor:pointer;transition:all .2s;white-space:nowrap}
.bot-page-chip:hover{background:rgba(200,169,110,.22);transform:translateX(2px)}
.bot-page-chip-wrap{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px}
.bot-typing{display:flex;gap:4px;align-items:center;padding:10px 14px;background:#fff;border:1px solid var(--border);border-radius:4px 16px 16px 16px;width:fit-content}
.bot-typing span{width:6px;height:6px;background:var(--accent);border-radius:50%;animation:typingBounce 1.2s infinite}
.bot-typing span:nth-child(2){animation-delay:.2s}
.bot-typing span:nth-child(3){animation-delay:.4s}

/* Auswahl-Panel (ersetzt suggestions+input in Guided-Mode) */
.bot-choice-panel{padding:14px 16px 20px;background:#fff;border-top:1px solid var(--border);flex-shrink:0;overflow-y:auto;display:flex;flex-direction:column}
.bot-choice-label{font-size:10px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:var(--text-muted);margin-bottom:10px;text-align:center}
.bot-choice-grid{display:flex;flex-direction:column;gap:8px}
.bot-choice-grid{display:flex;flex-direction:column;gap:8px}
.bot-choice-btn{width:100%;padding:11px 16px;background:var(--bg);border:1.5px solid var(--border);border-radius:12px;font-size:13px;font-weight:500;color:var(--text);cursor:pointer;transition:all .2s;font-family:'DM Sans',sans-serif;text-align:left;display:flex;align-items:center;gap:10px;flex:1}
.bot-choice-btn:hover{border-color:var(--accent);background:rgba(200,169,110,.06);color:var(--accent-dark);transform:translateX(3px)}
.bot-choice-btn .choice-icon{font-size:16px;flex-shrink:0}
.bot-choice-btn .choice-arrow{margin-left:auto;color:var(--accent);opacity:0;transition:opacity .2s}
.bot-choice-btn:hover .choice-arrow{opacity:1}

/* Normaler Chat-Input (Info-Mode) */
.bot-suggestions{padding:10px 16px 6px;display:flex;flex-wrap:wrap;gap:6px;border-top:1px solid var(--border);background:#fff;flex-shrink:0}
.bot-suggestion{padding:6px 12px;background:var(--bg);border:1px solid var(--border);border-radius:20px;font-size:12px;font-weight:500;color:var(--text-muted);cursor:pointer;transition:all .2s;font-family:'DM Sans',sans-serif}
.bot-suggestion:hover{border-color:var(--accent);color:var(--accent-dark)}
.bot-input-area{padding:12px 16px;border-top:1px solid var(--border);background:#fff;display:flex;gap:8px;align-items:flex-end;flex-shrink:0}
.bot-input{flex:1;padding:10px 14px;border:1px solid var(--border);border-radius:12px;font-size:13px;font-family:'DM Sans',sans-serif;color:var(--text);resize:none;max-height:80px;line-height:1.5;outline:none;transition:border-color .2s}
.bot-input:focus{border-color:var(--accent)}
.bot-input::placeholder{color:var(--text-muted)}
.bot-send{width:40px;height:40px;background:var(--bg-dark);border:none;border-radius:10px;color:#fff;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0}
.bot-send:hover{background:var(--accent-dark)}
.bot-send:disabled{opacity:.4;cursor:not-allowed}

/* ‚îÄ‚îÄ MALER WIDGET (unten rechts) ‚îÄ‚îÄ */
.maler-widget{position:fixed;right:20px;bottom:20px;z-index:900}
.maler-toggle{width:64px;height:64px;background:linear-gradient(135deg,#b45309,#d97706,#f59e0b);border-radius:50%;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:28px;box-shadow:0 8px 32px rgba(217,119,6,.5);transition:transform .2s}
.maler-toggle:hover{transform:scale(1.08)}
.maler-window{position:absolute;bottom:76px;right:0;width:min(420px,92vw);height:min(680px,85vh);background:#1a1816;border-radius:20px;border:1px solid rgba(255,255,255,.06);box-shadow:0 25px 60px rgba(0,0,0,.6);display:none;flex-direction:column;overflow:hidden}
.maler-window.open{display:flex;animation:scaleIn .3s ease-out}

/* ‚îÄ‚îÄ SUMMARIZER (unten mitte) ‚îÄ‚îÄ */
.summarizer-widget{position:fixed;bottom:24px;left:50%;transform:translateX(-50%);z-index:900;display:flex;flex-direction:column;align-items:center}
.summarizer-btn{display:flex;align-items:center;gap:10px;padding:13px 24px;background:var(--bg-dark);color:var(--white);border:1px solid rgba(255,255,255,.12);border-radius:50px;font-family:'DM Sans',sans-serif;font-size:14px;font-weight:600;cursor:pointer;box-shadow:0 8px 32px rgba(0,0,0,.25);transition:all .25s;white-space:nowrap}
.summarizer-btn:hover{background:#2a2a2a;transform:translateY(-2px);box-shadow:0 12px 40px rgba(0,0,0,.35)}
.summarizer-btn .s-emoji{font-size:18px}
.summarizer-btn .s-pulse{width:8px;height:8px;background:#22c55e;border-radius:50%;animation:pulse-dot 2s infinite}
.summarizer-panel{position:absolute;bottom:56px;left:50%;transform:translateX(-50%);width:min(420px,90vw);background:#111;border:1px solid rgba(255,255,255,.1);border-radius:20px;overflow:hidden;display:none;flex-direction:column;box-shadow:0 24px 60px rgba(0,0,0,.5)}
.summarizer-panel.open{display:flex;animation:scaleInUp .3s ease-out}
.sum-header{padding:18px 20px 14px;border-bottom:1px solid rgba(255,255,255,.07);display:flex;align-items:center;justify-content:space-between}
.sum-header-left{display:flex;align-items:center;gap:10px}
.sum-header-icon{font-size:22px}
.sum-header-title{font-size:15px;font-weight:600;color:#fff}
.sum-header-sub{font-size:11px;color:rgba(255,255,255,.4)}
.sum-close{background:none;border:none;color:rgba(255,255,255,.4);font-size:18px;cursor:pointer;padding:4px}
.sum-close:hover{color:#fff}
.sum-filter{padding:14px 20px;border-bottom:1px solid rgba(255,255,255,.07)}
.sum-filter-label{font-size:10px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:rgba(255,255,255,.35);margin-bottom:10px}
.sum-filter-row{display:flex;gap:8px;flex-wrap:wrap}
.filter-chip{padding:6px 14px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:20px;font-size:12px;font-weight:500;color:rgba(255,255,255,.6);cursor:pointer;transition:all .2s}
.filter-chip:hover{border-color:var(--accent);color:var(--accent)}
.filter-chip.active{background:rgba(200,169,110,.15);border-color:var(--accent);color:var(--accent)}
.filter-optional{font-size:10px;color:rgba(255,255,255,.25);margin-left:4px}
.filter-custom-wrap{margin-top:10px}
.filter-custom-input{width:100%;padding:8px 14px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:8px;color:#fff;font-size:12px;font-family:'DM Sans',sans-serif;outline:none;transition:border-color .2s}
.filter-custom-input::placeholder{color:rgba(255,255,255,.3)}
.filter-custom-input:focus{border-color:var(--accent)}
.sum-footer{padding:14px 20px}
.sum-submit{width:100%;padding:13px;background:linear-gradient(135deg,#a8893e,#c8a96e);border:none;border-radius:10px;color:#fff;font-size:14px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:all .2s;font-family:'DM Sans',sans-serif}
.sum-submit:hover{transform:translateY(-1px);box-shadow:0 8px 20px rgba(200,169,110,.3)}
.sum-submit .spinner{width:16px;height:16px;border:2px solid transparent;border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite;display:none}
.sum-submit.loading .spinner{display:block}
.sum-submit.loading .btn-text{display:none}
.sum-result{max-height:0;overflow:hidden;transition:max-height .5s ease;border-top:0 solid rgba(255,255,255,.07)}
.sum-result.visible{max-height:400px;border-top:1px solid rgba(255,255,255,.07)}
.sum-result-inner{padding:20px;overflow-y:auto;max-height:400px}
.sum-result-inner::-webkit-scrollbar{width:4px}
.sum-result-inner::-webkit-scrollbar-thumb{background:rgba(255,255,255,.15);border-radius:2px}
.sum-result-text{font-size:14px;line-height:1.7;color:rgba(255,255,255,.8)}
.sum-heading{font-weight:700;color:#fff;font-size:13px;margin-top:14px;margin-bottom:4px;letter-spacing:.3px}
/* FIX: CSS erzeugt kein eigenes Bullet mehr ‚Äì n8n liefert das Zeichen bereits */
.sum-bullet{padding-left:14px;position:relative;color:rgba(255,255,255,.8);font-size:13px;margin-bottom:3px}
.sum-bullet::before{content:'';position:absolute;left:2px;top:7px;width:5px;height:5px;border-radius:50%;background:var(--accent)}
.sum-line{font-size:13px;color:rgba(255,255,255,.7);margin-bottom:3px}
.sum-spacer{height:8px}
.sum-fade{opacity:0;animation:fadeInUp .3s forwards}

/* ‚îÄ‚îÄ MALER FORM ‚îÄ‚îÄ */
.maler-header{padding:16px 20px;background:rgba(0,0,0,.3);border-bottom:1px solid rgba(255,255,255,.06);display:flex;justify-content:space-between;align-items:center}
.maler-header-left{display:flex;align-items:center;gap:12px}
.maler-logo{width:36px;height:36px;background:linear-gradient(135deg,#b45309,#d97706,#f59e0b);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:18px}
.maler-title{font-size:15px;font-weight:600;color:#fff}
.maler-subtitle{font-size:11px;color:rgba(255,255,255,.55)}
.maler-close{background:none;border:none;color:rgba(255,255,255,.55);font-size:20px;cursor:pointer}
.maler-progress{height:3px;background:rgba(255,255,255,.1)}
.maler-progress-bar{height:100%;background:linear-gradient(135deg,#b45309,#d97706,#f59e0b);width:0;transition:width .4s}
.maler-body{flex:1;overflow-y:auto;padding:20px;color:#fff}
.maler-body::-webkit-scrollbar{width:5px}
.maler-body::-webkit-scrollbar-thumb{background:rgba(255,255,255,.15);border-radius:3px}
.maler-loading{position:absolute;inset:0;background:rgba(26,24,22,.95);display:none;flex-direction:column;align-items:center;justify-content:center;z-index:10;border-radius:20px}
.maler-loading.visible{display:flex}
.maler-loading-spinner{width:48px;height:48px;border:3px solid rgba(255,255,255,.1);border-top-color:#d97706;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:16px}
.maler-loading-text{font-size:14px;color:rgba(255,255,255,.55)}
.m-section{margin-bottom:20px}
.m-section-title{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:#f59e0b;margin-bottom:12px;display:flex;align-items:center;gap:6px}
.m-section-title::before{content:'';width:10px;height:2px;background:linear-gradient(135deg,#b45309,#f59e0b)}
.m-type-toggle{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:16px}
.m-type-btn{padding:12px;background:#12100e;border:1px solid rgba(255,255,255,.06);border-radius:10px;color:rgba(255,255,255,.55);font-size:13px;font-weight:500;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:6px;transition:all .2s;font-family:'DM Sans',sans-serif}
.m-type-btn.active{background:rgba(217,119,6,.15);border-color:#d97706;color:#f59e0b}
.m-val-box{background:rgba(217,119,6,.05);border:1px solid rgba(217,119,6,.12);border-radius:12px;padding:16px;margin-bottom:16px}
.m-val-row{display:flex;gap:10px}
.m-float-group{position:relative;flex:1}
.m-float-label{position:absolute;left:14px;top:50%;transform:translateY(-50%);font-size:13px;color:rgba(255,255,255,.55);pointer-events:none;transition:all .2s;background:#12100e;padding:0 5px}
.m-float-label .req{color:#ef4444;margin-left:2px}
.m-float-input:focus~.m-float-label,.m-float-input:not(:placeholder-shown)~.m-float-label{top:0;font-size:10px;color:#d97706;font-weight:500}
.m-float-input{width:100%;padding:14px 16px;background:#12100e;border:1px solid rgba(255,255,255,.06);border-radius:10px;color:#fff;font-size:14px;font-family:'DM Sans',sans-serif}
.m-float-input:focus{outline:none;border-color:#d97706;box-shadow:0 0 0 3px rgba(217,119,6,.15)}
.m-float-input::placeholder{color:transparent}
.m-float-input.valid{border-color:#22c55e}
.m-float-input.invalid{border-color:#ef4444}
.m-val-btn{padding:14px 16px;background:rgba(217,119,6,.15);border:1px solid rgba(217,119,6,.3);border-radius:10px;color:#f59e0b;font-size:12px;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:6px;white-space:nowrap;font-family:'DM Sans',sans-serif}
.m-val-btn:hover{background:rgba(217,119,6,.25)}
.m-val-btn:disabled{opacity:.5;cursor:not-allowed}
.m-val-btn .spinner{width:14px;height:14px;border:2px solid transparent;border-top-color:#f59e0b;border-radius:50%;animation:spin .8s linear infinite;display:none}
.m-val-btn.loading .spinner{display:block}
.m-val-btn.loading .btn-icon{display:none}
.m-val-status{padding:10px 12px;border-radius:8px;font-size:12px;margin-top:12px;display:none}
.m-val-status.visible{display:flex;align-items:center;gap:8px}
.m-val-status.success{background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.2);color:#22c55e}
.m-val-status.error{background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);color:#ef4444}
.m-group{margin-bottom:14px}
.m-row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.m-input-wrap{position:relative}
.m-input-status{position:absolute;right:14px;top:50%;transform:translateY(-50%);font-size:16px}
.m-field-error{font-size:11px;color:#ef4444;margin-top:5px;display:none}
.m-field-error.visible{display:block}
.m-service-grid{display:flex;flex-direction:column;gap:6px}
.m-service-option{display:flex;align-items:center;gap:12px;padding:12px 14px;background:#12100e;border:1px solid rgba(255,255,255,.06);border-radius:10px;cursor:pointer;transition:all .2s}
.m-service-option:hover{border-color:rgba(255,255,255,.12)}
.m-service-option.selected{background:rgba(217,119,6,.1);border-color:#d97706}
.m-service-check{width:20px;height:20px;border-radius:50%;border:2px solid rgba(255,255,255,.12);display:flex;align-items:center;justify-content:center;font-size:11px;color:transparent;flex-shrink:0}
.m-service-option.selected .m-service-check{background:linear-gradient(135deg,#b45309,#f59e0b);border-color:#d97706;color:#fff;animation:checkBounce .4s}
.m-service-name{font-size:13px;font-weight:500;color:#fff}
.m-textarea-group{position:relative}
.m-textarea{width:100%;padding:14px 16px;background:#12100e;border:1px solid rgba(255,255,255,.06);border-radius:10px;color:#fff;font-size:14px;font-family:'DM Sans',sans-serif;resize:vertical;min-height:80px;line-height:1.5}
.m-textarea:focus{outline:none;border-color:#d97706}
.m-textarea::placeholder{color:transparent}
.m-textarea-label{position:absolute;left:14px;top:14px;font-size:13px;color:rgba(255,255,255,.55);pointer-events:none;transition:all .2s;background:#12100e;padding:0 5px}
.m-textarea:focus~.m-textarea-label,.m-textarea:not(:placeholder-shown)~.m-textarea-label{top:-8px;font-size:10px;color:#d97706;font-weight:500}
.m-checklist{background:rgba(217,119,6,.05);border:1px solid rgba(217,119,6,.08);border-radius:12px;padding:14px 16px;margin-bottom:16px}
.m-checklist-title{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:rgba(255,255,255,.55);margin-bottom:10px}
.m-checklist-items{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.m-check-item{display:flex;align-items:center;gap:8px;font-size:11px;color:rgba(255,255,255,.35)}
.m-check-item.checked{color:#22c55e}
.m-check-icon{width:16px;height:16px;border-radius:5px;display:flex;align-items:center;justify-content:center;font-size:9px;background:rgba(255,255,255,.05)}
.m-check-item.checked .m-check-icon{background:#22c55e;color:#fff}
.m-dsgvo{background:#12100e;border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:14px 16px;margin-bottom:20px}
.m-dsgvo-row{display:flex;align-items:flex-start;gap:10px;font-size:12px;color:rgba(255,255,255,.55);cursor:pointer}
.m-dsgvo-row input{margin-top:2px;width:16px;height:16px;accent-color:#d97706}
.m-dsgvo-toggle{background:none;border:none;cursor:pointer;font-size:12px;color:#f59e0b;padding:0;font-family:'DM Sans',sans-serif}
.m-dsgvo-details{display:none;margin-top:12px;padding-top:12px;border-top:1px solid rgba(255,255,255,.06);font-size:11px;color:rgba(255,255,255,.35)}
.m-dsgvo-details.visible{display:block}
.m-welcome{background:rgba(217,119,6,.1);border:1px solid rgba(217,119,6,.2);border-radius:10px;padding:12px 14px;margin-bottom:20px}
.m-welcome p{font-size:13px;line-height:1.5;margin:0;color:rgba(255,255,255,.8)}
.m-welcome strong{color:#f59e0b}
.m-submit{width:100%;padding:16px;background:linear-gradient(135deg,#b45309,#d97706,#f59e0b);border:none;border-radius:12px;color:#fff;font-size:15px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;transition:all .3s;font-family:'DM Sans',sans-serif}
.m-submit:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 30px rgba(217,119,6,.5)}
.m-submit:disabled{opacity:.4;cursor:not-allowed}
.m-submit.ready{animation:orangePulse 2s infinite}
.m-submit .spinner{width:18px;height:18px;border:2px solid transparent;border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite;display:none}
.m-submit.loading .spinner{display:block}
.m-submit.loading .btn-text{display:none}
.m-result{display:none}
.m-result.visible{display:block;animation:fadeInUp .4s}
.m-result-success{text-align:center;padding:20px 0;color:#fff}
.m-result-icon{font-size:56px;margin-bottom:12px}
.m-result-success h3{font-size:20px;font-weight:700;margin:0 0 6px}
.m-result-success p{font-size:13px;color:rgba(255,255,255,.55);margin:0}
.m-result-highlight{background:rgba(217,119,6,.1);border:1px solid rgba(217,119,6,.2);border-radius:12px;padding:16px;margin:16px 0;display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;text-align:center}
.m-result-highlight-item{display:flex;flex-direction:column;gap:3px}
.m-result-highlight-label{font-size:10px;color:rgba(255,255,255,.55);text-transform:uppercase}
.m-result-highlight-value{font-size:18px;font-weight:700;color:#f59e0b}
.m-result-summary{background:#12100e;border:1px solid rgba(255,255,255,.06);border-radius:12px;padding:16px}
.m-result-summary-title{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:#f59e0b;margin-bottom:12px}
.m-result-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(255,255,255,.06);font-size:12px;color:#fff}
.m-result-row:last-child{border-bottom:none}
.m-result-row .lbl{color:rgba(255,255,255,.55)}
.m-result-row .val{font-weight:500;text-align:right;max-width:55%}
.m-disclaimer{font-size:11px;color:rgba(255,255,255,.35);text-align:center;margin-top:16px}
.m-file-upload{border:2px dashed rgba(217,119,6,.25);border-radius:10px;padding:20px;text-align:center;cursor:pointer;position:relative;transition:all .2s}
.m-file-upload:hover{border-color:#d97706;background:rgba(217,119,6,.05)}
.m-file-upload input{position:absolute;inset:0;opacity:0;cursor:pointer}
.m-file-upload-icon{font-size:28px;margin-bottom:6px}
.m-file-upload-text{font-size:12px;color:rgba(255,255,255,.55)}
.m-file-upload-hint{font-size:10px;color:rgba(255,255,255,.35);margin-top:3px}
.m-file-list{margin-top:10px;display:flex;flex-wrap:wrap;gap:6px}
.m-file-item{display:flex;align-items:center;gap:5px;padding:6px 10px;background:rgba(217,119,6,.15);border-radius:6px;font-size:11px;color:#fff}
.m-file-item-remove{cursor:pointer;color:#ef4444;font-weight:bold;margin-left:3px}

/* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
@keyframes scaleIn{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}
@keyframes scaleInUp{from{opacity:0;transform:translateX(-50%) scale(.95) translateY(10px)}to{opacity:1;transform:translateX(-50%) scale(1) translateY(0)}}
@keyframes scaleInLeft{from{opacity:0;transform:scale(.95) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes checkBounce{0%{transform:scale(0)}50%{transform:scale(1.4)}70%{transform:scale(.9)}100%{transform:scale(1)}}
@keyframes orangePulse{0%,100%{box-shadow:0 0 0 0 rgba(217,119,6,.5)}50%{box-shadow:0 0 20px 6px rgba(217,119,6,.5)}}
@keyframes pulse-dot{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.6;transform:scale(.8)}}
@keyframes shake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-5px)}40%,80%{transform:translateX(5px)}}
@keyframes successPulse{0%{box-shadow:0 0 0 0 rgba(34,197,94,.4)}100%{box-shadow:0 0 15px 8px rgba(34,197,94,0)}}
@keyframes typingBounce{0%,60%,100%{transform:translateY(0)}30%{transform:translateY(-6px)}}
.shake{animation:shake .5s}
.success-pulse{animation:successPulse .6s}

/* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
@media(max-width:768px){
  nav{padding:0 20px}
  .nav-links{display:none}
  .nav-hamburger{display:flex}
  .hero,.section{padding-left:20px;padding-right:20px}
  .hero{padding-top:80px;padding-bottom:60px}
  .section{padding-top:60px;padding-bottom:60px}
  .article-body{padding:40px 20px}
  .article-hero{padding:60px 20px 40px}
  .m-row{grid-template-columns:1fr}
  .summarizer-btn{font-size:12px;padding:11px 18px}
  .stadtbot-widget{left:10px;bottom:10px}
  .maler-widget{right:10px;bottom:10px}
  .summarizer-widget{bottom:10px}
  .stadtbot-window{width:min(350px,92vw);height:min(500px,80vh)}
  .maler-window{width:min(360px,92vw)}
}
  </style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="nav-logo">Stadt<span>Portal</span></div>
  <div class="nav-links">
    <button class="nav-link active" onclick="showPage('home')">√úbersicht</button>
    <button class="nav-link" onclick="showPage('buerger')">B√ºrgerservice</button>
    <button class="nav-link" onclick="showPage('verkehr')">Verkehr</button>
    <button class="nav-link" onclick="showPage('kultur')">Kultur</button>
    <button class="nav-link" onclick="showPage('umwelt')">Umwelt</button>
    <button class="nav-link" onclick="showPage('maler')">üé® Malerbetrieb</button>
  </div>
  <button class="nav-hamburger" id="nav-hamburger" aria-label="Men√º √∂ffnen">
    <span></span><span></span><span></span>
  </button>
</nav>

<!-- MOBILES MEN√ú -->
<div class="mobile-nav-overlay" id="mobile-nav-overlay">
  <button class="mobile-nav-close" id="mobile-nav-close">‚úï</button>
  <button class="nav-link" onclick="showPage('home');closeMobileNav()">√úbersicht</button>
  <button class="nav-link" onclick="showPage('buerger');closeMobileNav()">B√ºrgerservice</button>
  <button class="nav-link" onclick="showPage('verkehr');closeMobileNav()">Verkehr</button>
  <button class="nav-link" onclick="showPage('kultur');closeMobileNav()">Kultur</button>
  <button class="nav-link" onclick="showPage('umwelt');closeMobileNav()">Umwelt</button>
  <button class="nav-link" onclick="showPage('maler');closeMobileNav()">üé® Malerbetrieb</button>
</div>

<!-- HOME -->
<div class="page active" id="page-home">
  <div class="hero">
    <div class="hero-tag">Willkommen im digitalen Stadtportal</div>
    <h1>Paderborn.<br>Einfach. Digital. Nah.</h1>
    <p>Ihr zentraler Anlaufpunkt f√ºr alle st√§dtischen Dienstleistungen, Informationen und B√ºrgeranliegen ‚Äì √ºbersichtlich, schnell und rund um die Uhr erreichbar.</p>
    <div class="hero-btns">
      <button class="btn-primary" onclick="showPage('buerger')">B√ºrgerservice entdecken</button>
      <button class="btn-secondary" onclick="showPage('verkehr')">Verkehr & Mobilit√§t</button>
    </div>
  </div>
  <div class="section">
    <div class="section-header">
      <div class="section-tag">Unsere Leistungen</div>
      <h2 class="section-title">Was k√∂nnen wir f√ºr Sie tun?</h2>
    </div>
    <div class="cards-grid">
      <div class="card" onclick="showPage('buerger')"><div class="card-icon">üèõÔ∏è</div><div class="card-title">B√ºrgerservice</div><div class="card-desc">Anmeldungen, Ausweise, Formulare und Beh√∂rdeng√§nge ‚Äì alles digital und ohne Wartezeit.</div></div>
      <div class="card" onclick="showPage('verkehr')"><div class="card-icon">üöå</div><div class="card-title">Verkehr & Mobilit√§t</div><div class="card-desc">√ñPNV-Fahrpl√§ne, Baustellen, Parkzonen und aktuelle Verkehrsmeldungen in Echtzeit.</div></div>
      <div class="card" onclick="showPage('kultur')"><div class="card-icon">üé≠</div><div class="card-title">Kultur & Freizeit</div><div class="card-desc">Veranstaltungen, Museen, Sportst√§tten und das kulturelle Leben der Stadt auf einen Blick.</div></div>
      <div class="card" onclick="showPage('umwelt')"><div class="card-icon">üåø</div><div class="card-title">Umwelt & Nachhaltigkeit</div><div class="card-desc">Abfallentsorgung, Recycling, Gr√ºnfl√§chen und st√§dtische Klimaschutzinitiativen.</div></div>
    </div>
  </div>
</div>

<!-- B√úRGERSERVICE -->
<div class="page" id="page-buerger" data-content="true">
  <div class="article-hero"><div class="section-tag">B√ºrgerservice</div><h1>Ihre Anlaufstelle f√ºr alle Beh√∂rdenangelegenheiten</h1></div>
  <div class="article-body">
    <p>Der B√ºrgerservice der Stadt Paderborn ist Ihr zentraler Ansprechpartner f√ºr nahezu alle Verwaltungsangelegenheiten des t√§glichen Lebens. Ob Ummeldung, Personalausweis, F√ºhrungszeugnis oder die Beantragung eines Gewerbescheins ‚Äì wir sind f√ºr Sie da, sowohl pers√∂nlich in unseren Servicezentren als auch digital √ºber dieses Portal.</p>
    <h2>Meldewesen und Ausweise</h2>
    <p>Das Meldewesen bildet die Grundlage f√ºr viele weitere Verwaltungsvorg√§nge. Eine fristgerechte Anmeldung innerhalb von zwei Wochen nach dem Einzug ist gesetzlich vorgeschrieben. In Paderborn k√∂nnen Sie Ihre Ummeldung bequem online √ºber unser Portal vornehmen, ohne pers√∂nlich erscheinen zu m√ºssen.</p>
    <p>Der Personalausweis ist das wichtigste Identifikationsdokument f√ºr deutsche Staatsb√ºrgerinnen und Staatsb√ºrger. Er wird ab dem 16. Lebensjahr Pflicht und hat eine G√ºltigkeitsdauer von zehn Jahren f√ºr Erwachsene und sechs Jahren f√ºr Minderj√§hrige. Der neue Ausweis wird in der Regel innerhalb von drei bis vier Wochen zugestellt.</p>
    <p>Der Reisepass ist erforderlich f√ºr Reisen in L√§nder, die den Personalausweis nicht als Einreisedokument akzeptieren. Er ist f√ºr Erwachsene zehn Jahre g√ºltig, f√ºr Kinder unter zw√∂lf Jahren sechs Jahre. Auch hier ist ein pers√∂nliches Erscheinen bei der Beantragung notwendig, da Fingerabdr√ºcke genommen werden.</p>
    <div class="info-box"><p><strong>Tipp:</strong> Nutzen Sie die Online-Terminvereinbarung, um Wartezeiten zu vermeiden. Viele Leistungen k√∂nnen au√üerdem vollst√§ndig digital beantragt werden ‚Äì ohne Beh√∂rdengang. Termine k√∂nnen bis zu acht Wochen im Voraus gebucht werden.</p></div>
    <h2>Gewerbeanmeldung und Unternehmensservice</h2>
    <p>Wer in Paderborn ein Gewerbe betreiben m√∂chte, muss dieses bei der zust√§ndigen Beh√∂rde anmelden. Der Prozess ist bewusst einfach gestaltet: Sie f√ºllen das Formular online aus, laden die erforderlichen Unterlagen hoch und erhalten innerhalb weniger Werktage Ihre Gewerbeanmeldebest√§tigung. Die Geb√ºhr f√ºr eine Gewerbeanmeldung betr√§gt in Paderborn 26 Euro.</p>
    <p>F√ºr Gr√ºnderinnen und Gr√ºnder bietet die Stadt Paderborn in Kooperation mit der Wirtschaftsf√∂rderungsgesellschaft kostenlose Erstberatungen an. Die Beratungsstelle ist dienstags und donnerstags von 9:00 bis 12:00 Uhr ohne Voranmeldung erreichbar.</p>
    <h2>F√ºhrungszeugnisse und Beglaubigungen</h2>
    <p>Ein einfaches F√ºhrungszeugnis k√∂nnen Sie bequem online √ºber das Bundeszentralregister beantragen. Die Geb√ºhr betr√§gt 13 Euro. Die Bearbeitungszeit betr√§gt in der Regel ein bis zwei Wochen. Ehrenamtliche erhalten das erweiterte F√ºhrungszeugnis kostenfrei.</p>
    <h2>Standesamt und Personenstandswesen</h2>
    <p>Das Standesamt ist zust√§ndig f√ºr alle Angelegenheiten des Personenstandswesens: von der Beurkundung von Geburten und Sterbef√§llen √ºber die Eheschlie√üung bis hin zur Ausstellung von Personenstandsurkunden. Heiratswillige Paare k√∂nnen sich ab sechs Monate vor dem gew√ºnschten Trautermin beim Standesamt anmelden.</p>
    <p>Geburten m√ºssen dem Standesamt innerhalb von sieben Tagen nach der Entbindung gemeldet werden. Die Geb√ºhr f√ºr eine einfache Urkunde betr√§gt 12 Euro, f√ºr jede weitere Ausfertigung 6 Euro.</p>
    <h2>Kfz-Zulassung und Fahrerlaubnisbeh√∂rde</h2>
    <p>Die Kfz-Zulassungsstelle befindet sich im Technischen Rathaus in der Pontanusstra√üe und ist montags bis freitags von 7:30 bis 15:00 Uhr ge√∂ffnet, donnerstags bis 17:30 Uhr. Seit Einf√ºhrung des i-Kfz-Systems ist auch eine vollst√§ndig digitale Zulassung m√∂glich.</p>
    <h2>Sozialleistungen und Unterst√ºtzungsangebote</h2>
    <p>Das Sozialamt der Stadt Paderborn ber√§t und unterst√ºtzt Menschen in schwierigen Lebenslagen. Dazu geh√∂ren Leistungen der Grundsicherung im Alter und bei Erwerbsminderung, Hilfe zur Pflege und Eingliederungshilfe f√ºr Menschen mit Behinderungen. Die Beratung ist vertraulich und kostenlos.</p>
    <h2>√ñffnungszeiten und Kontakt</h2>
    <p>Unsere Servicezentren sind Montag bis Freitag von 8:00 bis 16:00 Uhr ge√∂ffnet, donnerstags verl√§ngert bis 18:00 Uhr. Samstags ist das Servicezentrum Innenstadt von 9:00 bis 12:00 Uhr ge√∂ffnet. Das B√ºrgertelefon unter 05251 88-0 ist werktags von 8:00 bis 17:00 Uhr erreichbar.</p>
  </div>
</div>

<!-- VERKEHR -->
<div class="page" id="page-verkehr" data-content="true">
  <div class="article-hero"><div class="section-tag">Verkehr & Mobilit√§t</div><h1>Paderborn bewegt sich ‚Äì sicher, nachhaltig und vernetzt</h1></div>
  <div class="article-body">
    <p>Die Mobilit√§t in Paderborn befindet sich im Wandel. Die Stadt investiert konsequent in den Ausbau eines nachhaltigen Verkehrsnetzes, das alle Verkehrsteilnehmerinnen und Verkehrsteilnehmer gleicherma√üen ber√ºcksichtigt.</p>
    <h2>√ñffentlicher Personennahverkehr</h2>
    <p>Der √ñPNV in Paderborn wird vom Nahverkehr Paderborn-Lippe (NPL) koordiniert. Das Busnetz umfasst √ºber 30 Linien und verbindet nahezu alle Stadtteile sowie viele umliegende Gemeinden. Die Taktzeiten auf den Hauptstrecken betragen zu Sto√üzeiten zehn Minuten, im Grundtakt zwanzig Minuten.</p>
    <p>Das Deutschlandticket gilt im gesamten Verbundnetz und kann bequem digital abonniert werden. F√ºr Sch√ºlerinnen und Sch√ºler, Auszubildende und Studierende gibt es verg√ºnstigte Zeitkarten. Senioren ab 65 Jahren erhalten auf Antrag eine Seniorenkarte zu besonders g√ºnstigen Konditionen.</p>
    <div class="info-box"><p><strong>Aktuell:</strong> Die Linie 68 wird bis Ende M√§rz 2025 aufgrund von Bauarbeiten an der Detmolder Stra√üe umgeleitet. Bitte beachten Sie die aktuellen Aush√§nge und Informationen in der PaderSprinter-App.</p></div>
    <h2>Radverkehr und Fahrradinfrastruktur</h2>
    <p>Paderborn hat sich das ehrgeizige Ziel gesetzt, bis 2030 eine der fahrradfreundlichsten St√§dte Nordrhein-Westfalens zu werden. Das Radwegenetz umfasst heute √ºber 280 Kilometer ausgeschilderte Radwege, Fahrradstra√üen und Schutzstreifen.</p>
    <p>Das Paderborn-Bike-Sharing-System bietet 200 Leihr√§der und 60 E-Bikes an 35 Stationen im gesamten Stadtgebiet. Die Ausleihe erfolgt unkompliziert per App oder Chipkarte. Die ersten 30 Minuten sind bei vielen Tarifen kostenfrei.</p>
    <p>Der Radschnellweg Paderborn‚ÄìDetmold befindet sich in der Planung und soll ab 2027 eine direkte, weitgehend kreuzungsfreie Radverbindung zwischen den beiden St√§dten erm√∂glichen. Das Projekt wird zu 80 Prozent vom Land Nordrhein-Westfalen und vom Bund gef√∂rdert.</p>
    <h2>Aktuelle Baustellen und Verkehrsbehinderungen</h2>
    <p>Die wichtigsten aktuellen Ma√ünahmen umfassen die Erneuerung der Wasserleitung in der Westernstra√üe (voraussichtlich bis Ende April), die Br√ºckensanierung an der Paderborner Stra√üe sowie die Fahrbahnmarkierungsarbeiten auf dem Westernring, die in Nachtarbeit durchgef√ºhrt werden. Alle Baustellen werden im interaktiven Baustellenplan auf unserem Portal aktuell gehalten.</p>
    <h2>Parken in der Innenstadt</h2>
    <p>In der Paderborner Innenstadt stehen rund 3.500 bewirtschaftete Parkpl√§tze in zw√∂lf Parkh√§usern zur Verf√ºgung. Die Parkgeb√ºhren betragen derzeit zwischen einem und zwei Euro pro Stunde. Kurzzeitparken bis zu 30 Minuten ist in mehreren Zonen der Innenstadt kostenlos, sofern eine Parkscheibe ausgelegt wird.</p>
    <h2>Elektromobilit√§t und Ladeinfrastruktur</h2>
    <p>Aktuell gibt es 87 √∂ffentliche Ladepunkte im Stadtgebiet, davon 14 Schnellladepunkte mit einer Leistung von mindestens 50 Kilowatt. Bis Ende 2026 soll die Zahl der √∂ffentlichen Ladepunkte auf 200 steigen.</p>
    <h2>Carsharing und Mobilit√§tsstationen</h2>
    <p>An derzeit acht Mobilit√§tsstationen im Stadtgebiet sind Carsharing-Fahrzeuge, Leihr√§der und E-Scooter geb√ºndelt verf√ºgbar. Das Angebot soll bis 2026 auf 20 Stationen ausgebaut werden.</p>
    <h2>Barrierefreiheit im Verkehr</h2>
    <p>Alle neu gebauten oder grundlegend sanierten Haltestellen werden barrierefrei ausgebaut. Bis 2028 sollen alle Bushaltestellen im Stadtgebiet barrierefrei zug√§nglich sein.</p>
  </div>
</div>

<!-- KULTUR -->
<div class="page" id="page-kultur" data-content="true">
  <div class="article-hero"><div class="section-tag">Kultur & Freizeit</div><h1>Paderborn ‚Äì eine Stadt mit Geschichte, Herz und Kreativit√§t</h1></div>
  <div class="article-body">
    <p>Paderborn ist eine Stadt mit einer √ºber 1.200-j√§hrigen Geschichte, die in jedem Winkel des Stadtbildes sp√ºrbar ist. Kunst, Geschichte, Musik und Geselligkeit bilden in Paderborn eine lebendige Einheit, die Einheimische wie G√§ste gleicherma√üen begeistert.</p>
    <h2>Museen und historische St√§tten</h2>
    <p>Das Erzbisch√∂fliche Di√∂zesanmuseum Paderborn beherbergt eine der bedeutendsten Sammlungen mittelalterlicher Sakralkunst in Deutschland. Das Museum ist Dienstag bis Sonntag von 10:00 bis 18:00 Uhr ge√∂ffnet, donnerstags bis 20:00 Uhr. Der Eintritt betr√§gt 7 Euro f√ºr Erwachsene, 5 Euro f√ºr Erm√§√üigte, Kinder bis 12 Jahre haben freien Eintritt.</p>
    <p>Das Museum in der Kaiserpfalz f√ºhrt Besucherinnen und Besucher durch die arch√§ologische Geschichte Paderborns, von den fr√ºhgeschichtlichen Siedlungsspuren √ºber die karolingische Pfalz Karls des Gro√üen bis zur ottonischen Bl√ºtezeit.</p>
    <div class="info-box"><p><strong>Empfehlung:</strong> Mit dem Paderborn-Museumspass erhalten Sie freien Eintritt in alle st√§dtischen Museen f√ºr ein ganzes Jahr zum Preis von nur 25 Euro ‚Äì ein ideales Geschenk f√ºr Kulturbegeisterte.</p></div>
    <h2>Theater und B√ºhnen</h2>
    <p>Das Theater Paderborn bespielt drei B√ºhnen mit einem breiten Programm aus Schauspiel, Oper, Operette, Tanz und Kinder- und Jugendtheater. Die Spielzeit 2024/25 umfasst √ºber 200 Auff√ºhrungen. F√ºr Sch√ºlerinnen, Sch√ºler und Studierende gibt es stark verg√ºnstigte Karten ‚Äì bis zu 50 Prozent Rabatt.</p>
    <h2>Stadtfeste und Veranstaltungen</h2>
    <p>Das Libori-Fest ist das √§lteste und bedeutendste Volksfest Westfalens. Es findet j√§hrlich um den 23. Juli statt und zieht jedes Jahr √ºber eine Million Besucherinnen und Besucher in die Stadt.</p>
    <p>Der Paderborner Weihnachtsmarkt z√§hlt zu den sch√∂nsten in ganz Nordrhein-Westfalen. √úber 120 St√§nde laden zum Bummeln, Genie√üen und Verweilen ein. Der Markt √∂ffnet jedes Jahr am ersten Adventswochenende und ist bis zum 23. Dezember t√§glich von 11:00 bis 21:00 Uhr ge√∂ffnet.</p>
    <h2>Sport und Freizeitanlagen</h2>
    <p>Das Paderbad ist das moderne Freizeitbad der Stadt mit Saunalandschaft, Wellenbad und Outdoor-Bereich. Eintrittspreise: Erwachsene 8 Euro, Kinder 5 Euro, Familientageskarte 20 Euro.</p>
    <p>Der SC Paderborn 07 spielt aktuell in der 2. Bundesliga. Heimspiele finden in der Benteler-Arena statt, die Platz f√ºr 15.000 Zuschauer bietet.</p>
    <h2>Bibliotheken und Bildungseinrichtungen</h2>
    <p>Die Stadtbibliothek Paderborn ist mit √ºber 180.000 Medien eine der gr√∂√üten √∂ffentlichen Bibliotheken Ostwestfalens. Ge√∂ffnet Montag bis Freitag von 10:00 bis 19:00 Uhr und Samstag von 10:00 bis 14:00 Uhr. Der Jahresbeitrag betr√§gt 20 Euro, f√ºr Kinder und Jugendliche ist er kostenlos.</p>
  </div>
</div>

<!-- UMWELT -->
<div class="page" id="page-umwelt" data-content="true">
  <div class="article-hero"><div class="section-tag">Umwelt & Nachhaltigkeit</div><h1>Paderborn handelt ‚Äì f√ºr eine lebenswerte Stadt von morgen</h1></div>
  <div class="article-body">
    <p>Der Klimawandel ist eine der zentralen Herausforderungen unserer Zeit. Die Stadt Paderborn begegnet dieser Herausforderung mit einem umfassenden Klimaschutzkonzept. Das Ziel: Bis 2040 soll Paderborn klimaneutral sein.</p>
    <h2>Abfallentsorgung und Recycling</h2>
    <p>Die Entsorgungsbetriebe Paderborn (EBP) organisieren die Abfallentsorgung f√ºr alle Haushalte und Gewerbetreibenden in der Stadt. Die Abfuhrtermine variieren je nach Stadtbezirk und sind im Abfuhrkalender auf unserem Portal nachzuschlagen.</p>
    <p>Die Biotonne nimmt alle kompostierbaren K√ºchenabf√§lle auf. Bitte verwenden Sie keine Plastikbeutel. Die Wertstoffh√∂fe an der Stettiner Stra√üe und am D√∂rener Feld nehmen Elektroschrott, Sperrm√ºll und gef√§hrliche Abf√§lle kostenlos entgegen. √ñffnungszeiten: Montag bis Freitag 7:30‚Äì17:00 Uhr, Samstag 8:00‚Äì13:00 Uhr.</p>
    <div class="info-box"><p><strong>Neu ab April 2025:</strong> Alttextilien und Altkleider k√∂nnen an sechs neuen Standorten im Stadtgebiet abgegeben werden. Gut erhaltene Kleidung sollte jedoch lieber an Sozialkaufh√§user oder die Kleiderkammern der karitativen Einrichtungen gespendet werden.</p></div>
    <h2>Stadtgr√ºn und Biodiversit√§t</h2>
    <p>Paderborn verf√ºgt √ºber rund 1.200 Hektar st√§dtische Gr√ºnfl√§chen, Parks, W√§lder und Bachl√§ufe. Das Stadtbaumkonzept sieht vor, bis 2030 insgesamt 5.000 neue B√§ume im Stadtgebiet zu pflanzen. B√ºrgerinnen und B√ºrger k√∂nnen eine Baumpatenschaft √ºbernehmen.</p>
    <p>Seit 2022 hat die Stadt Paderborn √ºber 40 Hektar neue Bl√ºhfl√§chen geschaffen, die Bienen, Schmetterlingen und anderen Insekten wertvolle Lebensr√§ume bieten.</p>
    <h2>Energie und Klimaschutz</h2>
    <p>Im Rahmen des Klimaschutzkonzepts konnten die Energieverbr√§uche der st√§dtischen Liegenschaften in den letzten zehn Jahren um durchschnittlich 28 Prozent reduziert werden. Die Photovoltaik-Offensive hat bereits dazu gef√ºhrt, dass √ºber 60 st√§dtische Geb√§ude mit Solaranlagen ausgestattet wurden.</p>
    <p>Bis 2028 sollen weitere 8.000 Haushalte ans Fernw√§rmenetz angeschlossen werden. Hausbesitzerinnen und Hausbesitzer profitieren von einem Zuschuss von bis zu 5.000 Euro aus dem st√§dtischen Klimaschutzfonds.</p>
    <h2>Wasser und Gew√§sserschutz</h2>
    <p>Das Trinkwasser in Paderborn kommt aus dem stadtnahen Wasserwerk Haxtergrund und ist von hervorragender Qualit√§t. Es wird regelm√§√üig auf √ºber 50 Parameter untersucht und erf√ºllt alle gesetzlichen Anforderungen deutlich.</p>
    <h2>Umweltberatung und F√∂rderprogramme</h2>
    <p>Die st√§dtische Umweltberatung steht B√ºrgerinnen und B√ºrgern sowie Unternehmen kostenlos zur Verf√ºgung. Der st√§dtische Klimaschutzfonds f√∂rdert Projekte mit einem messbaren Beitrag zur Reduktion von Treibhausgasemissionen mit 500 bis 10.000 Euro. Antr√§ge k√∂nnen j√§hrlich bis zum 31. M√§rz gestellt werden.</p>
  </div>
</div>

<!-- MALER -->
<div class="page" id="page-maler">
  <div class="hero">
    <div class="hero-tag">Partnerseite</div>
    <h1>ProjektBau GmbH ‚Äì Ihr Malerbetrieb in Paderborn</h1>
    <p>Nutzen Sie das Widget unten rechts, um eine unverbindliche Preissch√§tzung f√ºr Ihr Malerprojekt zu erhalten.</p>
  </div>
  <div class="section" style="text-align:center;padding:60px 48px">
    <div class="section-tag">Ihr Angebot</div>
    <h2 class="section-title" style="margin-bottom:20px">Klicken Sie auf das üé® Widget unten rechts</h2>
    <p style="color:var(--text-muted);font-size:16px">F√ºllen Sie das Formular aus und erhalten Sie sofort eine Preissch√§tzung f√ºr Ihr Projekt.</p>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     STADTBOT WIDGET (unten links)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="stadtbot-widget" id="stadtbot-widget">
  <div class="stadtbot-window" id="stadtbot-window">

    <!-- Header -->
    <div class="bot-header">
      <div class="bot-header-left">
        <div class="bot-avatar">üèõÔ∏è</div>
        <div>
          <div class="bot-header-name">PaderbornBot</div>
          <div class="bot-header-status"><span class="bot-status-dot"></span> Online ‚Äì bereit zu helfen</div>
        </div>
      </div>
      <div style="display:flex;align-items:center;gap:8px">
        <button class="bot-reset" id="bot-reset">‚Ü© Neu starten</button>
        <button class="bot-close" id="bot-close">‚úï</button>
      </div>
    </div>
    <div class="bot-progress-bar-wrap" id="bot-progress-bar-wrap">
      <div class="bot-progress-bar-inner" id="bot-progress-bar-inner"></div>
    </div>

    <!-- Schritt-Indikatoren -->
    <div class="bot-steps-row" id="bot-steps-row">
      <!-- Wird per JS bef√ºllt -->
    </div>

    <!-- Chat-Nachrichten -->
    <div class="bot-messages" id="bot-messages"></div>

    <!-- Auswahl-Panel (Guided Mode) -->
    <div class="bot-choice-panel" id="bot-choice-panel" style="display:none">
      <div class="bot-choice-label" id="bot-choice-label">Bitte w√§hlen Sie</div>
      <div class="bot-choice-grid" id="bot-choice-grid"></div>
    </div>

    <!-- Normaler Chat-Input (Info Mode) -->
    <div class="bot-suggestions" id="bot-suggestions" style="display:none">
      <button class="bot-suggestion" data-text="Wo finde ich Infos zum Personalausweis?">ü™™ Personalausweis</button>
      <button class="bot-suggestion" data-text="Wo finde ich Infos zur Fahrradinfrastruktur?">üö≤ Fahrrad</button>
      <button class="bot-suggestion" data-text="Was kostet die Gewerbeanmeldung?">üè¢ Gewerbe</button>
    </div>
    <div class="bot-input-area" id="bot-input-area" style="display:none">
      <textarea class="bot-input" id="bot-input" rows="1" placeholder="Ihre Frage an PaderbornBot ‚Ä¶"></textarea>
      <button class="bot-send" id="bot-send">‚û§</button>
    </div>

  </div>
  <button class="stadtbot-toggle" id="stadtbot-toggle" aria-label="Stadtbot √∂ffnen">
    üèõÔ∏è<span class="stadtbot-badge">!</span>
  </button>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     MALER WIDGET (unten rechts)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="maler-widget" id="maler-widget" style="display:none">
  <button class="maler-toggle" id="maler-toggle">üé®</button>
  <div class="maler-window" id="maler-window">
    <div class="maler-loading" id="maler-loading"><div class="maler-loading-spinner"></div><div class="maler-loading-text">Anfrage wird verarbeitet...</div></div>
    <div class="maler-header">
      <div class="maler-header-left"><div class="maler-logo">üé®</div><div><div class="maler-title">ProjektBau GmbH</div><div class="maler-subtitle">Malerbetrieb ‚Ä¢ Paderborn</div></div></div>
      <button class="maler-close" id="maler-close">‚úï</button>
    </div>
    <div class="maler-progress"><div class="maler-progress-bar" id="maler-progress-bar"></div></div>
    <div class="maler-body" id="maler-body">
      <div id="maler-form-view">
        <div class="m-welcome"><p><strong>Willkommen!</strong> F√ºllen Sie das Formular aus und erhalten Sie sofort eine <strong>Preissch√§tzung</strong>.</p></div>
        <form id="maler-form">
          <div class="m-section">
            <div class="m-section-title">Kundentyp</div>
            <div class="m-type-toggle">
              <button type="button" class="m-type-btn active" data-type="privat">üè† Privat</button>
              <button type="button" class="m-type-btn" data-type="gewerbe">üè¢ Gewerblich</button>
            </div>
          </div>
          <div class="m-val-box" id="m-privat-box">
            <div class="m-val-row">
              <div class="m-float-group"><input type="text" class="m-float-input" id="m-location-privat" placeholder=" "><label class="m-float-label">Ort (Stadt/PLZ)<span class="req">*</span></label></div>
              <button type="button" class="m-val-btn" id="m-validate-privat-btn"><span class="spinner"></span><span class="btn-icon">üîç</span> Pr√ºfen</button>
            </div>
            <div class="m-val-status" id="m-privat-status"></div>
          </div>
          <div class="m-val-box" id="m-gewerbe-box" style="display:none">
            <div class="m-group"><div class="m-float-group"><input type="text" class="m-float-input" id="m-company" placeholder=" "><label class="m-float-label">Firmenname<span class="req">*</span></label></div></div>
            <div class="m-val-row">
              <div class="m-float-group"><input type="text" class="m-float-input" id="m-location-gewerbe" placeholder=" "><label class="m-float-label">Ort<span class="req">*</span></label></div>
              <button type="button" class="m-val-btn" id="m-validate-gewerbe-btn"><span class="spinner"></span><span class="btn-icon">üîç</span> Pr√ºfen</button>
            </div>
            <div class="m-val-status" id="m-gewerbe-status"></div>
          </div>
          <div class="m-section">
            <div class="m-section-title">Kontaktdaten</div>
            <div class="m-group"><div class="m-input-wrap"><div class="m-float-group"><input type="text" class="m-float-input" id="m-name" placeholder=" "><label class="m-float-label">Ihr Name<span class="req">*</span></label><span class="m-input-status" id="m-name-status"></span></div></div><div class="m-field-error" id="m-name-error"></div></div>
            <div class="m-row">
              <div class="m-group"><div class="m-float-group"><input type="email" class="m-float-input" id="m-email" placeholder=" "><label class="m-float-label">E-Mail (optional)</label></div></div>
              <div class="m-group"><div class="m-input-wrap"><div class="m-float-group"><input type="tel" class="m-float-input" id="m-phone" placeholder=" "><label class="m-float-label">Telefon<span class="req">*</span></label><span class="m-input-status" id="m-phone-status"></span></div></div></div>
            </div>
          </div>
          <div class="m-section">
            <div class="m-section-title">Gew√ºnschte Leistung</div>
            <div class="m-service-grid" id="m-services">
              <div class="m-service-option" data-service="1"><div class="m-service-check">‚úì</div><span class="m-service-name">üñåÔ∏è Innenw√§nde streichen</span></div>
              <div class="m-service-option" data-service="2"><div class="m-service-check">‚úì</div><span class="m-service-name">üè† Fassade streichen</span></div>
              <div class="m-service-option" data-service="3"><div class="m-service-check">‚úì</div><span class="m-service-name">üìú Tapezieren</span></div>
              <div class="m-service-option" data-service="4"><div class="m-service-check">‚úì</div><span class="m-service-name">üö™ T√ºren/Fenster lackieren</span></div>
              <div class="m-service-option" data-service="5"><div class="m-service-check">‚úì</div><span class="m-service-name">üß± Verputzen/Grundieren</span></div>
              <div class="m-service-option" data-service="6"><div class="m-service-check">‚úì</div><span class="m-service-name">‚ú® Dekorative Techniken</span></div>
            </div>
          </div>
          <div class="m-section">
            <div class="m-section-title">Projektdetails</div>
            <div class="m-row">
              <div class="m-group"><div class="m-float-group"><input type="text" class="m-float-input" id="m-size" placeholder=" "><label class="m-float-label">Gr√∂√üe (z.B. 50m¬≤)<span class="req">*</span></label></div></div>
              <div class="m-group"><div class="m-float-group"><input type="text" class="m-float-input" id="m-timeframe" placeholder=" "><label class="m-float-label">Zeitraum<span class="req">*</span></label></div></div>
            </div>
          </div>
          <div class="m-section">
            <div class="m-group"><div class="m-textarea-group"><textarea class="m-textarea" id="m-description" placeholder=" "></textarea><label class="m-textarea-label">Beschreibung (optional)</label></div></div>
          </div>
          <div class="m-section">
            <div class="m-section-title">Bilder (optional)</div>
            <div class="m-file-upload"><input type="file" id="m-images" multiple accept="image/*"><div class="m-file-upload-icon">üì∑</div><div class="m-file-upload-text">Bilder hochladen</div><div class="m-file-upload-hint">JPG, PNG bis 10MB</div></div>
            <div class="m-file-list" id="m-file-list"></div>
          </div>
          <div class="m-checklist">
            <div class="m-checklist-title">Checkliste</div>
            <div class="m-checklist-items">
              <div class="m-check-item" id="m-check-location"><span class="m-check-icon">‚óã</span><span>Standort gepr√ºft</span></div>
              <div class="m-check-item" id="m-check-name"><span class="m-check-icon">‚óã</span><span>Name g√ºltig</span></div>
              <div class="m-check-item" id="m-check-phone"><span class="m-check-icon">‚óã</span><span>Telefon g√ºltig</span></div>
              <div class="m-check-item" id="m-check-service"><span class="m-check-icon">‚óã</span><span>Leistung gew√§hlt</span></div>
              <div class="m-check-item" id="m-check-details"><span class="m-check-icon">‚óã</span><span>Details ausgef√ºllt</span></div>
            </div>
          </div>
          <div class="m-dsgvo">
            <label class="m-dsgvo-row" for="m-dsgvo">
              <input type="checkbox" id="m-dsgvo">
              <span>Ich stimme der <button type="button" class="m-dsgvo-toggle" id="m-dsgvo-toggle">Datenschutzerkl√§rung</button> zu.</span>
            </label>
            <div class="m-dsgvo-details" id="m-dsgvo-details"><strong style="color:#f59e0b">Kurzinfo:</strong> Ihre Daten werden nur zur Bearbeitung Ihrer Anfrage verwendet.</div>
          </div>
          <button type="submit" class="m-submit" id="m-submit" disabled><span class="spinner"></span><span class="btn-text">üöÄ Anfrage absenden</span></button>
        </form>
      </div>
      <div class="m-result" id="maler-result-view">
        <div class="m-result-success"><div class="m-result-icon">‚úÖ</div><h3>Anfrage erhalten!</h3><p>Wir melden uns schnellstm√∂glich</p></div>
        <div class="m-result-highlight">
          <div class="m-result-highlight-item"><span class="m-result-highlight-label">üí∞ Preis</span><span class="m-result-highlight-value" id="m-result-price">-</span></div>
          <div class="m-result-highlight-item"><span class="m-result-highlight-label">üìÖ Dauer</span><span class="m-result-highlight-value" id="m-result-duration">-</span></div>
          <div class="m-result-highlight-item"><span class="m-result-highlight-label">üë∑ MA</span><span class="m-result-highlight-value" id="m-result-workers">-</span></div>
        </div>
        <div class="m-result-summary">
          <div class="m-result-summary-title">üìã Ihre Anfrage</div>
          <div class="m-result-row"><span class="lbl">Kundentyp</span><span class="val" id="m-result-type">-</span></div>
          <div class="m-result-row" id="m-result-company-row" style="display:none"><span class="lbl">Firma</span><span class="val" id="m-result-company">-</span></div>
          <div class="m-result-row"><span class="lbl">Name</span><span class="val" id="m-result-name">-</span></div>
          <div class="m-result-row" id="m-result-email-row" style="display:none"><span class="lbl">E-Mail</span><span class="val" id="m-result-email">-</span></div>
          <div class="m-result-row"><span class="lbl">Telefon</span><span class="val" id="m-result-phone">-</span></div>
          <div class="m-result-row"><span class="lbl">Standort</span><span class="val" id="m-result-location">-</span></div>
          <div class="m-result-row"><span class="lbl">Leistung</span><span class="val" id="m-result-service">-</span></div>
          <div class="m-result-row"><span class="lbl">Umfang</span><span class="val" id="m-result-size">-</span></div>
          <div class="m-result-row"><span class="lbl">Zeitraum</span><span class="val" id="m-result-timeframe">-</span></div>
        </div>
        <p class="m-disclaimer">Unverbindliche Sch√§tzung. Abweichung ¬±15‚Äì20% m√∂glich.</p>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SUMMARIZER WIDGET (unten mitte)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="summarizer-widget" id="summarizer-widget" style="display:none">
  <div class="summarizer-panel" id="sum-panel">
    <div class="sum-header">
      <div class="sum-header-left"><span class="sum-header-icon">üß†</span><div><div class="sum-header-title">KI-Zusammenfassung</div><div class="sum-header-sub">Diese Seite analysieren</div></div></div>
      <button class="sum-close" id="sum-close">‚úï</button>
    </div>
    <div class="sum-filter">
      <div class="sum-filter-label">Filtern nach <span class="filter-optional">(optional)</span></div>
      <div class="sum-filter-row">
        <div class="filter-chip" data-filter="alles">Alles</div>
        <div class="filter-chip" data-filter="wichtigste">Wichtigstes</div>
        <div class="filter-chip" data-filter="kontakt">Kontakt & Zeiten</div>
        <div class="filter-chip" data-filter="fristen">Fristen & Termine</div>
        <div class="filter-chip" data-filter="kosten">Kosten & Geb√ºhren</div>
      </div>
      <div class="filter-custom-wrap"><input type="text" class="filter-custom-input" id="filter-custom" placeholder="Eigener Filter, z.B. ‚ÄûVoraussetzungen" oder ‚ÄûDokumente" ‚Ä¶"></div>
    </div>
    <div class="sum-result" id="sum-result"><div class="sum-result-inner"><div class="sum-result-text" id="sum-result-text"></div></div></div>
    <div class="sum-footer"><button class="sum-submit" id="sum-submit"><span class="spinner"></span><span class="btn-text">‚ú® Zusammenfassen</span></button></div>
  </div>
  <button class="summarizer-btn" id="sum-toggle"><span class="s-emoji">üß†</span><span>KI-Zusammenfassung</span><span class="s-pulse"></span></button>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     JAVASCRIPT
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
(function(){
/* ‚îÄ‚îÄ CONFIG ‚îÄ‚îÄ */
// Maler: Standort-Validierung
const WEBHOOK_VALIDATE  = 'https://seidel1502.app.n8n.cloud/webhook/3ad0bd7f-1b6e-4501-ba99-0cf05a2b4565';
// Maler: Formular absenden ‚Üí Preissch√§tzung + Benachrichtigung beider Seiten
const WEBHOOK_SEND      = 'https://seidel1502.app.n8n.cloud/webhook/af4d3fcf-7cc3-48ee-b665-1b61703e678c';
// KI-Zusammenfassung
const WEBHOOK_SUMMARIZE = 'https://seidel1502.app.n8n.cloud/webhook/37e814a4-dd8d-49bb-95f0-b96d65bb963a';
// Stadtbot
const WEBHOOK_BOT       = 'https://seidel1502.app.n8n.cloud/webhook/3204d7ec-3a9a-4e60-b76d-15dda4df50df';

const MALER_TOKEN     = '0Xpj42sQ#g*kjpYP3cRsPawHAUH#U_&Mt&rlgnqPcnfsclT-';
const SUMMARIZE_TOKEN = '1Xpj42sQ#g*kjpYP3cRsPawHAUH#U_&Mt&rlgnqPcnfsclT-';
const BOT_TOKEN       = 'cidg-pidg-12345-678910-v1v';

const $ = id => document.getElementById(id);

function authFetch(url, body, token){
  return fetch(url,{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+token},body:JSON.stringify(body)});
}
function authFetchForm(url, formData, token){
  return fetch(url,{method:'POST',headers:{'Authorization':'Bearer '+token},body:formData});
}

/* ‚îÄ‚îÄ MOBILE NAV ‚îÄ‚îÄ */
window.closeMobileNav = function(){ $('mobile-nav-overlay').classList.remove('open'); };
$('nav-hamburger').onclick  = () => $('mobile-nav-overlay').classList.add('open');
$('mobile-nav-close').onclick = closeMobileNav;

/* ‚îÄ‚îÄ SEITEN-NAVIGATION ‚îÄ‚îÄ */
window.showPage = function(name){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-link').forEach(l=>l.classList.remove('active'));
  $('page-'+name).classList.add('active');
  document.querySelectorAll('.nav-link').forEach(l=>{
    if(l.textContent.toLowerCase().includes(name)||(name==='home'&&l.textContent==='√úbersicht'))
      l.classList.add('active');
  });
  const isMaler  = name==='maler';
  const hasContent = !!$('page-'+name)?.dataset.content;
  $('maler-widget').style.display      = isMaler?'block':'none';
  $('summarizer-widget').style.display = hasContent?'flex':'none';
  $('sum-panel').classList.remove('open');
  $('maler-window').classList.remove('open');
  window.scrollTo(0,0);
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   STADTBOT ‚Äì Guided Flow + Info Chat
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const SESSION_ID = 'bot_' + Date.now() + '_' + Math.random().toString(36).slice(2,8);

// Mapping Schl√ºssel ‚Üí Seiten f√ºr clickbare Chips im Chat
const PAGE_MAP = {
  buerger:{ label:'üèõÔ∏è B√ºrgerservice √∂ffnen', page:'buerger' },
  verkehr:{ label:'üöå Verkehr & Mobilit√§t √∂ffnen', page:'verkehr' },
  kultur :{ label:'üé≠ Kultur & Freizeit √∂ffnen', page:'kultur'  },
  umwelt :{ label:'üåø Umwelt & Nachhaltigkeit √∂ffnen', page:'umwelt' },
  maler  :{ label:'üé® Malerbetrieb √∂ffnen', page:'maler' },
};

const botMessages   = $('bot-messages');
const botChoicePanel= $('bot-choice-panel');
const botChoiceGrid = $('bot-choice-grid');
const botChoiceLabel= $('bot-choice-label');
const botInput      = $('bot-input');
const botSend       = $('bot-send');
let   botOpen       = false;

/* ‚îÄ‚îÄ Termin-Kategorien ‚îÄ‚îÄ */
const TERMIN_KATEGORIEN = {
  meldewesen: {
    label:'üè† Meldewesen', icon:'üè†',
    sub:[
      {label:'Anmeldung / Ummeldung', key:'anmeldung'},
      {label:'Abmeldung', key:'abmeldung'},
    ]
  },
  ausweise: {
    label:'ü™™ Ausweise & P√§sse', icon:'ü™™',
    sub:[
      {label:'Personalausweis beantragen', key:'personalausweis'},
      {label:'Reisepass beantragen', key:'reisepass'},
      {label:'Kinderreisepass', key:'kinderreisepass'},
    ]
  },
  kfz: {
    label:'üöó F√ºhrerschein & Kfz', icon:'üöó',
    sub:[
      {label:'F√ºhrerschein beantragen', key:'fuehrerschein'},
      {label:'Kfz-Zulassung', key:'kfz_zulassung'},
      {label:'Kfz-Abmeldung', key:'kfz_abmeldung'},
    ]
  },
  standesamt: {
    label:'üíç Standesamt', icon:'üíç',
    sub:[
      {label:'Eheschlie√üung anmelden', key:'heirat'},
      {label:'Geburtsurkunde beantragen', key:'geburtsurkunde'},
      {label:'Sterbeurkunde beantragen', key:'sterbeurkunde'},
    ]
  },
  gewerbe: {
    label:'üè¢ Gewerbe', icon:'üè¢',
    sub:[
      {label:'Gewerbeanmeldung', key:'gewerbeanmeldung'},
      {label:'Gewerbeabmeldung', key:'gewerbeabmeldung'},
    ]
  },
  sonstiges: {
    label:'üìã Sonstiges', icon:'üìã',
    sub:[
      {label:'F√ºhrungszeugnis (erweitertes)', key:'fuehrungszeugnis'},
      {label:'Beglaubigungen', key:'beglaubigung'},
    ]
  }
};

/* ‚îÄ‚îÄ Schritt-Definitionen ‚îÄ‚îÄ */
const STEPS_INFO   = [{label:'Info'}];
const STEPS_TERMIN = [{label:'Kategorie'},{label:'Leistung'},{label:'Termin'}];

let botMode       = 'start';   // start | info | termin-kat | termin-sub | termin-chat
let botTerminKat  = null;
let botTerminSub  = null;
let currentSteps  = null;
let currentStepIdx= 0;

/* ‚îÄ‚îÄ Fortschrittsanzeige ‚îÄ‚îÄ */
function showSteps(steps, activeIdx){
  currentSteps   = steps;
  currentStepIdx = activeIdx;
  const wrap = $('bot-steps-row');
  const bar  = $('bot-progress-bar-wrap');
  wrap.innerHTML = '';
  wrap.classList.add('visible');
  bar.classList.add('visible');
  steps.forEach((s, i)=>{
    const el = document.createElement('div');
    el.className = 'bot-step' + (i < activeIdx ? ' done' : i === activeIdx ? ' active' : '');
    el.innerHTML = `<div class="bot-step-dot">${i < activeIdx ? '‚úì' : i+1}</div><span class="bot-step-label">${s.label}</span>`;
    wrap.appendChild(el);
    if(i < steps.length-1){
      const sep = document.createElement('div');
      sep.className = 'bot-step-sep' + (i < activeIdx ? ' done' : '');
      wrap.appendChild(sep);
    }
  });
  const pct = steps.length > 1 ? (activeIdx / (steps.length-1)) * 100 : activeIdx === 0 ? 50 : 100;
  $('bot-progress-bar-inner').style.width = pct + '%';
}
function hideSteps(){
  $('bot-steps-row').classList.remove('visible');
  $('bot-progress-bar-wrap').classList.remove('visible');
}

/* ‚îÄ‚îÄ Nachrichten ‚îÄ‚îÄ */
function botAddMessage(role, text, chips){
  const wrap   = document.createElement('div');
  wrap.className = 'bot-msg' + (role==='user' ? ' user' : '');
  const av  = document.createElement('div'); av.className='bot-msg-avatar';
  av.textContent = role==='user' ? 'üë§' : 'üèõÔ∏è';
  const bub = document.createElement('div'); bub.className='bot-msg-bubble';
  bub.innerHTML = text.replace(/\n/g,'<br>');
  if(chips && chips.length){
    const cw = document.createElement('div'); cw.className='bot-page-chip-wrap';
    chips.forEach(key=>{
      if(!PAGE_MAP[key]) return;
      const btn=document.createElement('button'); btn.className='bot-page-chip';
      btn.textContent=PAGE_MAP[key].label;
      btn.onclick=()=>{ showPage(PAGE_MAP[key].page); $('stadtbot-window').classList.remove('open'); botOpen=false; };
      cw.appendChild(btn);
    });
    bub.appendChild(cw);
  }
  wrap.appendChild(av); wrap.appendChild(bub);
  botMessages.appendChild(wrap);
  botMessages.scrollTop = botMessages.scrollHeight;
}

function botShowTyping(){
  const wrap=document.createElement('div'); wrap.className='bot-msg'; wrap.id='bot-typing-indicator';
  const av=document.createElement('div'); av.className='bot-msg-avatar'; av.textContent='üèõÔ∏è';
  const t=document.createElement('div'); t.className='bot-typing';
  t.innerHTML='<span></span><span></span><span></span>';
  wrap.appendChild(av); wrap.appendChild(t);
  botMessages.appendChild(wrap); botMessages.scrollTop=botMessages.scrollHeight;
}
function botHideTyping(){ const el=$('bot-typing-indicator'); if(el) el.remove(); }

/* ‚îÄ‚îÄ Auswahl-Panel rendern ‚îÄ‚îÄ */
function showChoices(label, items){
  botChoiceLabel.textContent = label;
  botChoiceGrid.innerHTML = '';
  items.forEach(item=>{
    const btn = document.createElement('button');
    btn.className = 'bot-choice-btn';
    btn.innerHTML = `<span class="choice-icon">${item.icon||'‚Üí'}</span><span>${item.label}</span><span class="choice-arrow">‚Ä∫</span>`;
    btn.onclick = () => item.onClick();
    botChoiceGrid.appendChild(btn);
  });
  botChoicePanel.style.display = 'block';
  // Chat ausblenden ‚Üí Widget bleibt kompakt
  botMessages.classList.add('collapsed');
  setTimeout(()=>{ botMessages.scrollTop = botMessages.scrollHeight; }, 50);
}
function hideChoices(){
  botChoicePanel.style.display='none';
  // Chat wieder einblenden ‚Üí Widget w√§chst
  botMessages.classList.remove('collapsed');
  botMessages.style.display = 'flex';
}

/* ‚îÄ‚îÄ Eingabe-Bereich ‚îÄ‚îÄ */
function showInputArea(){
  // Suggestions: nur Info-Modus, nur solange noch keine User-Nachricht gesendet wurde
  const userMsgCount = botMessages.querySelectorAll('.bot-msg.user').length;
  const showSugg = botMode === 'info' && userMsgCount === 0;
  $('bot-suggestions').style.display = showSugg ? 'flex' : 'none';
  $('bot-input-area').style.display  = 'flex';
}
function hideInputArea(){
  $('bot-suggestions').style.display = 'none';
  $('bot-input-area').style.display  = 'none';
}

/* ‚ïê‚ïê FLOW-STEUERUNG ‚ïê‚ïê */

function botStart(){
  botMode = 'start';
  hideSteps();
  hideInputArea();
  showChoices('Was kann ich f√ºr Sie tun?', [
    { icon:'‚ÑπÔ∏è', label:'Informationen & Ausk√ºnfte', onClick: ()=>botGoInfo() },
    { icon:'üìÖ', label:'Termin buchen',             onClick: ()=>botGoTerminKat() },
  ]);
}

/* ‚îÄ‚îÄ INFO-Zweig ‚îÄ‚îÄ */
function botGoInfo(){
  hideChoices();
  $('stadtbot-window').classList.add('expanded');
  botAddMessage('user','‚ÑπÔ∏è Informationen & Ausk√ºnfte');
  showSteps(STEPS_INFO, 0);
  showReset();
  botMode = 'info';
  setTimeout(()=>{
    botAddMessage('bot','Gerne beantworte ich Ihre Fragen rund um st√§dtische Leistungen in Paderborn. Was m√∂chten Sie wissen?');
    showInputArea();
    document.querySelectorAll('.bot-suggestion').forEach(b=>b.onclick=()=>botSendMessage(b.dataset.text));
  }, 300);
}

/* ‚îÄ‚îÄ TERMIN Schritt 1: Kategorie ‚îÄ‚îÄ */
function botGoTerminKat(){
  hideChoices();
  $('stadtbot-window').classList.add('expanded');
  botAddMessage('user','üìÖ Termin buchen');
  showSteps(STEPS_TERMIN, 0);
  showReset();
  botMode = 'termin-kat';
  setTimeout(()=>{
    botAddMessage('bot','Um welches Anliegen handelt es sich? Bitte w√§hlen Sie eine Kategorie:');
    showChoices('Kategorie w√§hlen', Object.entries(TERMIN_KATEGORIEN).map(([key, kat])=>({
      icon: kat.icon, label: kat.label.replace(kat.icon+' ',''),
      onClick: ()=>botGoTerminSub(key, kat)
    })));
  }, 300);
}

/* ‚îÄ‚îÄ TERMIN Schritt 2: Leistung ‚îÄ‚îÄ */
function botGoTerminSub(katKey, kat){
  botTerminKat = katKey;
  hideChoices();
  botAddMessage('user', kat.icon + ' ' + kat.label.replace(kat.icon+' ',''));
  showSteps(STEPS_TERMIN, 1);
  botMode = 'termin-sub';
  setTimeout(()=>{
    botAddMessage('bot', `Welche Leistung ben√∂tigen Sie im Bereich <strong>${kat.label}</strong>?`);
    showChoices('Leistung w√§hlen', kat.sub.map(s=>({
      icon:'‚Üí', label: s.label,
      onClick: ()=>botGoTerminChat(s)
    })));
  }, 300);
}

/* ‚îÄ‚îÄ TERMIN Schritt 3: Webhook + Chat ‚îÄ‚îÄ */
async function botGoTerminChat(sub){
  botTerminSub = sub.key;
  hideChoices();
  botAddMessage('user', sub.label);
  showSteps(STEPS_TERMIN, 2);
  botMode = 'termin-chat';
  botShowTyping();
  try{
    const r = await authFetch(WEBHOOK_BOT, {
      mode:        'termin',
      sessionId:   SESSION_ID,
      kategorie:   botTerminKat,
      leistung:    sub.key,
      leistungName:sub.label,
      message:     'Ich m√∂chte einen Termin f√ºr folgende Leistung buchen: ' + sub.label,
      timestamp:   new Date().toISOString(),
      currentDateTime: new Date().toLocaleString('de-DE',{weekday:'long',day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'}),
      currentPage: document.querySelector('.page.active')?.id||'unknown'
    }, BOT_TOKEN);
    const d = await r.json();
    botHideTyping();
    const reply = d.reply||d.text||d.message||'Ich bin bereit, Ihren Termin zu buchen. Wie ist Ihr Name?';
    botAddMessage('bot', reply, Array.isArray(d.pages)?d.pages:[]);
  } catch(e){
    botHideTyping();
    botAddMessage('bot','‚ö†Ô∏è Verbindungsfehler. Bitte versuchen Sie es erneut.');
  }
  showInputArea();
  document.querySelectorAll('.bot-suggestion').forEach(b=>b.onclick=()=>botSendMessage(b.dataset.text));
}

/* ‚îÄ‚îÄ Info-Chat: Nachricht senden ‚îÄ‚îÄ */
async function botSendMessage(text){
  if(!text.trim()) return;
  botAddMessage('user', text);
  botInput.value=''; botInput.style.height='auto';
  botSend.disabled=true;
  hideInputArea();
  botShowTyping();
  try{
    const r = await authFetch(WEBHOOK_BOT, {
      mode:        botMode,
      sessionId:   SESSION_ID,
      message:     text,
      kategorie:   botTerminKat||null,
      leistung:    botTerminSub||null,
      timestamp:   new Date().toISOString(),
      currentDateTime: new Date().toLocaleString('de-DE',{weekday:'long',day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'}),
      currentPage: document.querySelector('.page.active')?.id||'unknown'
    }, BOT_TOKEN);
    const d = await r.json();
    botHideTyping();
    const reply = d.reply||d.text||d.message||'Ich konnte keine Antwort ermitteln.';
    botAddMessage('bot', reply, Array.isArray(d.pages)?d.pages:[]);
  } catch(err){
    botHideTyping();
    botAddMessage('bot','‚ö†Ô∏è Verbindungsfehler. Bitte pr√ºfen Sie Ihre Internetverbindung.');
  }
  botSend.disabled=false;
  showInputArea();
}

/* ‚îÄ‚îÄ Reset-Button ‚îÄ‚îÄ */
function showReset(){ $('bot-reset').classList.add('visible'); }
function hideReset(){ $('bot-reset').classList.remove('visible'); }

$('bot-reset').onclick = ()=>{
  botMessages.innerHTML = '';
  botMode      = 'start';
  botTerminKat = null;
  botTerminSub = null;
  $('stadtbot-window').classList.remove('expanded');
  hideSteps();
  hideChoices();
  hideInputArea();
  hideReset();
  botAddMessage('bot','Hallo! üëã Ich bin der PaderbornBot ‚Äì Ihr digitaler Assistent f√ºr das Stadtportal Paderborn.\n\nWas kann ich f√ºr Sie tun?');
  setTimeout(botStart, 400);
};

/* ‚îÄ‚îÄ Scroll-Lock: Seite scrollt nicht wenn Maus/Finger im Widget ‚îÄ‚îÄ */
const botWindow = $('stadtbot-window');
botWindow.addEventListener('wheel', e=>{ e.stopPropagation(); }, {passive:true});
botWindow.addEventListener('touchmove', e=>{ e.stopPropagation(); }, {passive:true});

/* ‚îÄ‚îÄ Toggle ‚îÄ‚îÄ */
$('stadtbot-toggle').onclick = ()=>{
  botOpen=!botOpen;
  $('stadtbot-window').classList.toggle('open', botOpen);
  if(botOpen){ $('stadtbot-toggle').querySelector('.stadtbot-badge').style.display='none'; botMessages.scrollTop=botMessages.scrollHeight; }
};
$('bot-close').onclick = ()=>{ botOpen=false; $('stadtbot-window').classList.remove('open'); };
botSend.onclick = ()=>botSendMessage(botInput.value);
botInput.addEventListener('keydown',e=>{ if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();botSendMessage(botInput.value);} });
botInput.addEventListener('input',()=>{ botInput.style.height='auto'; botInput.style.height=Math.min(botInput.scrollHeight,80)+'px'; });

/* ‚îÄ‚îÄ Start ‚îÄ‚îÄ */
botAddMessage('bot','Hallo! üëã Ich bin der PaderbornBot ‚Äì Ihr digitaler Assistent f√ºr das Stadtportal Paderborn.\n\nWas kann ich f√ºr Sie tun?');
setTimeout(botStart, 400);

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SUMMARIZER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let activeFilter=null;

document.querySelectorAll('.filter-chip').forEach(chip=>{
  chip.onclick=()=>{
    document.querySelectorAll('.filter-chip').forEach(c=>c.classList.remove('active'));
    if(activeFilter===chip.dataset.filter){ activeFilter=null; }
    else{ chip.classList.add('active'); activeFilter=chip.dataset.filter; $('filter-custom').value=''; }
  };
});
$('filter-custom').oninput=e=>{ if(e.target.value.trim()){ document.querySelectorAll('.filter-chip').forEach(c=>c.classList.remove('active')); activeFilter=null; } };
$('sum-toggle').onclick=()=>$('sum-panel').classList.toggle('open');
$('sum-close').onclick=()=>$('sum-panel').classList.remove('open');

$('sum-submit').onclick=async()=>{
  const btn=$('sum-submit');
  btn.classList.add('loading');
  const customFilter=$('filter-custom').value.trim();
  const filterToSend=customFilter||activeFilter||'alles';
  const activePage=document.querySelector('.page.active');
  const articleBody=activePage.querySelector('.article-body');
  const hero=activePage.querySelector('.article-hero h1');
  const pageText=(hero?hero.innerText+'\n\n':'')+(articleBody?articleBody.innerText:'');
  const resultArea=$('sum-result');
  const resultText=$('sum-result-text');
  resultText.innerHTML='';
  resultArea.classList.add('visible');
  try{
    const r=await authFetch(WEBHOOK_SUMMARIZE,{text:pageText,filter:filterToSend,url:window.location.href},SUMMARIZE_TOKEN);
    const d=await r.json();
    const text=d.summary||d.text||d.result||'Keine Zusammenfassung erhalten.';
    // FIX Doppelstrich: "- Text" wird als .sum-bullet gerendert.
    // CSS ::before erzeugt einen kleinen Punkt (kein Strich) ‚Äì das Pr√§fix wird weggeschnitten.
    // So erscheint das Bullet-Zeichen nur einmal (vom Dot via CSS), kein doppelter Strich.
    const lines=text.split('\n');
    let i=0;
    function nextLine(){
      if(i<lines.length){
        const line=lines[i];
        const div=document.createElement('div');
        if(line.startsWith('**')&&line.endsWith('**')){
          div.className='sum-heading sum-fade';
          div.textContent=line.replace(/\*\*/g,'');
        } else if(line.startsWith('- ')||line.startsWith('‚Ä¢ ')){
          // Strich/Bullet-Zeichen abschneiden; CSS ::before zeigt einen goldenen Punkt
          div.className='sum-bullet sum-fade';
          div.innerHTML=line.replace(/^[-‚Ä¢]\s/,'').replace(/\*\*(.+?)\*\*/g,'<strong>$1</strong>');
        } else if(line.trim()===''){
          div.className='sum-spacer';
        } else {
          div.className='sum-line sum-fade';
          div.innerHTML=line.replace(/\*\*(.+?)\*\*/g,'<strong>$1</strong>');
        }
        resultText.appendChild(div); i++;
        setTimeout(nextLine,60);
      }
    }
    nextLine();
  }catch(e){
    resultText.textContent='Fehler beim Laden der Zusammenfassung. Bitte versuchen Sie es erneut.';
  }
  btn.classList.remove('loading');
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MALER WIDGET
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
$('maler-toggle').onclick=()=>$('maler-window').classList.add('open');
$('maler-close').onclick=()=>$('maler-window').classList.remove('open');

const SERVICE_NAMES={1:'Innenw√§nde streichen',2:'Fassade streichen',3:'Tapezieren',4:'T√ºren/Fenster lackieren',5:'Verputzen/Grundieren',6:'Dekorative Techniken'};
const BLOCKED=['arsch','wichser','hurensohn','fotze','fick','schei√üe','scheisse','hure','nutte','bastard','idiot','depp','nazi','hitler','fuck','shit','asshole','bitch','cunt'];
const FAKE=['brad pitt','angelina jolie','tom cruise','angela merkel','elon musk','harry potter','max mustermann','john doe','test test'];

function validateName(n){
  const t=n.trim(),l=t.toLowerCase();
  if(t.length<3) return{v:false,m:'Name zu kurz'};
  if(t.split(/\s+/).filter(x=>x).length<2) return{v:false,m:'Vor- und Nachname'};
  if(/\d/.test(t)) return{v:false,m:'Keine Zahlen'};
  for(const b of BLOCKED) if(l.includes(b)) return{v:false,m:'Bitte echten Namen'};
  for(const f of FAKE)    if(l.includes(f)) return{v:false,m:'Bitte echten Namen'};
  return{v:true,m:''};
}
function validatePhone(p){ return /^(\+49|0)[1-9]\d{8,11}$/.test(p.replace(/[\s\-]/g,'')); }

const ms={type:'privat',locationValid:false,nameValid:false,phoneValid:false,service:null,dsgvo:false,distance:null};
let mFiles=[];

function mUpdateProgress(){
  const ok=$('m-size').value.trim()&&$('m-timeframe').value.trim();
  const done=[ms.locationValid,ms.nameValid,ms.phoneValid,ms.service!==null,!!ok].filter(Boolean).length;
  $('maler-progress-bar').style.width=(done/5*100)+'%';
}
function mUpdateUI(){
  const ok=$('m-size').value.trim()&&$('m-timeframe').value.trim();
  [{id:'m-check-location',v:ms.locationValid},{id:'m-check-name',v:ms.nameValid},{id:'m-check-phone',v:ms.phoneValid},{id:'m-check-service',v:ms.service!==null},{id:'m-check-details',v:!!ok}]
    .forEach(c=>{ const el=$(c.id); el.className=c.v?'m-check-item checked':'m-check-item'; el.querySelector('.m-check-icon').textContent=c.v?'‚úì':'‚óã'; });
  mUpdateProgress();
  const ready=ms.locationValid&&ms.nameValid&&ms.phoneValid&&ms.service!==null&&ok&&ms.dsgvo;
  $('m-submit').disabled=!ready;
  $('m-submit').classList.toggle('ready',ready);
}

document.querySelectorAll('.m-type-btn').forEach(btn=>{
  btn.onclick=()=>{
    document.querySelectorAll('.m-type-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active'); ms.type=btn.dataset.type; ms.locationValid=false;
    $('m-privat-box').style.display=ms.type==='privat'?'block':'none';
    $('m-gewerbe-box').style.display=ms.type==='gewerbe'?'block':'none';
    $('m-privat-status').className='m-val-status'; $('m-gewerbe-status').className='m-val-status';
    mUpdateUI();
  };
});

$('m-validate-privat-btn').onclick=async()=>{
  const l=$('m-location-privat').value.trim(), box=$('m-privat-box');
  if(!l){ $('m-privat-status').className='m-val-status visible error'; $('m-privat-status').textContent='‚ùå Bitte Ort eingeben'; box.classList.add('shake'); setTimeout(()=>box.classList.remove('shake'),500); return; }
  const btn=$('m-validate-privat-btn'); btn.classList.add('loading'); btn.disabled=true;
  try{
    const r=await authFetch(WEBHOOK_VALIDATE,{type:'privat',location:l},MALER_TOKEN);
    const d=await r.json(); const x=Array.isArray(d)?d[0]:d;
    if(x.valid){ ms.locationValid=true; ms.distance=x.distance; $('m-privat-status').className='m-val-status visible success'; $('m-privat-status').textContent='‚úÖ Im Gebiet ‚Äì '+x.distance+'km'; box.classList.add('success-pulse'); setTimeout(()=>box.classList.remove('success-pulse'),600); }
    else{ ms.locationValid=false; $('m-privat-status').className='m-val-status visible error'; $('m-privat-status').textContent=x.message||'‚ùå Au√üerhalb des Gebiets'; box.classList.add('shake'); setTimeout(()=>box.classList.remove('shake'),500); }
  }catch(e){ $('m-privat-status').className='m-val-status visible error'; $('m-privat-status').textContent='‚ùå Verbindungsfehler'; }
  btn.classList.remove('loading'); btn.disabled=false; mUpdateUI();
};

$('m-validate-gewerbe-btn').onclick=async()=>{
  const c=$('m-company').value.trim(), l=$('m-location-gewerbe').value.trim(), box=$('m-gewerbe-box');
  if(!c||!l){ $('m-gewerbe-status').className='m-val-status visible error'; $('m-gewerbe-status').textContent='‚ùå Firma und Ort eingeben'; box.classList.add('shake'); setTimeout(()=>box.classList.remove('shake'),500); return; }
  const btn=$('m-validate-gewerbe-btn'); btn.classList.add('loading'); btn.disabled=true;
  try{
    const r=await authFetch(WEBHOOK_VALIDATE,{type:'gewerbe',company:c,location:l},MALER_TOKEN);
    const d=await r.json(); const x=Array.isArray(d)?d[0]:d;
    if(x.valid){ ms.locationValid=true; ms.distance=x.distance; $('m-gewerbe-status').className='m-val-status visible success'; $('m-gewerbe-status').textContent='‚úÖ '+(x.companyInfo||c)+' ‚Äì '+x.distance+'km'; box.classList.add('success-pulse'); setTimeout(()=>box.classList.remove('success-pulse'),600); }
    else{ ms.locationValid=false; $('m-gewerbe-status').className='m-val-status visible error'; $('m-gewerbe-status').textContent=x.message||'‚ùå Nicht gefunden'; box.classList.add('shake'); setTimeout(()=>box.classList.remove('shake'),500); }
  }catch(e){ $('m-gewerbe-status').className='m-val-status visible error'; $('m-gewerbe-status').textContent='‚ùå Verbindungsfehler'; }
  btn.classList.remove('loading'); btn.disabled=false; mUpdateUI();
};

$('m-name').oninput=e=>{
  const n=e.target.value, r=validateName(n);
  $('m-name').classList.toggle('valid',r.v); $('m-name').classList.toggle('invalid',!r.v&&n.trim().length>=3);
  $('m-name-status').textContent=n.length===0?'':r.v?'‚úÖ':n.trim().length>=3?'‚ùå':'';
  $('m-name-error').textContent=!r.v&&n.trim().length>=3?r.m:'';
  $('m-name-error').classList.toggle('visible',!r.v&&n.trim().length>=3);
  ms.nameValid=r.v; mUpdateUI();
};

$('m-phone').oninput=e=>{
  const p=e.target.value, ok=validatePhone(p);
  $('m-phone').classList.toggle('valid',ok); $('m-phone').classList.toggle('invalid',p.length>=6&&!ok);
  $('m-phone-status').textContent=p.length===0?'':ok?'‚úÖ':p.length>=6?'‚ùå':'';
  ms.phoneValid=ok; mUpdateUI();
};

document.querySelectorAll('#m-services .m-service-option').forEach(o=>{
  o.onclick=()=>{ document.querySelectorAll('#m-services .m-service-option').forEach(x=>x.classList.remove('selected')); o.classList.add('selected'); ms.service=parseInt(o.dataset.service); mUpdateUI(); };
});

$('m-size').oninput=()=>mUpdateUI();
$('m-timeframe').oninput=()=>mUpdateUI();
$('m-dsgvo').onchange=e=>{ ms.dsgvo=e.target.checked; mUpdateUI(); };
$('m-dsgvo-toggle').onclick=e=>{ e.preventDefault(); e.stopPropagation(); $('m-dsgvo-details').classList.toggle('visible'); };

$('m-images').onchange=e=>{
  Array.from(e.target.files).forEach(f=>{ if(f.size>10*1024*1024){alert('Max. 10 MB pro Bild');return;} mFiles.push(f); });
  renderMFiles(); e.target.value='';
};
function renderMFiles(){
  $('m-file-list').innerHTML=mFiles.map((f,i)=>`<div class="m-file-item">üì∑ ${f.name.slice(0,15)}‚Ä¶<span class="m-file-item-remove" data-i="${i}">‚úï</span></div>`).join('');
  $('m-file-list').querySelectorAll('.m-file-item-remove').forEach(b=>b.onclick=e=>{mFiles.splice(+e.target.dataset.i,1);renderMFiles();});
}

/* Formular absenden ‚Üí WEBHOOK_SEND (sendet Daten an n8n;
   n8n-Flow ist zust√§ndig f√ºr: Preissch√§tzung berechnen + beide Seiten benachrichtigen) */
$('maler-form').onsubmit=async e=>{
  e.preventDefault();
  $('maler-loading').classList.add('visible');
  $('m-submit').classList.add('loading');
  const isG=ms.type==='gewerbe';
  const sNum=parseFloat($('m-size').value.replace(/[^\d.,]/g,'').replace(',','.'))||30;
  const fd={
    customerType:ms.type, company:isG?$('m-company').value:'',
    name:$('m-name').value, email:$('m-email').value.trim(), phone:$('m-phone').value,
    location:isG?$('m-location-gewerbe').value:$('m-location-privat').value,
    distance:ms.distance, serviceId:ms.service, serviceName:SERVICE_NAMES[ms.service]||'',
    size:$('m-size').value, sizeNumber:sNum, timeframe:$('m-timeframe').value,
    description:$('m-description').value.trim(), imagesCount:mFiles.length,
    dsgvoAccepted:true, timestamp:new Date().toISOString()
  };
  try{
    const fm=new FormData();
    fm.append('formData',JSON.stringify(fd));
    mFiles.forEach((f,i)=>fm.append('image_'+i,f));
    const r=await authFetchForm(WEBHOOK_SEND,fm,MALER_TOKEN);
    const d=await r.json();
    $('m-result-price').textContent    = d.price    ? 'ca. '+Number(d.price).toLocaleString('de-DE')+' ‚Ç¨' : '-';
    $('m-result-duration').textContent = d.duration || '-';
    $('m-result-workers').textContent  = d.workers  || '-';
  }catch(err){
    $('m-result-price').textContent='-'; $('m-result-duration').textContent='-'; $('m-result-workers').textContent='-';
  }
  $('m-result-type').textContent=fd.customerType==='gewerbe'?'Gewerblich üè¢':'Privat üè†';
  $('m-result-company-row').style.display=fd.company?'flex':'none';
  $('m-result-company').textContent=fd.company;
  $('m-result-name').textContent=fd.name;
  $('m-result-email-row').style.display=fd.email?'flex':'none';
  $('m-result-email').textContent=fd.email;
  $('m-result-phone').textContent=fd.phone;
  $('m-result-location').textContent=fd.location+(fd.distance?' ('+fd.distance+'km)':'');
  $('m-result-service').textContent=fd.serviceName;
  $('m-result-size').textContent=fd.size;
  $('m-result-timeframe').textContent=fd.timeframe;
  setTimeout(()=>{ $('maler-loading').classList.remove('visible'); $('maler-form-view').style.display='none'; $('maler-result-view').classList.add('visible'); $('maler-body').scrollTop=0; },1500);
};

mUpdateProgress();
})();
</script>
</body>
</html>
