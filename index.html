<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Malerbetrieb Demo ‚Äì Agentic Solutions</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
:root{
  --bg:#0a0a0a;
  --bg-card:#1a1816;
  --bg-input:#12100e;
  --border:rgba(255,255,255,.06);
  --border-hover:rgba(255,255,255,.12);
  --text:#ffffff;
  --text-muted:rgba(255,255,255,.55);
  --text-subtle:rgba(255,255,255,.35);
  --orange:#d97706;
  --orange-light:#f59e0b;
  --orange-dark:#b45309;
  --glow:rgba(217,119,6,.5);
  --glow-soft:rgba(217,119,6,.15);
  --success:#22c55e;
  --error:#ef4444;
  --gradient:linear-gradient(135deg,#b45309 0%,#d97706 50%,#f59e0b 100%);
  --widget-width:min(420px,92vw);
  --widget-height:min(680px,85vh);
}

*{box-sizing:border-box;margin:0;padding:0}
body{min-height:100vh;background:var(--bg);color:var(--text);font-family:'Inter',sans-serif}

@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes checkBounce{0%{transform:scale(0)}50%{transform:scale(1.4)}70%{transform:scale(0.9)}100%{transform:scale(1)}}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 var(--glow)}50%{box-shadow:0 0 20px 6px var(--glow)}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes confetti{0%{transform:translateY(0) rotate(0);opacity:1}100%{transform:translateY(-400px) rotate(720deg);opacity:0}}
@keyframes shake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-5px)}40%,80%{transform:translateX(5px)}}
@keyframes successPulse{0%{box-shadow:0 0 0 0 rgba(34,197,94,.4)}100%{box-shadow:0 0 15px 8px rgba(34,197,94,0)}}
@keyframes scaleIn{from{opacity:0;transform:scale(0.95)}to{opacity:1;transform:scale(1)}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

/* Page Content */
.page-content{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  min-height:100vh;
  padding:40px 20px;
  text-align:center;
}
.page-title{font-size:28px;font-weight:700;margin-bottom:12px}
.page-subtitle{font-size:15px;color:var(--text-muted);max-width:400px;line-height:1.6}
.demo-arrow{
  position:fixed;
  bottom:100px;
  right:100px;
  display:flex;
  align-items:center;
  gap:12px;
  color:var(--orange-light);
  font-size:14px;
  animation:float 2s ease-in-out infinite;
}
.demo-arrow span{font-size:24px}

/* Widget */
.widget{position:fixed;right:20px;bottom:20px;z-index:9999}
.widget-toggle{
  width:64px;height:64px;
  background:var(--gradient);
  border-radius:50%;
  border:none;
  cursor:pointer;
  display:flex;align-items:center;justify-content:center;
  font-size:28px;
  box-shadow:0 8px 32px var(--glow);
  transition:transform .2s,box-shadow .2s;
}
.widget-toggle:hover{transform:scale(1.08);box-shadow:0 12px 40px var(--glow)}

.widget-window{
  position:absolute;
  bottom:76px;right:0;
  width:var(--widget-width);
  height:var(--widget-height);
  background:var(--bg-card);
  border-radius:20px;
  border:1px solid var(--border);
  box-shadow:0 25px 60px rgba(0,0,0,.6);
  display:none;
  flex-direction:column;
  overflow:hidden;
}
.widget-window.open{display:flex;animation:scaleIn .3s ease-out}

/* Widget Header */
.widget-header{
  padding:16px 20px;
  background:rgba(0,0,0,.3);
  border-bottom:1px solid var(--border);
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.widget-header-left{display:flex;align-items:center;gap:12px}
.widget-logo{width:36px;height:36px;background:var(--gradient);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:18px}
.widget-title{font-size:15px;font-weight:600}
.widget-subtitle{font-size:11px;color:var(--text-muted)}
.widget-close{background:none;border:none;color:var(--text-muted);font-size:20px;cursor:pointer;padding:4px}
.widget-close:hover{color:var(--text)}

/* Progress Bar im Widget */
.widget-progress{height:3px;background:rgba(255,255,255,.1)}
.widget-progress-bar{height:100%;background:var(--gradient);width:0;transition:width .4s}

/* Widget Body */
.widget-body{flex:1;overflow-y:auto;padding:20px}
.widget-body::-webkit-scrollbar{width:5px}
.widget-body::-webkit-scrollbar-thumb{background:rgba(255,255,255,.15);border-radius:3px}

/* Welcome Box */
.welcome-box{background:rgba(217,119,6,.1);border:1px solid rgba(217,119,6,.2);border-radius:10px;padding:12px 14px;margin-bottom:20px}
.welcome-box p{font-size:13px;line-height:1.5;margin:0}
.welcome-box strong{color:var(--orange-light)}

/* Sections */
.section{margin-bottom:20px}
.section-title{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--orange-light);margin-bottom:12px;display:flex;align-items:center;gap:6px}
.section-title::before{content:'';width:10px;height:2px;background:var(--gradient)}

/* Groups */
.group{margin-bottom:14px}
.row{display:grid;grid-template-columns:1fr 1fr;gap:10px}

/* Floating Labels */
.float-group{position:relative}
.float-label{position:absolute;left:14px;top:50%;transform:translateY(-50%);font-size:13px;color:var(--text-muted);pointer-events:none;transition:all .2s;background:var(--bg-input);padding:0 5px}
.float-label .req{color:var(--error);margin-left:2px}
.float-input:focus~.float-label,.float-input:not(:placeholder-shown)~.float-label{top:0;font-size:10px;color:var(--orange);font-weight:500}

/* Inputs */
.float-input{width:100%;padding:14px 16px;background:var(--bg-input);border:1px solid var(--border);border-radius:10px;color:var(--text);font-size:14px;font-family:inherit}
.float-input:focus{outline:none;border-color:var(--orange);box-shadow:0 0 0 3px var(--glow-soft)}
.float-input::placeholder{color:transparent}
.float-input.valid{border-color:var(--success)}
.float-input.invalid{border-color:var(--error)}

/* Textarea */
.textarea-group{position:relative}
.textarea{width:100%;padding:14px 16px;background:var(--bg-input);border:1px solid var(--border);border-radius:10px;color:var(--text);font-size:14px;font-family:inherit;resize:vertical;min-height:80px;line-height:1.5}
.textarea:focus{outline:none;border-color:var(--orange);box-shadow:0 0 0 3px var(--glow-soft)}
.textarea::placeholder{color:transparent}
.textarea-label{position:absolute;left:14px;top:14px;font-size:13px;color:var(--text-muted);pointer-events:none;transition:all .2s;background:var(--bg-input);padding:0 5px}
.textarea:focus~.textarea-label,.textarea:not(:placeholder-shown)~.textarea-label{top:-8px;font-size:10px;color:var(--orange);font-weight:500}

/* Input Status */
.input-wrap{position:relative}
.input-status{position:absolute;right:14px;top:50%;transform:translateY(-50%);font-size:16px}

/* Customer Type Toggle */
.type-toggle{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:16px}
.type-btn{padding:12px;background:var(--bg-input);border:1px solid var(--border);border-radius:10px;color:var(--text-muted);font-size:13px;font-weight:500;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:6px;transition:all .2s}
.type-btn:hover{border-color:var(--border-hover)}
.type-btn.active{background:rgba(217,119,6,.15);border-color:var(--orange);color:var(--orange-light)}

/* Validation Box */
.val-box{background:rgba(217,119,6,.05);border:1px solid rgba(217,119,6,.12);border-radius:12px;padding:16px;margin-bottom:16px}
.val-row{display:flex;gap:10px}
.val-row .float-group{flex:1}
.val-btn{padding:14px 16px;background:rgba(217,119,6,.15);border:1px solid rgba(217,119,6,.3);border-radius:10px;color:var(--orange-light);font-size:12px;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:6px;white-space:nowrap}
.val-btn:hover{background:rgba(217,119,6,.25)}
.val-btn:disabled{opacity:.5;cursor:not-allowed}
.val-btn .spinner{width:14px;height:14px;border:2px solid transparent;border-top-color:var(--orange-light);border-radius:50%;animation:spin .8s linear infinite;display:none}
.val-btn.loading .spinner{display:block}
.val-btn.loading .btn-icon{display:none}
.val-status{padding:10px 12px;border-radius:8px;font-size:12px;margin-top:12px;display:none}
.val-status.visible{display:flex;align-items:center;gap:8px}
.val-status.success{background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.2);color:var(--success)}
.val-status.error{background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);color:var(--error)}

/* Field Error */
.field-error{font-size:11px;color:var(--error);margin-top:5px;display:none}
.field-error.visible{display:block}

/* Service Selection */
.service-grid{display:flex;flex-direction:column;gap:6px}
.service-option{display:flex;align-items:center;gap:12px;padding:12px 14px;background:var(--bg-input);border:1px solid var(--border);border-radius:10px;cursor:pointer;transition:all .2s}
.service-option:hover{border-color:var(--border-hover)}
.service-option.selected{background:rgba(217,119,6,.1);border-color:var(--orange);box-shadow:0 0 15px var(--glow-soft)}
.service-check{width:20px;height:20px;border-radius:50%;border:2px solid var(--border-hover);display:flex;align-items:center;justify-content:center;font-size:11px;color:transparent;flex-shrink:0}
.service-option.selected .service-check{background:var(--gradient);border-color:var(--orange);color:#fff;animation:checkBounce .4s}
.service-name{font-size:13px;font-weight:500;color:var(--text)}

/* File Upload */
.file-upload{border:2px dashed rgba(217,119,6,.25);border-radius:10px;padding:20px;text-align:center;cursor:pointer;position:relative;transition:all .2s}
.file-upload:hover{border-color:var(--orange);background:rgba(217,119,6,.05)}
.file-upload input{position:absolute;inset:0;opacity:0;cursor:pointer}
.file-upload-icon{font-size:28px;margin-bottom:6px}
.file-upload-text{font-size:12px;color:var(--text-muted)}
.file-upload-hint{font-size:10px;color:var(--text-subtle);margin-top:3px}
.file-list{margin-top:10px;display:flex;flex-wrap:wrap;gap:6px}
.file-item{display:flex;align-items:center;gap:5px;padding:6px 10px;background:rgba(217,119,6,.15);border-radius:6px;font-size:11px}
.file-item-remove{cursor:pointer;color:var(--error);font-weight:bold;margin-left:3px}

/* Checklist */
.checklist{background:rgba(217,119,6,.05);border:1px solid rgba(217,119,6,.08);border-radius:12px;padding:14px 16px;margin-bottom:16px}
.checklist-title{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--text-muted);margin-bottom:10px}
.checklist-items{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.check-item{display:flex;align-items:center;gap:8px;font-size:11px;color:var(--text-subtle)}
.check-item.checked{color:var(--success)}
.check-icon{width:16px;height:16px;border-radius:5px;display:flex;align-items:center;justify-content:center;font-size:9px;background:rgba(255,255,255,.05)}
.check-item.checked .check-icon{background:var(--success);color:#fff}

/* DSGVO */
.dsgvo{background:var(--bg-input);border:1px solid var(--border);border-radius:12px;padding:14px 16px;margin-bottom:20px}
.dsgvo-row{display:flex;align-items:flex-start;gap:10px;font-size:12px;color:var(--text-muted);cursor:pointer}
.dsgvo-row input{margin-top:2px;width:16px;height:16px;accent-color:var(--orange)}
.dsgvo-toggle{background:none;border:none;cursor:pointer;font-size:12px;color:var(--orange-light);padding:0}
.dsgvo-toggle:hover{text-decoration:underline}
.dsgvo-details{display:none;margin-top:12px;padding-top:12px;border-top:1px solid var(--border);font-size:11px;color:var(--text-subtle)}
.dsgvo-details.visible{display:block}

/* Submit */
.submit{width:100%;padding:16px;background:var(--gradient);border:none;border-radius:12px;color:#fff;font-size:15px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;transition:all .3s}
.submit:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 30px var(--glow)}
.submit:disabled{opacity:.4;cursor:not-allowed}
.submit.ready{animation:pulse 2s infinite}
.submit .spinner{width:18px;height:18px;border:2px solid transparent;border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite;display:none}
.submit.loading .spinner{display:block}
.submit.loading .btn-text{display:none}

/* Result */
.result{display:none}
.result.visible{display:block;animation:fadeInUp .4s}
.confetti{position:absolute;width:8px;height:8px;border-radius:2px;animation:confetti 3s forwards}
.result-success{text-align:center;padding:20px 0}
.result-icon{font-size:56px;margin-bottom:12px}
.result-success h3{font-size:20px;font-weight:700;margin:0 0 6px;color:var(--text)}
.result-success p{font-size:13px;color:var(--text-muted);margin:0}
.result-highlight{background:rgba(217,119,6,.1);border:1px solid rgba(217,119,6,.2);border-radius:12px;padding:16px;margin:16px 0;display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;text-align:center}
.result-highlight-item{display:flex;flex-direction:column;gap:3px}
.result-highlight-label{font-size:10px;color:var(--text-muted);text-transform:uppercase}
.result-highlight-value{font-size:18px;font-weight:700;color:var(--orange-light)}
.result-highlight-item.main .result-highlight-value{font-size:20px}
.result-summary{background:var(--bg-input);border:1px solid var(--border);border-radius:12px;padding:16px}
.result-summary-title{font-size:9px;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;color:var(--orange-light);margin-bottom:12px}
.result-row{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border);font-size:12px}
.result-row:last-child{border-bottom:none}
.result-row .lbl{color:var(--text-muted)}
.result-row .val{color:var(--text);font-weight:500;text-align:right;max-width:55%}
.result-divider{height:1px;background:var(--border);margin:4px 0}
.disclaimer{font-size:11px;color:var(--text-subtle);text-align:center;margin-top:16px}

/* Loading */
.loading-overlay{position:absolute;inset:0;background:rgba(26,24,22,.95);display:none;flex-direction:column;align-items:center;justify-content:center;z-index:100;border-radius:20px}
.loading-overlay.visible{display:flex}
.loading-spinner{width:48px;height:48px;border:3px solid var(--border);border-top-color:var(--orange);border-radius:50%;animation:spin 1s linear infinite;margin-bottom:16px}
.loading-text{font-size:14px;color:var(--text-muted)}

/* Animations */
.shake{animation:shake .5s}
.success-pulse{animation:successPulse .6s}

/* Responsive */
@media(max-width:500px){
  .widget-window{width:calc(100vw - 24px);right:-8px;height:calc(100vh - 100px)}
  .row{grid-template-columns:1fr}
  .val-row{flex-direction:column}
  .val-btn{width:100%;justify-content:center}
  .checklist-items{grid-template-columns:1fr}
  .result-highlight{grid-template-columns:1fr;gap:8px}
  .result-highlight-item{flex-direction:row;justify-content:space-between;padding:6px 0;border-bottom:1px solid var(--border)}
  .result-highlight-item:last-child{border-bottom:none}
  .demo-arrow{display:none}
}
  </style>
</head>
<body>

<!-- Page Background Content -->
<div class="page-content">
  <h1 class="page-title">üé® Malerbetrieb Demo</h1>
  <p class="page-subtitle">Testen Sie unser intelligentes Kontaktformular f√ºr Handwerksbetriebe. Klicken Sie auf das Widget unten rechts.</p>
</div>

<div class="demo-arrow">
  Formular √∂ffnen <span>‚Üí</span>
</div>

<!-- Widget -->
<div class="widget">
  <button class="widget-toggle" id="widget-toggle">üé®</button>
  
  <div class="widget-window" id="widget-window">
    <div class="loading-overlay" id="loading">
      <div class="loading-spinner"></div>
      <div class="loading-text">Anfrage wird verarbeitet...</div>
    </div>
    
    <div class="widget-header">
      <div class="widget-header-left">
        <div class="widget-logo">üé®</div>
        <div>
          <div class="widget-title">ProjektBau GmbH</div>
          <div class="widget-subtitle">Malerbetrieb ‚Ä¢ Paderborn</div>
        </div>
      </div>
      <button class="widget-close" id="widget-close">‚úï</button>
    </div>
    
    <div class="widget-progress">
      <div class="widget-progress-bar" id="progress-bar"></div>
    </div>
    
    <div class="widget-body" id="widget-body">
      
      <div id="form-view">
        <div class="welcome-box">
          <p><strong>Willkommen!</strong> F√ºllen Sie das Formular aus und erhalten Sie sofort eine <strong>Preissch√§tzung</strong>.</p>
        </div>
        
        <form id="maler-form">
          
          <!-- KUNDENTYP -->
          <div class="section">
            <div class="section-title">Kundentyp</div>
            <div class="type-toggle">
              <button type="button" class="type-btn active" data-type="privat">üè† Privat</button>
              <button type="button" class="type-btn" data-type="gewerbe">üè¢ Gewerblich</button>
            </div>
          </div>
          
          <!-- PRIVAT BOX -->
          <div class="val-box" id="privat-box">
            <div class="val-row">
              <div class="float-group">
                <input type="text" class="float-input" id="location-privat" placeholder=" ">
                <label class="float-label">Ort (Stadt/PLZ)<span class="req">*</span></label>
              </div>
              <button type="button" class="val-btn" id="validate-privat-btn">
                <span class="spinner"></span>
                <span class="btn-icon">üîç</span> Pr√ºfen
              </button>
            </div>
            <div class="val-status" id="privat-status"></div>
          </div>
          
          <!-- GEWERBE BOX -->
          <div class="val-box" id="gewerbe-box" style="display:none">
            <div class="group">
              <div class="float-group">
                <input type="text" class="float-input" id="company" placeholder=" ">
                <label class="float-label">Firmenname<span class="req">*</span></label>
              </div>
            </div>
            <div class="val-row">
              <div class="float-group">
                <input type="text" class="float-input" id="location-gewerbe" placeholder=" ">
                <label class="float-label">Ort<span class="req">*</span></label>
              </div>
              <button type="button" class="val-btn" id="validate-gewerbe-btn">
                <span class="spinner"></span>
                <span class="btn-icon">üîç</span> Pr√ºfen
              </button>
            </div>
            <div class="val-status" id="gewerbe-status"></div>
          </div>
          
          <!-- KONTAKT -->
          <div class="section">
            <div class="section-title">Kontaktdaten</div>
            <div class="group">
              <div class="input-wrap">
                <div class="float-group">
                  <input type="text" class="float-input" id="name" placeholder=" ">
                  <label class="float-label">Ihr Name<span class="req">*</span></label>
                  <span class="input-status" id="name-status"></span>
                </div>
              </div>
              <div class="field-error" id="name-error"></div>
            </div>
            <div class="row">
              <div class="group">
                <div class="float-group">
                  <input type="email" class="float-input" id="email" placeholder=" ">
                  <label class="float-label">E-Mail (optional)</label>
                </div>
              </div>
              <div class="group">
                <div class="input-wrap">
                  <div class="float-group">
                    <input type="tel" class="float-input" id="phone" placeholder=" ">
                    <label class="float-label">Telefon<span class="req">*</span></label>
                    <span class="input-status" id="phone-status"></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- LEISTUNG -->
          <div class="section">
            <div class="section-title">Gew√ºnschte Leistung</div>
            <div class="service-grid" id="services">
              <div class="service-option" data-service="1">
                <div class="service-check">‚úì</div>
                <span class="service-name">üñåÔ∏è Innenw√§nde streichen</span>
              </div>
              <div class="service-option" data-service="2">
                <div class="service-check">‚úì</div>
                <span class="service-name">üè† Fassade streichen</span>
              </div>
              <div class="service-option" data-service="3">
                <div class="service-check">‚úì</div>
                <span class="service-name">üìú Tapezieren</span>
              </div>
              <div class="service-option" data-service="4">
                <div class="service-check">‚úì</div>
                <span class="service-name">üö™ T√ºren/Fenster lackieren</span>
              </div>
              <div class="service-option" data-service="5">
                <div class="service-check">‚úì</div>
                <span class="service-name">üß± Verputzen/Grundieren</span>
              </div>
              <div class="service-option" data-service="6">
                <div class="service-check">‚úì</div>
                <span class="service-name">‚ú® Dekorative Techniken</span>
              </div>
            </div>
          </div>
          
          <!-- PROJEKTDETAILS -->
          <div class="section">
            <div class="section-title">Projektdetails</div>
            <div class="row">
              <div class="group">
                <div class="float-group">
                  <input type="text" class="float-input" id="size" placeholder=" ">
                  <label class="float-label">Gr√∂√üe (z.B. 50m¬≤)<span class="req">*</span></label>
                </div>
              </div>
              <div class="group">
                <div class="float-group">
                  <input type="text" class="float-input" id="timeframe" placeholder=" ">
                  <label class="float-label">Zeitraum<span class="req">*</span></label>
                </div>
              </div>
            </div>
          </div>
          
          <!-- BESCHREIBUNG -->
          <div class="section">
            <div class="group">
              <div class="textarea-group">
                <textarea class="textarea" id="description" placeholder=" "></textarea>
                <label class="textarea-label">Beschreibung (optional)</label>
              </div>
            </div>
          </div>
          
          <!-- BILDER -->
          <div class="section">
            <div class="section-title">Bilder (optional)</div>
            <div class="file-upload">
              <input type="file" id="images" multiple accept="image/*">
              <div class="file-upload-icon">üì∑</div>
              <div class="file-upload-text">Bilder hochladen</div>
              <div class="file-upload-hint">JPG, PNG bis 10MB</div>
            </div>
            <div class="file-list" id="file-list"></div>
          </div>
          
          <!-- CHECKLIST -->
          <div class="checklist">
            <div class="checklist-title">Checkliste</div>
            <div class="checklist-items">
              <div class="check-item" id="check-location"><span class="check-icon">‚óã</span><span>Standort gepr√ºft</span></div>
              <div class="check-item" id="check-name"><span class="check-icon">‚óã</span><span>Name g√ºltig</span></div>
              <div class="check-item" id="check-phone"><span class="check-icon">‚óã</span><span>Telefon g√ºltig</span></div>
              <div class="check-item" id="check-service"><span class="check-icon">‚óã</span><span>Leistung gew√§hlt</span></div>
              <div class="check-item" id="check-details"><span class="check-icon">‚óã</span><span>Details ausgef√ºllt</span></div>
            </div>
          </div>
          
          <!-- DSGVO -->
          <div class="dsgvo">
            <label class="dsgvo-row" for="dsgvo">
              <input type="checkbox" id="dsgvo">
              <span>Ich stimme der <button type="button" class="dsgvo-toggle" id="dsgvo-toggle">Datenschutzerkl√§rung</button> zu.</span>
            </label>
            <div class="dsgvo-details" id="dsgvo-details"><strong style="color:var(--orange-light)">Kurzinfo:</strong> Ihre Daten werden nur zur Bearbeitung Ihrer Anfrage verwendet.</div>
          </div>
          
          <!-- SUBMIT -->
          <button type="submit" class="submit" id="submit" disabled>
            <span class="spinner"></span>
            <span class="btn-text">üöÄ Anfrage absenden</span>
          </button>
          
        </form>
      </div>
      
      <!-- RESULT -->
      <div class="result" id="result-view">
        <div class="result-success">
          <div class="result-icon">‚úÖ</div>
          <h3>Anfrage erhalten!</h3>
          <p>Wir melden uns schnellstm√∂glich</p>
        </div>
        <div class="result-highlight">
          <div class="result-highlight-item main">
            <span class="result-highlight-label">üí∞ Preis</span>
            <span class="result-highlight-value" id="result-price">-</span>
          </div>
          <div class="result-highlight-item">
            <span class="result-highlight-label">üìÖ Dauer</span>
            <span class="result-highlight-value" id="result-duration">-</span>
          </div>
          <div class="result-highlight-item">
            <span class="result-highlight-label">üë∑ MA</span>
            <span class="result-highlight-value" id="result-workers">-</span>
          </div>
        </div>
        <div class="result-summary">
          <div class="result-summary-title">üìã Ihre Anfrage</div>
          <div class="result-row"><span class="lbl">Kundentyp</span><span class="val" id="result-type">-</span></div>
          <div class="result-row" id="result-company-row" style="display:none"><span class="lbl">Firma</span><span class="val" id="result-company">-</span></div>
          <div class="result-row"><span class="lbl">Name</span><span class="val" id="result-name">-</span></div>
          <div class="result-row" id="result-email-row" style="display:none"><span class="lbl">E-Mail</span><span class="val" id="result-email">-</span></div>
          <div class="result-row"><span class="lbl">Telefon</span><span class="val" id="result-phone">-</span></div>
          <div class="result-row"><span class="lbl">Standort</span><span class="val" id="result-location">-</span></div>
          <div class="result-divider"></div>
          <div class="result-row"><span class="lbl">Leistung</span><span class="val" id="result-service">-</span></div>
          <div class="result-row"><span class="lbl">Umfang</span><span class="val" id="result-size">-</span></div>
          <div class="result-row"><span class="lbl">Zeitraum</span><span class="val" id="result-timeframe">-</span></div>
          <div class="result-row" id="result-desc-row" style="display:none"><span class="lbl">Beschreibung</span><span class="val" id="result-description">-</span></div>
        </div>
        <p class="disclaimer">Unverbindliche Sch√§tzung. Abweichung ¬±15‚Äì20% m√∂glich.</p>
      </div>
      
    </div>
  </div>
</div>

<script>
(function(){
  const $=id=>document.getElementById(id);

  // ============================================================
  // üîê WEBHOOK KONFIGURATION
  // Token muss exakt mit dem n8n Webhook-Node Header √ºbereinstimmen
  // ============================================================
  const API_TOKEN = "0Xpj42sQ#g*kjpYP3cRsPawHAUH#U_&Mt&rlgnqPcnfsclT-"; // <-- HIER DEINEN TOKEN EINTRAGEN

  const WEBHOOK_VALIDATE = "https://seidel1502.app.n8n.cloud/webhook/3ad0bd7f-1b6e-4501-ba99-0cf05a2b4565";
  const WEBHOOK_CALCULATE = "https://seidel1502.app.n8n.cloud/webhook/d71b1438-46b7-4d67-9517-c0b2d2be92bd";

  // Einheitliche Funktion f√ºr authentifizierte JSON-Requests
  async function authFetch(url, body) {
    return fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer ' + API_TOKEN
      },
      body: JSON.stringify(body)
    });
  }

  // Einheitliche Funktion f√ºr authentifizierte FormData-Requests
  async function authFetchForm(url, formData) {
    return fetch(url, {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer ' + API_TOKEN
        // Content-Type NICHT setzen bei FormData ‚Äì Browser setzt boundary automatisch
      },
      body: formData
    });
  }
  // ============================================================
  
  const SERVICE_NAMES={1:'Innenw√§nde streichen',2:'Fassade streichen',3:'Tapezieren',4:'T√ºren/Fenster lackieren',5:'Verputzen/Grundieren',6:'Dekorative Techniken'};
  
  const BLOCKED=['arsch','wichser','hurensohn','fotze','fick','schei√üe','scheisse','hure','nutte','bastard','idiot','depp','nazi','hitler','fuck','shit','asshole','bitch','cunt'];
  const FAKE=['brad pitt','angelina jolie','tom cruise','angela merkel','elon musk','harry potter','max mustermann','john doe','test test'];
  
  function validateName(n){
    const t=n.trim(),l=t.toLowerCase();
    if(t.length<3)return{v:false,m:'Name zu kurz'};
    if(t.split(/\s+/).filter(x=>x).length<2)return{v:false,m:'Vor- und Nachname'};
    if(/\d/.test(t))return{v:false,m:'Keine Zahlen'};
    for(const b of BLOCKED)if(l.includes(b))return{v:false,m:'Bitte echten Namen'};
    for(const f of FAKE)if(l.includes(f))return{v:false,m:'Bitte echten Namen'};
    return{v:true,m:''}
  }
  function validatePhone(p){return/^(\+49|0)[1-9]\d{8,11}$/.test(p.replace(/[\s\-]/g,''))}
  
  const state={type:'privat',locationValid:false,nameValid:false,phoneValid:false,service:null,dsgvo:false,distance:null};
  let files=[];
  
  // Widget Toggle
  $('widget-toggle').onclick=()=>$('widget-window').classList.add('open');
  $('widget-close').onclick=()=>$('widget-window').classList.remove('open');
  
  // Confetti
  function createConfetti(){
    const colors=['#d97706','#f59e0b','#22c55e','#fbbf24','#fff'];
    for(let i=0;i<30;i++){
      const c=document.createElement('div');
      c.className='confetti';
      c.style.cssText='left:'+Math.random()*100+'%;background:'+colors[Math.floor(Math.random()*colors.length)]+';animation-delay:'+Math.random()*2+'s';
      $('result-view').appendChild(c);
      setTimeout(()=>c.remove(),4000);
    }
  }
  
  // Progress
  function updateProgress(){
    const detailsOk=$('size').value.trim()&&$('timeframe').value.trim();
    const done=[state.locationValid,state.nameValid,state.phoneValid,state.service!==null,detailsOk].filter(Boolean).length;
    $('progress-bar').style.width=(done/5)*100+'%';
  }
  
  // Update UI
  function updateUI(){
    const detailsOk=$('size').value.trim()&&$('timeframe').value.trim();
    [{id:'check-location',v:state.locationValid},{id:'check-name',v:state.nameValid},{id:'check-phone',v:state.phoneValid},{id:'check-service',v:state.service!==null},{id:'check-details',v:detailsOk}].forEach(c=>{
      const el=$(c.id);
      el.className=c.v?'check-item checked':'check-item';
      el.querySelector('.check-icon').textContent=c.v?'‚úì':'‚óã';
    });
    updateProgress();
    const ready=state.locationValid&&state.nameValid&&state.phoneValid&&state.service!==null&&detailsOk&&state.dsgvo;
    $('submit').disabled=!ready;
    $('submit').classList.toggle('ready',ready);
  }
  
  // Customer Type Toggle
  document.querySelectorAll('.type-btn').forEach(btn=>{
    btn.onclick=()=>{
      document.querySelectorAll('.type-btn').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      state.type=btn.dataset.type;
      state.locationValid=false;
      $('privat-box').style.display=state.type==='privat'?'block':'none';
      $('gewerbe-box').style.display=state.type==='gewerbe'?'block':'none';
      $('privat-status').className='val-status';
      $('gewerbe-status').className='val-status';
      updateUI();
    };
  });
  
  // Validate Privat
  $('validate-privat-btn').onclick=async()=>{
    const l=$('location-privat').value.trim();
    const box=$('privat-box');
    if(!l){
      $('privat-status').className='val-status visible error';
      $('privat-status').textContent='‚ùå Bitte Ort eingeben';
      box.classList.add('shake');setTimeout(()=>box.classList.remove('shake'),500);
      return;
    }
    const btn=$('validate-privat-btn');btn.classList.add('loading');btn.disabled=true;
    try{
      const r=await authFetch(WEBHOOK_VALIDATE,{type:'privat',location:l});
      const d=await r.json();const x=Array.isArray(d)?d[0]:d;
      if(x.valid){
        state.locationValid=true;state.distance=x.distance;
        $('privat-status').className='val-status visible success';
        $('privat-status').textContent='‚úÖ Im Gebiet ‚Äì '+x.distance+'km';
        box.classList.add('success-pulse');setTimeout(()=>box.classList.remove('success-pulse'),600);
      }else{
        state.locationValid=false;
        $('privat-status').className='val-status visible error';
        $('privat-status').textContent=x.message||'‚ùå Au√üerhalb des Gebiets';
        box.classList.add('shake');setTimeout(()=>box.classList.remove('shake'),500);
      }
    }catch(e){
      $('privat-status').className='val-status visible error';
      $('privat-status').textContent='‚ùå Fehler';
      box.classList.add('shake');setTimeout(()=>box.classList.remove('shake'),500);
    }
    btn.classList.remove('loading');btn.disabled=false;updateUI();
  };
  
  // Validate Gewerbe
  $('validate-gewerbe-btn').onclick=async()=>{
    const c=$('company').value.trim(),l=$('location-gewerbe').value.trim();
    const box=$('gewerbe-box');
    if(!c||!l){
      $('gewerbe-status').className='val-status visible error';
      $('gewerbe-status').textContent='‚ùå Firma und Ort eingeben';
      box.classList.add('shake');setTimeout(()=>box.classList.remove('shake'),500);
      return;
    }
    const btn=$('validate-gewerbe-btn');btn.classList.add('loading');btn.disabled=true;
    try{
      const r=await authFetch(WEBHOOK_VALIDATE,{type:'gewerbe',company:c,location:l});
      const d=await r.json();const x=Array.isArray(d)?d[0]:d;
      if(x.valid){
        state.locationValid=true;state.distance=x.distance;
        $('gewerbe-status').className='val-status visible success';
        $('gewerbe-status').textContent='‚úÖ '+(x.companyInfo||c)+' ‚Äì '+x.distance+'km';
        box.classList.add('success-pulse');setTimeout(()=>box.classList.remove('success-pulse'),600);
      }else{
        state.locationValid=false;
        $('gewerbe-status').className='val-status visible error';
        $('gewerbe-status').textContent=x.message||'‚ùå Nicht gefunden';
        box.classList.add('shake');setTimeout(()=>box.classList.remove('shake'),500);
      }
    }catch(e){
      $('gewerbe-status').className='val-status visible error';
      $('gewerbe-status').textContent='‚ùå Fehler';
      box.classList.add('shake');setTimeout(()=>box.classList.remove('shake'),500);
    }
    btn.classList.remove('loading');btn.disabled=false;updateUI();
  };
  
  // Name validation
  $('name').oninput=e=>{
    const n=e.target.value,r=validateName(n);
    $('name').classList.toggle('valid',r.v);
    $('name').classList.toggle('invalid',!r.v&&n.trim().length>=3);
    $('name-status').textContent=n.length===0?'':r.v?'‚úÖ':n.trim().length>=3?'‚ùå':'';
    $('name-error').textContent=!r.v&&n.trim().length>=3?r.m:'';
    $('name-error').classList.toggle('visible',!r.v&&n.trim().length>=3);
    state.nameValid=r.v;updateUI();
  };
  
  // Phone validation
  $('phone').oninput=e=>{
    const p=e.target.value,ok=validatePhone(p);
    $('phone').classList.toggle('valid',ok);
    $('phone').classList.toggle('invalid',p.length>=6&&!ok);
    $('phone-status').textContent=p.length===0?'':ok?'‚úÖ':p.length>=6?'‚ùå':'';
    state.phoneValid=ok;updateUI();
  };
  
  // Service selection
  document.querySelectorAll('#services .service-option').forEach(o=>{
    o.onclick=()=>{
      document.querySelectorAll('#services .service-option').forEach(x=>x.classList.remove('selected'));
      o.classList.add('selected');
      state.service=parseInt(o.dataset.service);
      updateUI();
    };
  });
  
  // Details inputs
  $('size').oninput=()=>updateUI();
  $('timeframe').oninput=()=>updateUI();
  
  // DSGVO
  $('dsgvo').onchange=e=>{state.dsgvo=e.target.checked;updateUI()};
  $('dsgvo-toggle').onclick=e=>{e.preventDefault();e.stopPropagation();$('dsgvo-details').classList.toggle('visible')};
  
  // File upload
  $('images').onchange=e=>{
    Array.from(e.target.files).forEach(f=>{
      if(f.size>10*1024*1024)return alert('Max 10MB');
      files.push(f);
    });
    renderFiles();
    e.target.value='';
  };
  
  function renderFiles(){
    $('file-list').innerHTML=files.map((f,i)=>`<div class="file-item">üì∑ ${f.name.slice(0,15)}...<span class="file-item-remove" data-i="${i}">‚úï</span></div>`).join('');
    $('file-list').querySelectorAll('.file-item-remove').forEach(b=>b.onclick=e=>{files.splice(+e.target.dataset.i,1);renderFiles()});
  }
  
  // Submit
  $('maler-form').onsubmit=async e=>{
    e.preventDefault();
    $('loading').classList.add('visible');
    $('submit').classList.add('loading');
    
    const isG=state.type==='gewerbe';
    const sNum=parseFloat($('size').value.replace(/[^\d.,]/g,'').replace(',','.'))||30;
    
    const fd={
      customerType:state.type,
      company:isG?$('company').value:'',
      name:$('name').value,
      email:$('email').value.trim(),
      phone:$('phone').value,
      location:isG?$('location-gewerbe').value:$('location-privat').value,
      distance:state.distance,
      serviceId:state.service,
      serviceName:SERVICE_NAMES[state.service]||'',
      size:$('size').value,
      sizeNumber:sNum,
      timeframe:$('timeframe').value,
      description:$('description').value.trim(),
      imagesCount:files.length,
      dsgvoAccepted:true,
      timestamp:new Date().toISOString()
    };
    
    try{
      const fm=new FormData();
      fm.append('formData',JSON.stringify(fd));
      files.forEach((f,i)=>fm.append('image_'+i,f));
      const r=await authFetchForm(WEBHOOK_CALCULATE,fm);
      const d=await r.json();
      $('result-price').textContent=d.price?'ca. '+d.price.toLocaleString('de-DE')+' ‚Ç¨':'-';
      $('result-duration').textContent=d.duration||'-';
      $('result-workers').textContent=d.workers||'-';
    }catch(x){
      $('result-price').textContent='-';
      $('result-duration').textContent='-';
      $('result-workers').textContent='-';
    }
    
    $('result-type').textContent=fd.customerType==='gewerbe'?'Gewerblich üè¢':'Privat üè†';
    $('result-company-row').style.display=fd.company?'flex':'none';
    $('result-company').textContent=fd.company;
    $('result-name').textContent=fd.name;
    $('result-email-row').style.display=fd.email?'flex':'none';
    $('result-email').textContent=fd.email;
    $('result-phone').textContent=fd.phone;
    $('result-location').textContent=fd.location+(fd.distance?' ('+fd.distance+'km)':'');
    $('result-service').textContent=fd.serviceName;
    $('result-size').textContent=fd.size;
    $('result-timeframe').textContent=fd.timeframe;
    $('result-desc-row').style.display=fd.description?'flex':'none';
    $('result-description').textContent=fd.description;
    
    setTimeout(()=>{
      $('loading').classList.remove('visible');
      $('form-view').style.display='none';
      $('result-view').classList.add('visible');
      createConfetti();
      $('widget-body').scrollTop=0;
    },1500);
  };
  
  // Init
  updateProgress();
})();
</script>

</body>
</html>
