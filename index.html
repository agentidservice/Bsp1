<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Agentic Solutions ‚Äì KI-Automatisierung</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{--page-bg:#0a0b0d;--page-text:#fff;--glass-border:rgba(255,255,255,.12);--shadow-strong:0 25px 60px rgba(0,0,0,.6);--text:#fff;--text-muted:rgba(255,255,255,.55);--gap:20px;--radius-lg:24px;--radius-md:16px;--radius-sm:12px;--widget-width:min(440px,95vw);--widget-height:min(680px,88vh);--accent-orange:#d97706;--accent-orange-light:#f59e0b;--accent-blue:#6366f1;--accent-blue-light:#818cf8;--success:#22c55e;--error:#ef4444}
    *{box-sizing:border-box;margin:0;padding:0}
    body{min-height:100vh;background:var(--page-bg);color:var(--page-text);font-family:'Inter',system-ui,sans-serif}
    .agentic-header{position:fixed;top:0;right:0;left:0;padding:16px 24px;display:flex;justify-content:space-between;align-items:center;z-index:100;background:linear-gradient(180deg,rgba(10,11,13,.98) 0%,rgba(10,11,13,.8) 70%,transparent 100%)}
    .agentic-logo{display:flex;align-items:center;gap:12px}
    .agentic-logo-icon{width:36px;height:36px;background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:18px}
    .agentic-logo-text{font-size:16px;font-weight:600}
    .main-content{max-width:560px;margin:0 auto;padding:100px 24px 120px}
    .page-header{text-align:center;margin-bottom:40px}
    .page-title{font-family:'Playfair Display',serif;font-size:clamp(28px,5vw,38px);font-weight:600;margin-bottom:12px}
    .page-subtitle{color:var(--text-muted);font-size:15px;line-height:1.6}
    .b2b-form-container{background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius-lg);padding:32px}
    .form-section{margin-bottom:24px}
    .form-section-title{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--accent-blue-light);margin-bottom:14px}
    .form-group{margin-bottom:16px}
    .form-label{display:block;font-size:13px;font-weight:500;color:var(--text-muted);margin-bottom:6px}
    .form-label .required{color:var(--error)}
    .form-label .optional{color:rgba(255,255,255,.35);font-weight:400}
    .form-input,.form-select,.form-textarea{width:100%;padding:12px 14px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.1);border-radius:var(--radius-sm);color:var(--text);font-size:15px;font-family:inherit;transition:all .2s ease;-webkit-appearance:none}
    .form-textarea{resize:vertical;min-height:80px;line-height:1.5}
    .form-input:focus,.form-select:focus,.form-textarea:focus{outline:none;border-color:var(--accent-blue);box-shadow:0 0 0 3px rgba(99,102,241,.2)}
    .form-input::placeholder,.form-textarea::placeholder{color:rgba(255,255,255,.3)}
    .form-input.valid{border-color:var(--success)}
    .form-input.invalid{border-color:var(--error)}
    .validation-box{background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius-md);padding:16px;margin-bottom:20px}
    .validation-row{display:flex;gap:10px}
    .validation-row .form-input{flex:1}
    .validate-btn{padding:12px 16px;background:rgba(99,102,241,.15);border:1px solid rgba(99,102,241,.3);border-radius:var(--radius-sm);color:var(--accent-blue-light);font-size:13px;font-weight:500;cursor:pointer;white-space:nowrap;display:flex;align-items:center;gap:6px;transition:all .2s ease}
    .validate-btn:hover{background:rgba(99,102,241,.25)}
    .validate-btn:disabled{opacity:.5;cursor:not-allowed}
    .validate-btn .spinner{width:14px;height:14px;border:2px solid transparent;border-top-color:var(--accent-blue-light);border-radius:50%;animation:spin .8s linear infinite;display:none}
    .validate-btn.loading .spinner{display:block}
    .validate-btn.loading .btn-icon{display:none}
    .validation-status{padding:10px 12px;border-radius:8px;font-size:13px;margin-top:12px;display:none;align-items:center;gap:8px}
    .validation-status.visible{display:flex}
    .validation-status.success{background:rgba(34,197,94,.15);border:1px solid rgba(34,197,94,.3);color:var(--success)}
    .validation-status.error{background:rgba(239,68,68,.15);border:1px solid rgba(239,68,68,.3);color:var(--error)}
    .input-wrapper{position:relative}
    .input-status{position:absolute;right:12px;top:50%;transform:translateY(-50%);font-size:16px}
    .field-error{font-size:12px;color:var(--error);margin-top:6px;display:none}
    .field-error.visible{display:block}
    .form-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .package-grid{display:flex;flex-direction:column;gap:8px}
    .package-option{display:flex;align-items:flex-start;gap:12px;padding:14px 16px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius-sm);cursor:pointer;transition:all .2s ease}
    .package-option:hover{background:rgba(255,255,255,.04);border-color:rgba(255,255,255,.12)}
    .package-option.selected{background:rgba(99,102,241,.12);border-color:var(--accent-blue)}
    .package-checkbox{width:20px;height:20px;border-radius:6px;border:2px solid rgba(255,255,255,.25);display:flex;align-items:center;justify-content:center;font-size:12px;color:transparent;transition:all .2s ease;flex-shrink:0;margin-top:1px}
    .package-option.selected .package-checkbox{background:var(--accent-blue);border-color:var(--accent-blue);color:#fff}
    .package-content{flex:1;min-width:0}
    .package-header{display:flex;justify-content:space-between;align-items:flex-start;gap:12px}
    .package-name{font-size:14px;font-weight:600;color:var(--text)}
    .package-price{font-size:12px;color:var(--accent-blue-light);text-align:right}
    .package-desc{font-size:12px;color:var(--text-muted);line-height:1.4;margin-top:3px}
    .package-tag{display:inline-block;padding:3px 8px;margin-top:6px;background:rgba(99,102,241,.2);border-radius:4px;font-size:10px;color:var(--accent-blue-light)}
    .validation-checklist{background:rgba(0,0,0,.2);border-radius:var(--radius-sm);padding:14px 16px;margin-bottom:16px}
    .validation-checklist-title{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--text-muted);margin-bottom:10px}
    .checklist-items{display:grid;grid-template-columns:1fr 1fr;gap:6px 16px}
    .checklist-item{display:flex;align-items:center;gap:8px;font-size:12px;color:var(--text-muted)}
    .checklist-item.checked{color:var(--success)}
    .checklist-icon{width:16px;height:16px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:10px;flex-shrink:0}
    .checklist-item.checked .checklist-icon{background:var(--success);color:#fff}
    .checklist-item.unchecked .checklist-icon{background:rgba(255,255,255,.1)}
    .dsgvo-box{background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius-md);padding:14px 16px;margin-bottom:20px}
    .dsgvo-row{display:flex;align-items:flex-start;gap:10px;font-size:13px;color:var(--text-muted);line-height:1.45;cursor:pointer}
    .dsgvo-row input{margin-top:2px;width:18px;height:18px;accent-color:var(--accent-blue-light)}
    .dsgvo-toggle{background:none;border:none;cursor:pointer;padding:0;font-size:13px;text-decoration:underline;color:var(--accent-blue-light)}
    .dsgvo-details{display:none;margin-top:10px;padding-top:10px;border-top:1px solid rgba(255,255,255,.08);font-size:12px;color:rgba(255,255,255,.45)}
    .dsgvo-details.visible{display:block}
    .submit-btn{width:100%;padding:16px;background:linear-gradient(135deg,var(--accent-blue) 0%,var(--accent-blue-light) 100%);border:none;border-radius:var(--radius-sm);color:#fff;font-size:15px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;transition:all .2s ease}
    .submit-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px rgba(99,102,241,.35)}
    .submit-btn:disabled{opacity:.4;cursor:not-allowed}
    .submit-btn .spinner{width:18px;height:18px;border:2px solid transparent;border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite;display:none}
    .submit-btn.loading .spinner{display:block}
    .submit-btn.loading .btn-text{display:none}
    .result-view{display:none}
    .result-view.visible{display:block;animation:fadeIn .4s ease}
    .result-success{text-align:center;padding:20px 0}
    .result-success-icon{font-size:48px;margin-bottom:12px}
    .result-success h3{font-size:22px;font-weight:600;margin:0 0 6px}
    .result-success p{font-size:14px;color:var(--text-muted);margin:0}
    .result-highlight-box{background:linear-gradient(135deg,rgba(99,102,241,.15) 0%,rgba(129,140,248,.08) 100%);border:1px solid rgba(99,102,241,.25);border-radius:var(--radius-md);padding:20px;margin:20px 0;text-align:center}
    .result-highlight-label{font-size:12px;color:var(--text-muted);text-transform:uppercase;margin-bottom:6px}
    .result-highlight-value{font-size:26px;font-weight:600;color:var(--accent-blue-light)}
    .result-summary{background:rgba(0,0,0,.3);border-radius:var(--radius-md);padding:20px}
    .result-summary-title{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--accent-blue-light);margin-bottom:14px}
    .result-row{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid rgba(255,255,255,.06);font-size:13px}
    .result-row:last-child{border-bottom:none}
    .result-row .label{color:var(--text-muted)}
    .result-row .value{color:var(--text);font-weight:500;text-align:right;max-width:55%}
    .result-divider{height:1px;background:rgba(255,255,255,.1);margin:6px 0}
    .result-disclaimer{font-size:12px;color:rgba(255,255,255,.4);text-align:center;margin-top:20px;line-height:1.5}
    .loading-overlay{position:fixed;inset:0;background:rgba(10,11,13,.9);display:none;flex-direction:column;align-items:center;justify-content:center;z-index:1000}
    .loading-overlay.visible{display:flex}
    .loading-spinner{width:48px;height:48px;border:3px solid rgba(255,255,255,.1);border-top-color:var(--accent-blue);border-radius:50%;animation:spin 1s linear infinite;margin-bottom:16px}
    .loading-text{font-size:14px;color:var(--text-muted)}
    .toast{position:fixed;bottom:100px;left:50%;transform:translateX(-50%) translateY(20px);padding:14px 24px;background:var(--success);color:#fff;border-radius:10px;font-size:14px;font-weight:500;opacity:0;pointer-events:none;transition:all .3s ease;z-index:10000}
    .toast.visible{opacity:1;transform:translateX(-50%) translateY(0)}
    .toast.error{background:var(--error)}
    @keyframes spin{to{transform:rotate(360deg)}}
    @keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
    .widget-base{position:fixed;z-index:9999}
    .widget-toggle-base{width:64px;height:64px;border-radius:50%;border:1px solid var(--glass-border);box-shadow:var(--shadow-strong);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:28px;transition:transform .2s ease}
    .widget-toggle-base:hover{transform:scale(1.08)}
    .widget-window-base{position:absolute;width:var(--widget-width);height:var(--widget-height);max-height:calc(100vh - 100px);border-radius:var(--radius-lg);overflow:hidden;box-shadow:var(--shadow-strong);border:1px solid var(--glass-border);backdrop-filter:blur(20px);display:none;flex-direction:column}
    .widget-window-base.is-open{display:flex}
    .widget-header-base{padding:20px 24px;border-bottom:1px solid rgba(255,255,255,.08);background:rgba(0,0,0,.3)}
    .widget-header-title{font-family:'Playfair Display',serif;font-size:22px;font-weight:600;margin:0 0 4px}
    .widget-header-subtitle{font-size:13px;color:var(--text-muted);margin:0}
    .widget-body-base{flex:1;overflow-y:auto;padding:20px 24px}
    .widget-body-base::-webkit-scrollbar{width:6px}
    .widget-body-base::-webkit-scrollbar-thumb{background:rgba(255,255,255,.15);border-radius:3px}
    #maler-widget{right:var(--gap);bottom:var(--gap)}
    #maler-widget .widget-toggle-base{background:linear-gradient(135deg,#1a1816 0%,#252220 100%)}
    #maler-widget .widget-window-base{bottom:76px;right:0;background:rgba(22,20,16,.95)}
    #maler-widget .welcome-box{background:rgba(217,119,6,.1);border:1px solid rgba(217,119,6,.2);border-radius:var(--radius-md);padding:16px;margin-bottom:24px}
    #maler-widget .welcome-box p{font-size:14px;line-height:1.6;margin:0}
    #maler-widget .welcome-box strong{color:var(--accent-orange-light)}
    #maler-widget .form-section-title{color:var(--accent-orange-light)}
    #maler-widget .form-input:focus,#maler-widget .form-select:focus,#maler-widget .form-textarea:focus{border-color:var(--accent-orange);box-shadow:0 0 0 3px rgba(217,119,6,.2)}
    #maler-widget .radio-group{display:flex;gap:12px}
    #maler-widget .radio-option{flex:1}
    #maler-widget .radio-option input{position:absolute;opacity:0}
    #maler-widget .radio-option label{display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.1);border-radius:var(--radius-sm);cursor:pointer;font-size:14px;font-weight:500;transition:all .2s ease}
    #maler-widget .radio-option input:checked+label{background:rgba(217,119,6,.2);border-color:var(--accent-orange);color:var(--accent-orange-light)}
    #maler-widget .validate-btn{background:rgba(217,119,6,.15);border-color:rgba(217,119,6,.3);color:var(--accent-orange-light)}
    #maler-widget .validate-btn:hover{background:rgba(217,119,6,.25)}
    #maler-widget .validate-btn .spinner{border-top-color:var(--accent-orange-light)}
    #maler-widget .file-upload{border:2px dashed rgba(255,255,255,.15);border-radius:var(--radius-sm);padding:20px;text-align:center;cursor:pointer;position:relative;transition:all .2s ease}
    #maler-widget .file-upload:hover{border-color:var(--accent-orange);background:rgba(217,119,6,.05)}
    #maler-widget .file-upload input{position:absolute;inset:0;opacity:0;cursor:pointer}
    #maler-widget .file-upload-icon{font-size:28px;margin-bottom:8px}
    #maler-widget .file-upload-text{font-size:13px;color:var(--text-muted)}
    #maler-widget .file-upload-hint{font-size:11px;color:rgba(255,255,255,.35);margin-top:4px}
    #maler-widget .file-list{margin-top:12px;display:flex;flex-wrap:wrap;gap:8px}
    #maler-widget .file-item{display:flex;align-items:center;gap:6px;padding:6px 10px;background:rgba(217,119,6,.15);border-radius:6px;font-size:12px}
    #maler-widget .file-item-remove{cursor:pointer;color:var(--error);font-weight:bold;margin-left:4px}
    #maler-widget .dsgvo-row input{accent-color:var(--accent-orange-light)}
    #maler-widget .dsgvo-toggle{color:var(--accent-orange-light)}
    #maler-widget .submit-btn-base{width:100%;padding:16px;background:linear-gradient(135deg,var(--accent-orange) 0%,var(--accent-orange-light) 100%);border:none;border-radius:var(--radius-sm);color:#fff;font-size:15px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;transition:all .2s ease;margin-top:24px}
    #maler-widget .submit-btn-base:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px rgba(217,119,6,.35)}
    #maler-widget .submit-btn-base:disabled{opacity:.4;cursor:not-allowed}
    #maler-widget .submit-btn-base .spinner{width:18px;height:18px;border:2px solid transparent;border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite;display:none}
    #maler-widget .submit-btn-base.loading .spinner{display:block}
    #maler-widget .submit-btn-base.loading .btn-text{display:none}
    #maler-widget .maler-loading-overlay{position:absolute;inset:0;background:rgba(22,20,16,.95);display:none;flex-direction:column;align-items:center;justify-content:center;z-index:100}
    #maler-widget .maler-loading-overlay.visible{display:flex}
    #maler-widget .loading-spinner{border-top-color:var(--accent-orange)}
    #maler-widget .result-view{display:none}
    #maler-widget .result-view.visible{display:block;animation:fadeIn .4s ease}
    #maler-widget .result-highlight-box{background:linear-gradient(135deg,rgba(217,119,6,.2) 0%,rgba(245,158,11,.1) 100%);border:1px solid rgba(217,119,6,.3);border-radius:var(--radius-md);padding:16px;margin:12px 0 16px;display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;text-align:center}
    #maler-widget .result-highlight-item{display:flex;flex-direction:column;gap:4px}
    #maler-widget .result-highlight-label{font-size:11px;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px}
    #maler-widget .result-highlight-value{font-size:18px;font-weight:600;color:var(--accent-orange-light)}
    #maler-widget .result-highlight-item.main .result-highlight-value{font-size:22px}
    #maler-widget .result-summary-title{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--accent-orange-light);margin-bottom:12px}
    #maler-widget .conditional-field{display:none;animation:fadeIn .3s ease}
    #maler-widget .conditional-field.visible{display:block}
    .demo-hint{position:fixed;bottom:var(--gap);left:var(--gap);background:rgba(217,119,6,.1);border:1px solid rgba(217,119,6,.2);border-radius:12px;padding:12px 16px;font-size:12px;color:var(--accent-orange-light);display:flex;align-items:center;gap:8px;z-index:50}
    @media(max-width:768px){.widget-window-base{width:calc(100vw - 24px);height:calc(100vh - 100px);right:-8px}#maler-widget .validation-row{flex-direction:column}#maler-widget .validate-btn{width:100%;justify-content:center}#maler-widget .result-highlight-box{grid-template-columns:1fr;gap:10px}#maler-widget .result-highlight-item{flex-direction:row;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid rgba(255,255,255,.08)}#maler-widget .result-highlight-item:last-child{border-bottom:none}.checklist-items{grid-template-columns:1fr}.b2b-form-container{padding:24px 20px}.form-row{grid-template-columns:1fr}.validation-row{flex-direction:column}.validate-btn{width:100%;justify-content:center}}
  </style>
</head>
<body>
  <header class="agentic-header">
    <div class="agentic-logo">
      <div class="agentic-logo-icon">‚ö°</div>
      <span class="agentic-logo-text">Agentic Solutions</span>
    </div>
  </header>

  <main class="main-content">
    <div class="page-header">
      <h1 class="page-title">Anfrage stellen</h1>
      <p class="page-subtitle">W√§hlen Sie Ihre gew√ºnschten Leistungen und erhalten Sie eine unverbindliche Preissch√§tzung.</p>
    </div>

    <div class="b2b-form-container">
      <div id="b2b-form-view">
        <form id="b2b-form">
          <div class="form-section">
            <div class="form-section-title">Unternehmen</div>
            <div class="validation-box">
              <div class="form-group" style="margin-bottom:12px">
                <label class="form-label">Firmenname <span class="required">*</span></label>
                <input type="text" class="form-input" id="b2b-company" placeholder="Ihr Unternehmen">
              </div>
              <div class="validation-row">
                <input type="text" class="form-input" id="b2b-location" placeholder="Standort (Stadt)">
                <button type="button" class="validate-btn" id="b2b-validate-btn">
                  <span class="spinner"></span>
                  <span class="btn-icon">üîç</span>
                  Pr√ºfen
                </button>
              </div>
              <div class="validation-status" id="b2b-company-status"></div>
            </div>
          </div>

          <div class="form-section">
            <div class="form-section-title">Ansprechpartner</div>
            <div class="form-group">
              <label class="form-label">Name <span class="required">*</span></label>
              <div class="input-wrapper">
                <input type="text" class="form-input" id="b2b-contact" placeholder="Vor- und Nachname">
                <span class="input-status" id="b2b-contact-status"></span>
              </div>
              <div class="field-error" id="b2b-contact-error"></div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">E-Mail <span class="required">*</span></label>
                <div class="input-wrapper">
                  <input type="email" class="form-input" id="b2b-email" placeholder="ihre@firma.de">
                  <span class="input-status" id="b2b-email-status"></span>
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">Telefon <span class="required">*</span></label>
                <div class="input-wrapper">
                  <input type="tel" class="form-input" id="b2b-phone" placeholder="0151 12345678">
                  <span class="input-status" id="b2b-phone-status"></span>
                </div>
              </div>
            </div>
          </div>

          <div class="form-section">
            <div class="form-section-title">Gew√ºnschte Leistungen</div>
            <div class="package-grid" id="b2b-packages">
              <div class="package-option" data-package="starter" data-setup="299" data-monthly="79">
                <div class="package-checkbox">‚úì</div>
                <div class="package-content">
                  <div class="package-header">
                    <span class="package-name">Starter</span>
                    <span class="package-price">79 ‚Ç¨/M + 299 ‚Ç¨ Setup</span>
                  </div>
                  <div class="package-desc">KI-Kontaktformular mit Validierung & Preissch√§tzung</div>
                </div>
              </div>
              <div class="package-option" data-package="advanced" data-setup="499" data-monthly="139">
                <div class="package-checkbox">‚úì</div>
                <div class="package-content">
                  <div class="package-header">
                    <span class="package-name">Advanced</span>
                    <span class="package-price">ab 139 ‚Ç¨/M + ab 499 ‚Ç¨ Setup</span>
                  </div>
                  <div class="package-desc">Erweiterte Validierung, WhatsApp-Integration</div>
                </div>
              </div>
              <div class="package-option" data-package="chatbot-basic" data-setup="299" data-monthly="79">
                <div class="package-checkbox">‚úì</div>
                <div class="package-content">
                  <div class="package-header">
                    <span class="package-name">ChatBot Basic</span>
                    <span class="package-price">79‚Äì300 ‚Ç¨/M + 299 ‚Ç¨ Setup</span>
                  </div>
                  <div class="package-desc">Automatische Terminbuchung, 1 Kanal</div>
                </div>
              </div>
              <div class="package-option" data-package="chatbot-premium" data-setup="0" data-monthly="0">
                <div class="package-checkbox">‚úì</div>
                <div class="package-content">
                  <div class="package-header">
                    <span class="package-name">ChatBot Premium</span>
                    <span class="package-price">Individuell</span>
                  </div>
                  <div class="package-desc">Komplexe Logik, mehrere Kan√§le</div>
                  <span class="package-tag">üëâ Beschreibung erforderlich</span>
                </div>
              </div>
              <div class="package-option" data-package="voice-info" data-setup="549" data-monthly="249">
                <div class="package-checkbox">‚úì</div>
                <div class="package-content">
                  <div class="package-header">
                    <span class="package-name">Info Voice Agent</span>
                    <span class="package-price">99‚Äì399 ‚Ç¨/M + 299‚Äì799 ‚Ç¨ Setup</span>
                  </div>
                  <div class="package-desc">24/7 Telefonassistent f√ºr Infos</div>
                </div>
              </div>
              <div class="package-option" data-package="voice-pure" data-setup="1349" data-monthly="649">
                <div class="package-checkbox">‚úì</div>
                <div class="package-content">
                  <div class="package-header">
                    <span class="package-name">Voice Agent Pure</span>
                    <span class="package-price">299‚Äì999 ‚Ç¨/M + 699‚Äì1.999 ‚Ç¨ Setup</span>
                  </div>
                  <div class="package-desc">Vollautomatische Kundenabwicklung & Terminbuchung</div>
                </div>
              </div>
              <div class="package-option" data-package="individual" data-setup="0" data-monthly="0">
                <div class="package-checkbox">‚úì</div>
                <div class="package-content">
                  <div class="package-header">
                    <span class="package-name">Individuelle Kombination</span>
                    <span class="package-price">Auf Anfrage</span>
                  </div>
                  <div class="package-desc">Ma√ügeschneiderte L√∂sung aus allen Modulen</div>
                  <span class="package-tag">üëâ Beschreibung erforderlich</span>
                </div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Beschreibung <span id="b2b-desc-required" class="optional">(optional)</span></label>
            <textarea class="form-textarea" id="b2b-description" placeholder="Beschreiben Sie Ihren Anwendungsfall..."></textarea>
          </div>

          <div class="validation-checklist">
            <div class="validation-checklist-title">Checkliste</div>
            <div class="checklist-items">
              <div class="checklist-item unchecked" id="b2b-check-company"><span class="checklist-icon">‚óã</span><span>Unternehmen gepr√ºft</span></div>
              <div class="checklist-item unchecked" id="b2b-check-contact"><span class="checklist-icon">‚óã</span><span>Name g√ºltig</span></div>
              <div class="checklist-item unchecked" id="b2b-check-email"><span class="checklist-icon">‚óã</span><span>E-Mail g√ºltig</span></div>
              <div class="checklist-item unchecked" id="b2b-check-phone"><span class="checklist-icon">‚óã</span><span>Telefon g√ºltig</span></div>
              <div class="checklist-item unchecked" id="b2b-check-package"><span class="checklist-icon">‚óã</span><span>Paket gew√§hlt</span></div>
            </div>
          </div>

          <div class="dsgvo-box">
            <label class="dsgvo-row" for="b2b-dsgvo">
              <input type="checkbox" id="b2b-dsgvo">
              <span>Ich stimme der Verarbeitung meiner Daten gem√§√ü <button type="button" class="dsgvo-toggle" id="b2b-dsgvo-toggle">Datenschutz</button> zu.</span>
            </label>
            <div class="dsgvo-details" id="b2b-dsgvo-details">
              <strong style="color:var(--accent-blue-light)">Kurzinfo:</strong> Ihre Angaben werden ausschlie√ülich zur Bearbeitung Ihrer Anfrage verwendet. Rechtsgrundlage: Art. 6 Abs. 1 lit. b DSGVO.
            </div>
          </div>

          <button type="submit" class="submit-btn" id="b2b-submit" disabled>
            <span class="spinner"></span>
            <span class="btn-text">üöÄ Anfrage absenden</span>
          </button>
        </form>
      </div>

      <div class="result-view" id="b2b-result-view">
        <div class="result-success">
          <div class="result-success-icon">‚úÖ</div>
          <h3>Anfrage erhalten!</h3>
          <p>Wir melden uns morgen bei Ihnen</p>
        </div>
        <div class="result-highlight-box">
          <div class="result-highlight-label">üí∞ Gesch√§tzte Kosten</div>
          <div class="result-highlight-value" id="b2b-result-price">-</div>
        </div>
        <div class="result-summary">
          <div class="result-summary-title">üìã Ihre Anfrage</div>
          <div class="result-row"><span class="label">Unternehmen</span><span class="value" id="b2b-result-company">-</span></div>
          <div class="result-row"><span class="label">Standort</span><span class="value" id="b2b-result-location">-</span></div>
          <div class="result-row"><span class="label">Ansprechpartner</span><span class="value" id="b2b-result-contact">-</span></div>
          <div class="result-row"><span class="label">E-Mail</span><span class="value" id="b2b-result-email">-</span></div>
          <div class="result-row"><span class="label">Telefon</span><span class="value" id="b2b-result-phone">-</span></div>
          <div class="result-divider"></div>
          <div class="result-row"><span class="label">Pakete</span><span class="value" id="b2b-result-packages">-</span></div>
          <div class="result-row" id="b2b-result-desc-row" style="display:none"><span class="label">Beschreibung</span><span class="value" id="b2b-result-description">-</span></div>
        </div>
        <p class="result-disclaimer">Unverbindliche Sch√§tzung. Das finale Angebot erhalten Sie nach pers√∂nlicher Beratung.</p>
      </div>
    </div>
  </main>

  <div class="demo-hint"><span>üé®</span><span>Malerbetrieb-Demo ‚Üí</span></div>

  <div class="loading-overlay" id="b2b-loading">
    <div class="loading-spinner"></div>
    <div class="loading-text">Anfrage wird verarbeitet...</div>
  </div>

  <div class="widget-base" id="maler-widget">
    <div class="widget-toggle-base" id="maler-toggle">üé®</div>
    <div class="widget-window-base" id="maler-window">
      <div class="maler-loading-overlay" id="maler-loading">
        <div class="loading-spinner"></div>
        <div class="loading-text">Anfrage wird verarbeitet...</div>
      </div>
      <div class="widget-header-base">
        <h2 class="widget-header-title">üé® Malerbetrieb</h2>
        <p class="widget-header-subtitle">ProjektBauGG GmbH ‚Ä¢ Paderborn</p>
      </div>
      <div class="widget-body-base" id="maler-body">
        <div id="maler-form-view">
          <div class="welcome-box"><p><strong>Willkommen!</strong> F√ºllen Sie das Formular aus, um eine <strong>Projektanfrage inkl. Preissch√§tzung</strong> zu erhalten.</p></div>
          <form id="maler-form">
            <div class="form-section">
              <div class="form-section-title">Kundentyp</div>
              <div class="radio-group">
                <div class="radio-option"><input type="radio" id="maler-type-privat" name="malerCustomerType" value="privat" checked><label for="maler-type-privat">üè† Privat</label></div>
                <div class="radio-option"><input type="radio" id="maler-type-gewerbe" name="malerCustomerType" value="gewerbe"><label for="maler-type-gewerbe">üè¢ Gewerblich</label></div>
              </div>
            </div>
            <div class="validation-box conditional-field" id="maler-gewerbe-box">
              <div class="form-group" style="margin-bottom:12px"><label class="form-label">Firmenname <span class="required">*</span></label><input type="text" class="form-input" id="maler-company" placeholder="Name Ihrer Firma"></div>
              <div class="validation-row"><input type="text" class="form-input" id="maler-location-gewerbe" placeholder="Ort des Objekts"><button type="button" class="validate-btn" id="maler-validate-gewerbe-btn"><span class="spinner"></span><span class="btn-icon">üîç</span>Pr√ºfen</button></div>
              <div class="validation-status" id="maler-gewerbe-status"></div>
            </div>
            <div class="validation-box" id="maler-privat-box">
              <div class="validation-row"><input type="text" class="form-input" id="maler-location-privat" placeholder="Ort des Objekts (Stadt oder PLZ)"><button type="button" class="validate-btn" id="maler-validate-privat-btn"><span class="spinner"></span><span class="btn-icon">üîç</span>Pr√ºfen</button></div>
              <div class="validation-status" id="maler-privat-status"></div>
            </div>
            <div class="form-group"><label class="form-label">Ihr Name <span class="required">*</span></label><div class="input-wrapper"><input type="text" class="form-input" id="maler-name" placeholder="Vor- und Nachname"><span class="input-status" id="maler-name-status"></span></div><div class="field-error" id="maler-name-error"></div></div>
            <div class="form-group"><label class="form-label">E-Mail <span class="optional">(optional)</span></label><input type="email" class="form-input" id="maler-email" placeholder="ihre@email.de"></div>
            <div class="form-group"><label class="form-label">Telefonnummer <span class="required">*</span></label><div class="input-wrapper"><input type="tel" class="form-input" id="maler-phone" placeholder="z.B. 0151 12345678"><span class="input-status" id="maler-phone-status"></span></div></div>
            <div class="form-section">
              <div class="form-section-title">Projektdetails</div>
              <div class="form-group"><label class="form-label">Gew√ºnschte Leistung <span class="required">*</span></label><select class="form-select" id="maler-service"><option value="">Bitte w√§hlen...</option><option value="1">Innenw√§nde streichen</option><option value="2">Fassade streichen</option><option value="3">Tapezieren</option><option value="4">T√ºren / Fenster lackieren</option><option value="5">Verputzen / Grundieren</option><option value="6">Dekorative Techniken</option></select></div>
            </div>
            <div class="form-group"><label class="form-label">Ungef√§hre Gr√∂√üe <span class="required">*</span></label><input type="text" class="form-input" id="maler-size" placeholder="z.B. 50 m¬≤ oder 3 T√ºren"></div>
            <div class="form-group"><label class="form-label">Gew√ºnschter Zeitraum <span class="required">*</span></label><input type="text" class="form-input" id="maler-timeframe" placeholder="z.B. Anfang M√§rz, KW 12"></div>
            <div class="form-group"><label class="form-label">Beschreibung <span class="optional">(optional)</span></label><textarea class="form-textarea" id="maler-description" placeholder="Zus√§tzliche Informationen..."></textarea></div>
            <div class="form-group"><label class="form-label">Bilder <span class="optional">(optional)</span></label><div class="file-upload"><input type="file" id="maler-images" multiple accept="image/*"><div class="file-upload-icon">üì∑</div><div class="file-upload-text">Bilder hier ablegen oder klicken</div><div class="file-upload-hint">JPG, PNG bis 10MB</div></div><div class="file-list" id="maler-file-list"></div></div>
            <div class="validation-checklist">
              <div class="validation-checklist-title">Checkliste</div>
              <div class="checklist-item unchecked" id="maler-check-location"><span class="checklist-icon">‚óã</span><span>Standort gepr√ºft</span></div>
              <div class="checklist-item unchecked" id="maler-check-name"><span class="checklist-icon">‚óã</span><span>Name g√ºltig</span></div>
              <div class="checklist-item unchecked" id="maler-check-phone"><span class="checklist-icon">‚óã</span><span>Telefon g√ºltig</span></div>
            </div>
            <div class="dsgvo-box"><label class="dsgvo-row" for="maler-dsgvo"><input type="checkbox" id="maler-dsgvo"><span>Ich stimme der Verarbeitung meiner Daten gem√§√ü <button type="button" class="dsgvo-toggle" id="maler-dsgvo-toggle">Datenschutz</button> zu.</span></label><div class="dsgvo-details" id="maler-dsgvo-details"><strong style="color:var(--accent-orange-light)">Kurzinfo:</strong> Ihre Angaben werden ausschlie√ülich zur Bearbeitung Ihrer Anfrage verwendet.</div></div>
            <button type="submit" class="submit-btn-base" id="maler-submit" disabled><span class="spinner"></span><span class="btn-text">üöÄ Anfrage absenden</span></button>
          </form>
        </div>
        <div class="result-view" id="maler-result-view">
          <div class="result-success"><div class="result-success-icon">‚úÖ</div><h3>Anfrage erhalten!</h3><p>Ihre Projekt√ºbersicht</p></div>
          <div class="result-highlight-box">
            <div class="result-highlight-item main"><span class="result-highlight-label">üí∞ Preis</span><span class="result-highlight-value" id="maler-result-price">-</span></div>
            <div class="result-highlight-item"><span class="result-highlight-label">üìÖ Dauer</span><span class="result-highlight-value" id="maler-result-duration">-</span></div>
            <div class="result-highlight-item"><span class="result-highlight-label">üë∑ MA</span><span class="result-highlight-value" id="maler-result-workers">-</span></div>
          </div>
          <div class="result-summary">
            <div class="result-summary-title">üìã Details</div>
            <div class="result-row"><span class="label">Kundentyp</span><span class="value" id="maler-result-type">-</span></div>
            <div class="result-row" id="maler-result-company-row" style="display:none"><span class="label">Firma</span><span class="value" id="maler-result-company">-</span></div>
            <div class="result-row"><span class="label">Name</span><span class="value" id="maler-result-name">-</span></div>
            <div class="result-row" id="maler-result-email-row" style="display:none"><span class="label">E-Mail</span><span class="value" id="maler-result-email">-</span></div>
            <div class="result-row"><span class="label">Telefon</span><span class="value" id="maler-result-phone">-</span></div>
            <div class="result-row"><span class="label">Standort</span><span class="value" id="maler-result-location">-</span></div>
            <div class="result-divider"></div>
            <div class="result-row"><span class="label">Leistung</span><span class="value" id="maler-result-service">-</span></div>
            <div class="result-row"><span class="label">Umfang</span><span class="value" id="maler-result-size">-</span></div>
            <div class="result-row"><span class="label">Zeitraum</span><span class="value" id="maler-result-timeframe">-</span></div>
            <div class="result-row" id="maler-result-desc-row" style="display:none"><span class="label">Beschreibung</span><span class="value" id="maler-result-description">-</span></div>
          </div>
          <p class="result-disclaimer">Unverbindliche Sch√§tzung. Abweichung ¬±15‚Äì20% m√∂glich.</p>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
  (function(){const $=id=>document.getElementById(id);const BLOCKED_WORDS=['arsch','arschloch','wichser','hurensohn','fotze','fick','ficken','schei√üe','scheisse','kacke','pisser','schwanz','hure','nutte','bastard','idiot','depp','trottel','vollidiot','missgeburt','spast','nazi','hitler','fuck','shit','asshole','bitch','cunt','dick','pussy','whore','slut','nigger','faggot','retard'];const FAKE_NAMES=['brad pitt','angelina jolie','tom cruise','johnny depp','leonardo dicaprio','angela merkel','olaf scholz','donald trump','joe biden','elon musk','harry potter','darth vader','batman','superman','spider man','max mustermann','erika mustermann','john doe','jane doe','test test'];function validateName(name){const t=name.trim(),l=t.toLowerCase();if(t.length<3)return{valid:false,message:'Name zu kurz'};if(t.length>100)return{valid:false,message:'Name zu lang'};const w=t.split(/\s+/).filter(x=>x.length>0);if(w.length<2)return{valid:false,message:'Bitte Vor- und Nachname'};if(/\d/.test(t))return{valid:false,message:'Keine Zahlen erlaubt'};if(/[^a-zA-Z√§√∂√º√Ñ√ñ√ú√ü√©√®√™√´√†√¢√°√≠√¨√Æ√Ø√≥√≤√¥√µ√∫√π√ª√±√ßƒáƒç≈æ≈°ƒë\s\-'.]/i.test(t))return{valid:false,message:'Ung√ºltige Zeichen'};for(const b of BLOCKED_WORDS)if(l.includes(b))return{valid:false,message:'Bitte echten Namen'};for(const f of FAKE_NAMES)if(l.includes(f))return{valid:false,message:'Bitte echten Namen'};if(/(.)\1{3,}/i.test(t))return{valid:false,message:'Ung√ºltiger Name'};return{valid:true,message:''}}function validatePhone(p){return/^(\+49|0)[1-7]\d{8,11}$/.test(p.replace(/\s/g,''))}function validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function showToast(m,t='success'){$('toast').textContent=m;$('toast').className='toast visible'+(t==='error'?' error':'');setTimeout(()=>$('toast').classList.remove('visible'),3500)}

  const B2B_WEBHOOK_VALIDATE="https://seidel1502.app.n8n.cloud/webhook/ea32573a-1dea-4e1d-803f-fd0a5e7b3ca1";
  const B2B_WEBHOOK_SUBMIT="https://seidel1502.app.n8n.cloud/webhook/b2b-contact-submit";
  const b2bState={companyValid:false,contactValid:false,emailValid:false,phoneValid:false,packagesSelected:[],dsgvoAccepted:false};
  const PACKAGE_NAMES={'starter':'Starter','advanced':'Advanced','chatbot-basic':'ChatBot Basic','chatbot-premium':'ChatBot Premium','voice-info':'Info Voice Agent','voice-pure':'Voice Agent Pure','individual':'Individuelle Kombination'};

  $('b2b-validate-btn').onclick=async()=>{const c=$('b2b-company').value.trim(),l=$('b2b-location').value.trim();if(!c||!l){$('b2b-company-status').className='validation-status visible error';$('b2b-company-status').textContent='‚ùå Bitte Firma und Standort eingeben';return}const btn=$('b2b-validate-btn');btn.classList.add('loading');btn.disabled=true;try{const r=await fetch(B2B_WEBHOOK_VALIDATE,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({company:c,location:l})});const d=await r.json();const x=Array.isArray(d)?d[0]:d;if(x.valid){b2bState.companyValid=true;$('b2b-company-status').className='validation-status visible success';$('b2b-company-status').textContent=`‚úÖ ${x.companyInfo||c} best√§tigt`}else{b2bState.companyValid=false;$('b2b-company-status').className='validation-status visible error';$('b2b-company-status').textContent=x.message||'‚ùå Firma nicht gefunden'}}catch(e){$('b2b-company-status').className='validation-status visible error';$('b2b-company-status').textContent='‚ùå Pr√ºfung fehlgeschlagen'}btn.classList.remove('loading');btn.disabled=false;updateB2BUI()};

  $('b2b-contact').oninput=e=>{const n=e.target.value,r=validateName(n);$('b2b-contact').classList.toggle('valid',r.valid);$('b2b-contact').classList.toggle('invalid',!r.valid&&n.trim().length>=3);$('b2b-contact-status').textContent=n.length===0?'':r.valid?'‚úÖ':n.trim().length>=3?'‚ùå':'';$('b2b-contact-error').textContent=!r.valid&&n.trim().length>=3?r.message:'';$('b2b-contact-error').classList.toggle('visible',!r.valid&&n.trim().length>=3);b2bState.contactValid=r.valid;updateB2BUI()};
  $('b2b-email').oninput=e=>{const v=e.target.value.trim(),ok=validateEmail(v);$('b2b-email').classList.toggle('valid',ok);$('b2b-email').classList.toggle('invalid',v.length>3&&!ok);$('b2b-email-status').textContent=v.length===0?'':ok?'‚úÖ':v.length>3?'‚ùå':'';b2bState.emailValid=ok;updateB2BUI()};
  $('b2b-phone').oninput=e=>{const p=e.target.value,ok=validatePhone(p);$('b2b-phone').classList.toggle('valid',ok);$('b2b-phone').classList.toggle('invalid',p.length>=6&&!ok);$('b2b-phone-status').textContent=p.length===0?'':ok?'‚úÖ':p.length>=6?'‚ùå':'';b2bState.phoneValid=ok;updateB2BUI()};

  document.querySelectorAll('#b2b-packages .package-option').forEach(o=>{o.onclick=()=>{o.classList.toggle('selected');const p=o.dataset.package;if(o.classList.contains('selected')){if(!b2bState.packagesSelected.includes(p))b2bState.packagesSelected.push(p)}else{b2bState.packagesSelected=b2bState.packagesSelected.filter(x=>x!==p)}const nd=b2bState.packagesSelected.includes('chatbot-premium')||b2bState.packagesSelected.includes('individual');$('b2b-desc-required').className=nd?'required':'optional';$('b2b-desc-required').textContent=nd?'*':'(optional)';updateB2BUI()}});

  $('b2b-dsgvo').onchange=e=>{b2bState.dsgvoAccepted=e.target.checked;updateB2BUI()};
  $('b2b-dsgvo-toggle').onclick=e=>{e.preventDefault();e.stopPropagation();$('b2b-dsgvo-details').classList.toggle('visible')};
  $('b2b-description').oninput=()=>updateB2BUI();

  function updateB2BUI(){const checks=[{id:'b2b-check-company',v:b2bState.companyValid},{id:'b2b-check-contact',v:b2bState.contactValid},{id:'b2b-check-email',v:b2bState.emailValid},{id:'b2b-check-phone',v:b2bState.phoneValid},{id:'b2b-check-package',v:b2bState.packagesSelected.length>0}];checks.forEach(c=>{$(c.id).className=c.v?'checklist-item checked':'checklist-item unchecked';$(c.id).querySelector('.checklist-icon').textContent=c.v?'‚úì':'‚óã'});const nd=b2bState.packagesSelected.includes('chatbot-premium')||b2bState.packagesSelected.includes('individual');const dok=!nd||$('b2b-description').value.trim().length>10;$('b2b-submit').disabled=!(b2bState.companyValid&&b2bState.contactValid&&b2bState.emailValid&&b2bState.phoneValid&&b2bState.packagesSelected.length>0&&b2bState.dsgvoAccepted&&dok)}

  $('b2b-form').onsubmit=async e=>{e.preventDefault();$('b2b-loading').classList.add('visible');let st=0,mt=0;b2bState.packagesSelected.forEach(p=>{const o=document.querySelector(`[data-package="${p}"]`);st+=parseInt(o.dataset.setup)||0;mt+=parseInt(o.dataset.monthly)||0});const fd={company:$('b2b-company').value.trim(),location:$('b2b-location').value.trim(),contact:$('b2b-contact').value.trim(),email:$('b2b-email').value.trim(),phone:$('b2b-phone').value.trim(),packages:b2bState.packagesSelected,packageNames:b2bState.packagesSelected.map(p=>PACKAGE_NAMES[p]).join(', '),description:$('b2b-description').value.trim(),setupTotal:st,monthlyTotal:mt,dsgvoAccepted:true,timestamp:new Date().toISOString()};try{await fetch(B2B_WEBHOOK_SUBMIT,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(fd)})}catch(x){}const hi=b2bState.packagesSelected.includes('chatbot-premium')||b2bState.packagesSelected.includes('individual');$('b2b-result-price').textContent=hi?'Individuell':`ab ${mt} ‚Ç¨/M + ${st} ‚Ç¨ Setup`;$('b2b-result-company').textContent=fd.company;$('b2b-result-location').textContent=fd.location;$('b2b-result-contact').textContent=fd.contact;$('b2b-result-email').textContent=fd.email;$('b2b-result-phone').textContent=fd.phone;$('b2b-result-packages').textContent=fd.packageNames;$('b2b-result-desc-row').style.display=fd.description?'flex':'none';$('b2b-result-description').textContent=fd.description;$('b2b-loading').classList.remove('visible');$('b2b-form-view').style.display='none';$('b2b-result-view').classList.add('visible');window.scrollTo({top:0,behavior:'smooth'})};

  const MALER_WEBHOOK_VALIDATE="https://seidel1502.app.n8n.cloud/webhook/3ad0bd7f-1b6e-4501-ba99-0cf05a2b4565";
  const MALER_WEBHOOK_CALCULATE="https://seidel1502.app.n8n.cloud/webhook/d71b1438-46b7-4d67-9517-c0b2d2be92bd";
  const SERVICE_NAMES={1:'Innenw√§nde streichen',2:'Fassade streichen',3:'Tapezieren',4:'T√ºren/Fenster lackieren',5:'Verputzen/Grundieren',6:'Dekorative Techniken'};
  const malerState={locationValid:false,nameValid:false,phoneValid:false,dsgvoAccepted:false,distance:null};let malerFiles=[];

  $('maler-toggle').onclick=()=>$('maler-window').classList.toggle('is-open');
  document.querySelectorAll('input[name="malerCustomerType"]').forEach(r=>{r.onchange=e=>{const g=e.target.value==='gewerbe';$('maler-gewerbe-box').classList.toggle('visible',g);$('maler-privat-box').style.display=g?'none':'block';malerState.locationValid=false;updateMalerUI()}});

  $('maler-validate-gewerbe-btn').onclick=async()=>{const c=$('maler-company').value.trim(),l=$('maler-location-gewerbe').value.trim();if(!c||!l){$('maler-gewerbe-status').className='validation-status visible error';$('maler-gewerbe-status').textContent='‚ùå Bitte Firma und Ort eingeben';return}const btn=$('maler-validate-gewerbe-btn');btn.classList.add('loading');btn.disabled=true;try{const r=await fetch(MALER_WEBHOOK_VALIDATE,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({type:'gewerbe',company:c,location:l})});const d=await r.json();const x=Array.isArray(d)?d[0]:d;if(x.valid){malerState.locationValid=true;malerState.distance=x.distance;$('maler-gewerbe-status').className='validation-status visible success';$('maler-gewerbe-status').textContent=`‚úÖ ${x.companyInfo||c} ‚Äì ${x.distance}km`}else{malerState.locationValid=false;$('maler-gewerbe-status').className='validation-status visible error';$('maler-gewerbe-status').textContent=x.message||'‚ùå Nicht gefunden'}}catch(e){$('maler-gewerbe-status').className='validation-status visible error';$('maler-gewerbe-status').textContent='‚ùå Fehler'}btn.classList.remove('loading');btn.disabled=false;updateMalerUI()};

  $('maler-validate-privat-btn').onclick=async()=>{const l=$('maler-location-privat').value.trim();if(!l){$('maler-privat-status').className='validation-status visible error';$('maler-privat-status').textContent='‚ùå Bitte Ort eingeben';return}const btn=$('maler-validate-privat-btn');btn.classList.add('loading');btn.disabled=true;try{const r=await fetch(MALER_WEBHOOK_VALIDATE,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({type:'privat',location:l})});const d=await r.json();const x=Array.isArray(d)?d[0]:d;if(x.valid){malerState.locationValid=true;malerState.distance=x.distance;$('maler-privat-status').className='validation-status visible success';$('maler-privat-status').textContent=`‚úÖ Im Gebiet ‚Äì ${x.distance}km`}else{malerState.locationValid=false;$('maler-privat-status').className='validation-status visible error';$('maler-privat-status').textContent=x.message||'‚ùå Au√üerhalb'}}catch(e){$('maler-privat-status').className='validation-status visible error';$('maler-privat-status').textContent='‚ùå Fehler'}btn.classList.remove('loading');btn.disabled=false;updateMalerUI()};

  $('maler-name').oninput=e=>{const n=e.target.value,r=validateName(n);$('maler-name').classList.toggle('valid',r.valid);$('maler-name').classList.toggle('invalid',!r.valid&&n.trim().length>=3);$('maler-name-status').textContent=n.length===0?'':r.valid?'‚úÖ':n.trim().length>=3?'‚ùå':'';$('maler-name-error').textContent=!r.valid&&n.trim().length>=3?r.message:'';$('maler-name-error').classList.toggle('visible',!r.valid&&n.trim().length>=3);malerState.nameValid=r.valid;updateMalerUI()};
  $('maler-phone').oninput=e=>{const p=e.target.value,ok=validatePhone(p);$('maler-phone').classList.toggle('valid',ok);$('maler-phone').classList.toggle('invalid',p.length>=6&&!ok);$('maler-phone-status').textContent=p.length===0?'':ok?'‚úÖ':p.length>=6?'‚ùå':'';malerState.phoneValid=ok;updateMalerUI()};
  $('maler-dsgvo').onchange=e=>{malerState.dsgvoAccepted=e.target.checked;updateMalerUI()};
  $('maler-dsgvo-toggle').onclick=e=>{e.preventDefault();e.stopPropagation();$('maler-dsgvo-details').classList.toggle('visible')};
  $('maler-images').onchange=e=>{Array.from(e.target.files).forEach(f=>{if(f.size>10*1024*1024)return showToast('Datei zu gro√ü','error');malerFiles.push(f)});renderMalerFiles();e.target.value=''};

  function renderMalerFiles(){$('maler-file-list').innerHTML=malerFiles.map((f,i)=>`<div class="file-item">üì∑ ${f.name.slice(0,20)}${f.name.length>20?'...':''}<span class="file-item-remove" data-i="${i}">‚úï</span></div>`).join('');$('maler-file-list').querySelectorAll('.file-item-remove').forEach(b=>b.onclick=e=>{malerFiles.splice(+e.target.dataset.i,1);renderMalerFiles()})}

  function updateMalerUI(){const checks=[{id:'maler-check-location',v:malerState.locationValid},{id:'maler-check-name',v:malerState.nameValid},{id:'maler-check-phone',v:malerState.phoneValid}];checks.forEach(c=>{$(c.id).className=c.v?'checklist-item checked':'checklist-item unchecked';$(c.id).querySelector('.checklist-icon').textContent=c.v?'‚úì':'‚óã'});$('maler-submit').disabled=!(malerState.locationValid&&malerState.nameValid&&malerState.phoneValid&&malerState.dsgvoAccepted)}

  $('maler-form').onsubmit=async e=>{e.preventDefault();$('maler-loading').classList.add('visible');const isG=document.querySelector('input[name="malerCustomerType"]:checked').value==='gewerbe';const sId=+$('maler-service').value;const sNum=parseFloat($('maler-size').value.replace(/[^\d.,]/g,'').replace(',','.'))||30;const fd={customerType:isG?'gewerbe':'privat',company:isG?$('maler-company').value:'',name:$('maler-name').value,email:$('maler-email').value.trim(),phone:$('maler-phone').value,location:isG?$('maler-location-gewerbe').value:$('maler-location-privat').value,distance:malerState.distance,serviceId:sId,serviceName:SERVICE_NAMES[sId]||'',size:$('maler-size').value,sizeNumber:sNum,timeframe:$('maler-timeframe').value,description:$('maler-description').value.trim(),imagesCount:malerFiles.length,dsgvoAccepted:true,timestamp:new Date().toISOString()};try{const fm=new FormData();fm.append('formData',JSON.stringify(fd));malerFiles.forEach((f,i)=>fm.append('image_'+i,f));const r=await fetch(MALER_WEBHOOK_CALCULATE,{method:'POST',body:fm});const d=await r.json();$('maler-result-price').textContent=d.price?`ca. ${d.price.toLocaleString('de-DE')} ‚Ç¨`:'-';$('maler-result-duration').textContent=d.duration||'-';$('maler-result-workers').textContent=d.workers||'-';$('maler-result-type').textContent=fd.customerType==='gewerbe'?'Gewerblich üè¢':'Privat üè†';$('maler-result-company-row').style.display=fd.company?'flex':'none';$('maler-result-company').textContent=fd.company;$('maler-result-name').textContent=fd.name;$('maler-result-email-row').style.display=fd.email?'flex':'none';$('maler-result-email').textContent=fd.email;$('maler-result-phone').textContent=fd.phone;$('maler-result-location').textContent=`${fd.location} (${fd.distance}km)`;$('maler-result-service').textContent=fd.serviceName;$('maler-result-size').textContent=fd.size;$('maler-result-timeframe').textContent=fd.timeframe;$('maler-result-desc-row').style.display=fd.description?'flex':'none';$('maler-result-description').textContent=fd.description}catch(x){showToast('Fehler','error')}$('maler-loading').classList.remove('visible');$('maler-form-view').style.display='none';$('maler-result-view').classList.add('visible');$('maler-body').scrollTop=0};
  })();
  </script>
</body>
</html>
