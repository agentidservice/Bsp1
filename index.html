<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Agentic Solutions ‚Äì Agent Demos</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --page-bg: #0a0b0d;
      --page-text: #ffffff;
      --glass-border: rgba(255, 255, 255, 0.12);
      --shadow-strong: 0 25px 60px rgba(0, 0, 0, 0.6);
      --text: #ffffff;
      --text-muted: rgba(255, 255, 255, 0.55);
      --gap: 20px;
      --radius-lg: 24px;
      --radius-md: 16px;
      --radius-sm: 12px;
      --widget-width: min(440px, 95vw);
      --widget-height: min(680px, 88vh);
      --accent-orange: #d97706;
      --accent-orange-light: #f59e0b;
      --accent-blue: #6366f1;
      --accent-blue-light: #818cf8;
      --success: #22c55e;
      --error: #ef4444;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      min-height: 100vh;
      background: var(--page-bg);
      color: var(--page-text);
      font-family: 'Inter', system-ui, sans-serif;
    }
    .agentic-header {
      position: fixed; top: 0; right: 0; left: 0;
      padding: 16px 24px;
      display: flex; justify-content: flex-end; align-items: center;
      z-index: 100;
      background: linear-gradient(180deg, rgba(10, 11, 13, 0.98) 0%, rgba(10, 11, 13, 0.8) 70%, transparent 100%);
      pointer-events: none;
    }
    .agentic-badge {
      pointer-events: auto;
      display: flex; align-items: center; gap: 12px;
      padding: 12px 20px;
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 14px;
    }
    .agentic-badge-icon {
      width: 36px; height: 36px;
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 18px;
    }
    .agentic-badge-text { display: flex; flex-direction: column; gap: 2px; }
    .agentic-badge-title { font-size: 14px; font-weight: 600; }
    .agentic-badge-subtitle { font-size: 11px; color: var(--text-muted); }
    .wrap { max-width: 900px; margin: 0 auto; padding: 100px 24px 180px; }
    .page-title { margin: 0 0 8px; font-size: clamp(28px, 4vw, 42px); font-weight: 600; }
    .page-subtitle { margin: 0 0 40px; color: var(--text-muted); font-size: 15px; line-height: 1.6; }
    .demo-cards { display: flex; flex-direction: column; gap: 20px; }
    .demo-card {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.06);
      border-radius: 20px; padding: 28px 32px;
    }
    .demo-card-header { display: flex; align-items: center; gap: 16px; margin-bottom: 10px; }
    .demo-card-icon {
      width: 52px; height: 52px; border-radius: 14px;
      display: flex; align-items: center; justify-content: center; font-size: 26px;
    }
    .demo-card-icon.orange {
      background: linear-gradient(135deg, rgba(217, 119, 6, 0.2) 0%, rgba(245, 158, 11, 0.1) 100%);
      border: 1px solid rgba(217, 119, 6, 0.3);
    }
    .demo-card-icon.blue {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.2) 0%, rgba(129, 140, 248, 0.1) 100%);
      border: 1px solid rgba(99, 102, 241, 0.3);
    }
    .demo-card-title { font-size: 20px; font-weight: 600; margin: 0; }
    .demo-card-desc { color: var(--text-muted); font-size: 14px; margin: 0; }
    .demo-card-hint {
      display: inline-flex; align-items: center; gap: 6px;
      margin-top: 16px; padding: 8px 14px;
      background: rgba(255, 255, 255, 0.04); border-radius: 8px;
      font-size: 12px; color: var(--text-muted);
    }

    /* ==================== SHARED WIDGET STYLES ==================== */
    .widget-base {
      position: fixed;
      z-index: 9999;
    }
    .widget-toggle-base {
      width: 64px; height: 64px; border-radius: 50%;
      border: 1px solid var(--glass-border);
      box-shadow: var(--shadow-strong);
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      font-size: 28px;
      transition: transform 0.2s ease;
    }
    .widget-toggle-base:hover { transform: scale(1.08); }
    .widget-window-base {
      position: absolute;
      width: var(--widget-width); height: var(--widget-height);
      max-height: calc(100vh - 100px);
      border-radius: var(--radius-lg); overflow: hidden;
      box-shadow: var(--shadow-strong);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(20px);
      display: none; flex-direction: column;
    }
    .widget-window-base.is-open { display: flex; }
    .widget-header-base {
      padding: 20px 24px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(0, 0, 0, 0.3);
    }
    .widget-header-title {
      font-family: 'Playfair Display', serif;
      font-size: 22px; font-weight: 600; margin: 0 0 4px 0;
    }
    .widget-header-subtitle { font-size: 13px; color: var(--text-muted); margin: 0; }
    .widget-body-base { flex: 1; overflow-y: auto; padding: 20px 24px; }
    .widget-body-base::-webkit-scrollbar { width: 6px; }
    .widget-body-base::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.15); border-radius: 3px; }

    /* Shared Form Elements */
    .form-section { margin-bottom: 20px; }
    .form-group { margin-bottom: 16px; }
    .form-label { display: block; font-size: 13px; font-weight: 500; color: var(--text-muted); margin-bottom: 6px; }
    .form-label .required { color: var(--error); }
    .form-label .optional { color: rgba(255, 255, 255, 0.35); font-weight: 400; }
    .form-input, .form-select, .form-textarea {
      width: 100%; padding: 12px 14px;
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-sm);
      color: var(--text); font-size: 16px; font-family: inherit;
      transition: all 0.2s ease;
      -webkit-appearance: none;
    }
    .form-textarea { resize: vertical; min-height: 80px; line-height: 1.5; }
    .form-input::placeholder, .form-textarea::placeholder { color: rgba(255, 255, 255, 0.3); }
    .form-input.valid { border-color: var(--success); }
    .form-input.invalid { border-color: var(--error); }
    .form-select {
      cursor: pointer;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%238892b0' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E");
      background-repeat: no-repeat; background-position: right 12px center; background-size: 16px;
    }
    .form-select option { background: #1a1816; }
    .validation-box {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: var(--radius-md); padding: 16px; margin-bottom: 20px;
    }
    .validation-box-title {
      font-size: 12px; font-weight: 600; color: var(--text-muted);
      margin-bottom: 12px; display: flex; align-items: center; gap: 6px;
    }
    .validation-row { display: flex; gap: 10px; margin-bottom: 12px; }
    .validation-row .form-input { flex: 1; }
    .validate-btn {
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: var(--radius-sm);
      color: var(--text); font-size: 13px; font-weight: 500;
      cursor: pointer; white-space: nowrap;
      display: flex; align-items: center; gap: 6px;
      transition: all 0.2s ease;
    }
    .validate-btn:hover { background: rgba(255, 255, 255, 0.1); }
    .validate-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .validate-btn .spinner {
      width: 14px; height: 14px;
      border: 2px solid transparent; border-top-color: var(--text);
      border-radius: 50%; animation: spin 0.8s linear infinite;
      display: none;
    }
    .validate-btn.loading .spinner { display: block; }
    .validate-btn.loading .btn-icon { display: none; }
    .validation-status {
      padding: 10px 12px; border-radius: 8px; font-size: 13px;
      display: none; align-items: center; gap: 8px;
    }
    .validation-status.visible { display: flex; }
    .validation-status.success { background: rgba(34, 197, 94, 0.15); border: 1px solid rgba(34, 197, 94, 0.3); color: var(--success); }
    .validation-status.error { background: rgba(239, 68, 68, 0.15); border: 1px solid rgba(239, 68, 68, 0.3); color: var(--error); }
    .conditional-field { display: none; animation: fadeIn 0.3s ease; }
    .conditional-field.visible { display: block; }
    .input-wrapper { position: relative; }
    .input-status { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); font-size: 16px; }
    .field-error { font-size: 12px; color: var(--error); margin-top: 6px; display: none; }
    .field-error.visible { display: block; }
    .radio-group { display: flex; gap: 12px; }
    .radio-option { flex: 1; }
    .radio-option input { position: absolute; opacity: 0; }
    .radio-option label {
      display: flex; align-items: center; justify-content: center; gap: 8px;
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: var(--radius-sm);
      cursor: pointer; font-size: 14px; font-weight: 500;
      transition: all 0.2s ease;
    }
    /* File Upload */
    .file-upload {
      border: 2px dashed rgba(255, 255, 255, 0.15);
      border-radius: var(--radius-sm); padding: 20px; text-align: center;
      cursor: pointer; position: relative; transition: all 0.2s ease;
    }
    .file-upload input { position: absolute; inset: 0; opacity: 0; cursor: pointer; }
    .file-upload-icon { font-size: 28px; margin-bottom: 8px; }
    .file-upload-text { font-size: 13px; color: var(--text-muted); }
    .file-upload-hint { font-size: 11px; color: rgba(255, 255, 255, 0.35); margin-top: 4px; }
    .file-list { margin-top: 12px; display: flex; flex-wrap: wrap; gap: 8px; }
    .file-item {
      display: flex; align-items: center; gap: 6px;
      padding: 6px 10px; border-radius: 6px; font-size: 12px;
    }
    .file-item-remove { cursor: pointer; color: var(--error); font-weight: bold; margin-left: 4px; }
    /* Checklist */
    .validation-checklist {
      background: rgba(0, 0, 0, 0.2);
      border-radius: var(--radius-sm); padding: 14px 16px;
      margin-top: 20px; margin-bottom: 10px;
    }
    .validation-checklist-title {
      font-size: 11px; font-weight: 600; text-transform: uppercase;
      letter-spacing: 1px; color: var(--text-muted); margin-bottom: 10px;
    }
    .checklist-item {
      display: flex; align-items: center; gap: 10px;
      padding: 6px 0; font-size: 13px; color: var(--text-muted);
    }
    .checklist-item.checked { color: var(--success); }
    .checklist-icon {
      width: 18px; height: 18px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 11px; flex-shrink: 0;
    }
    .checklist-item.checked .checklist-icon { background: var(--success); color: white; }
    .checklist-item.unchecked .checklist-icon { background: rgba(255, 255, 255, 0.1); }
    /* DSGVO */
    .dsgvo-box {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: var(--radius-md);
      padding: 14px 16px;
      margin-top: 10px;
    }
    .dsgvo-row {
      display: flex; align-items: flex-start; gap: 10px;
      font-size: 13px; color: var(--text-muted);
      line-height: 1.45;
      cursor: pointer;
    }
    .dsgvo-row input { margin-top: 3px; width: 18px; height: 18px; }
    .dsgvo-toggle {
      background: none; border: none; cursor: pointer;
      padding: 0; font-size: 13px; text-decoration: underline;
    }
    .dsgvo-details {
      display: none;
      margin-top: 10px; padding-top: 10px;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
      font-size: 12px; color: rgba(255, 255, 255, 0.45);
      animation: fadeIn 0.25s ease;
    }
    .dsgvo-details.visible { display: block; }
    /* Submit Button Base */
    .submit-btn-base {
      width: 100%; padding: 16px;
      border: none; border-radius: var(--radius-sm);
      color: #ffffff; font-size: 15px; font-weight: 600;
      cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px;
      transition: all 0.2s ease; margin-top: 24px;
    }
    .submit-btn-base:hover:not(:disabled) { transform: translateY(-2px); }
    .submit-btn-base:disabled { opacity: 0.4; cursor: not-allowed; }
    .submit-btn-base .spinner {
      width: 18px; height: 18px;
      border: 2px solid transparent; border-top-color: #ffffff;
      border-radius: 50%; animation: spin 0.8s linear infinite; display: none;
    }
    .submit-btn-base.loading .spinner { display: block; }
    .submit-btn-base.loading .btn-text { display: none; }
    /* Result View */
    .result-view { display: none; }
    .result-view.visible { display: block; animation: fadeIn 0.4s ease; }
    .result-success { text-align: center; padding: 12px 0 8px; }
    .result-success-icon { font-size: 32px; margin-bottom: 6px; }
    .result-success h3 { font-size: 17px; font-weight: 600; margin: 0 0 4px 0; }
    .result-success p { font-size: 13px; color: var(--text-muted); margin: 0; }
    .result-summary {
      background: rgba(0, 0, 0, 0.3);
      border-radius: var(--radius-md); padding: 16px; margin: 12px 0;
    }
    .result-row {
      display: flex; justify-content: space-between;
      padding: 8px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      font-size: 13px;
    }
    .result-row:last-child { border-bottom: none; }
    .result-row .label { color: var(--text-muted); }
    .result-row .value { color: var(--text); font-weight: 500; text-align: right; max-width: 60%; }
    .result-divider { height: 1px; background: rgba(255, 255, 255, 0.1); margin: 10px 0; }
    .result-disclaimer {
      font-size: 11px; color: rgba(255, 255, 255, 0.4);
      text-align: center; margin-top: 12px; line-height: 1.4;
    }
    .loading-overlay {
      position: absolute; inset: 0;
      background: rgba(22, 20, 16, 0.95);
      display: none; flex-direction: column;
      align-items: center; justify-content: center; z-index: 100;
    }
    .loading-overlay.visible { display: flex; }
    .loading-spinner {
      width: 48px; height: 48px;
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 16px;
    }
    .loading-text { font-size: 14px; color: var(--text-muted); }
    .toast {
      position: fixed; bottom: 100px; left: 50%;
      transform: translateX(-50%) translateY(20px);
      padding: 14px 24px; background: var(--success); color: white;
      border-radius: 10px; font-size: 14px; font-weight: 500;
      opacity: 0; pointer-events: none;
      transition: all 0.3s ease; z-index: 10000;
    }
    .toast.visible { opacity: 1; transform: translateX(-50%) translateY(0); }
    .toast.error { background: var(--error); }
    @keyframes spin { to { transform: rotate(360deg); } }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

    /* ==================== MALERBETRIEB WIDGET (ORANGE) ==================== */
    #maler-widget { right: var(--gap); bottom: var(--gap); }
    #maler-widget .widget-toggle-base {
      background: linear-gradient(135deg, #1a1816 0%, #252220 100%);
    }
    #maler-widget .widget-window-base {
      bottom: 76px; right: 0;
      background: rgba(22, 20, 16, 0.95);
    }
    #maler-widget .welcome-box {
      background: rgba(217, 119, 6, 0.1);
      border: 1px solid rgba(217, 119, 6, 0.2);
    }
    #maler-widget .welcome-box strong { color: var(--accent-orange-light); }
    #maler-widget .form-section-title { color: var(--accent-orange-light); }
    #maler-widget .form-input:focus, #maler-widget .form-select:focus, #maler-widget .form-textarea:focus {
      border-color: var(--accent-orange);
      box-shadow: 0 0 0 3px rgba(217, 119, 6, 0.2);
    }
    #maler-widget .radio-option input:checked + label {
      background: rgba(217, 119, 6, 0.2);
      border-color: var(--accent-orange); color: var(--accent-orange-light);
    }
    #maler-widget .validate-btn:hover { border-color: var(--accent-orange); }
    #maler-widget .file-upload:hover { border-color: var(--accent-orange); background: rgba(217, 119, 6, 0.05); }
    #maler-widget .file-item { background: rgba(217, 119, 6, 0.15); }
    #maler-widget .dsgvo-row input { accent-color: var(--accent-orange-light); }
    #maler-widget .dsgvo-toggle { color: var(--accent-orange-light); }
    #maler-widget .submit-btn-base {
      background: linear-gradient(135deg, var(--accent-orange) 0%, var(--accent-orange-light) 100%);
    }
    #maler-widget .submit-btn-base:hover:not(:disabled) { box-shadow: 0 8px 25px rgba(217, 119, 6, 0.35); }
    #maler-widget .loading-spinner { border-top-color: var(--accent-orange); }
    #maler-widget .result-highlight-box {
      background: linear-gradient(135deg, rgba(217, 119, 6, 0.2) 0%, rgba(245, 158, 11, 0.1) 100%);
      border: 1px solid rgba(217, 119, 6, 0.3);
      border-radius: var(--radius-md);
      padding: 16px; margin: 12px 0 16px;
      display: grid; grid-template-columns: 1fr 1fr 1fr;
      gap: 12px; text-align: center;
    }
    #maler-widget .result-highlight-item { display: flex; flex-direction: column; gap: 4px; }
    #maler-widget .result-highlight-label {
      font-size: 11px; color: var(--text-muted);
      text-transform: uppercase; letter-spacing: 0.5px;
    }
    #maler-widget .result-highlight-value { font-size: 18px; font-weight: 600; color: var(--accent-orange-light); }
    #maler-widget .result-highlight-item.main .result-highlight-value { font-size: 22px; }
    #maler-widget .result-summary-title {
      font-size: 11px; font-weight: 600; text-transform: uppercase;
      letter-spacing: 1px; color: var(--accent-orange-light); margin-bottom: 12px;
    }

    /* ==================== AGENTIC B2B WIDGET (BLUE) ==================== */
    #b2b-widget { right: var(--gap); bottom: calc(var(--gap) + 80px); }
    #b2b-widget .widget-toggle-base {
      background: linear-gradient(135deg, #4338ca 0%, #6366f1 100%);
    }
    #b2b-widget .widget-window-base {
      bottom: 76px; right: 0;
      background: rgba(15, 15, 25, 0.97);
    }
    #b2b-widget .welcome-box {
      background: rgba(99, 102, 241, 0.1);
      border: 1px solid rgba(99, 102, 241, 0.2);
    }
    #b2b-widget .welcome-box strong { color: var(--accent-blue-light); }
    #b2b-widget .form-section-title { color: var(--accent-blue-light); }
    #b2b-widget .form-input:focus, #b2b-widget .form-select:focus, #b2b-widget .form-textarea:focus {
      border-color: var(--accent-blue);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
    }
    #b2b-widget .validate-btn:hover { border-color: var(--accent-blue); }
    #b2b-widget .dsgvo-row input { accent-color: var(--accent-blue-light); }
    #b2b-widget .dsgvo-toggle { color: var(--accent-blue-light); }
    #b2b-widget .submit-btn-base {
      background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-blue-light) 100%);
    }
    #b2b-widget .submit-btn-base:hover:not(:disabled) { box-shadow: 0 8px 25px rgba(99, 102, 241, 0.35); }
    #b2b-widget .loading-spinner { border-top-color: var(--accent-blue); }
    #b2b-widget .result-highlight-box {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.2) 0%, rgba(129, 140, 248, 0.1) 100%);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: var(--radius-md);
      padding: 16px; margin: 12px 0 16px;
    }
    #b2b-widget .result-highlight-value { color: var(--accent-blue-light); }
    #b2b-widget .result-summary-title {
      font-size: 11px; font-weight: 600; text-transform: uppercase;
      letter-spacing: 1px; color: var(--accent-blue-light); margin-bottom: 12px;
    }
    /* Package Selection */
    .package-grid { display: flex; flex-direction: column; gap: 8px; }
    .package-option {
      display: flex; align-items: flex-start; gap: 12px;
      padding: 12px 14px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .package-option:hover { background: rgba(255, 255, 255, 0.04); }
    .package-option.selected {
      background: rgba(99, 102, 241, 0.15);
      border-color: var(--accent-blue);
    }
    .package-checkbox {
      width: 18px; height: 18px; border-radius: 5px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      display: flex; align-items: center; justify-content: center;
      font-size: 11px; color: transparent;
      transition: all 0.2s ease;
      flex-shrink: 0; margin-top: 1px;
    }
    .package-option.selected .package-checkbox {
      background: var(--accent-blue); border-color: var(--accent-blue); color: white;
    }
    .package-content { flex: 1; min-width: 0; }
    .package-header { display: flex; justify-content: space-between; align-items: flex-start; gap: 8px; }
    .package-name { font-size: 13px; font-weight: 600; color: var(--text); }
    .package-price { font-size: 11px; color: var(--accent-blue-light); text-align: right; white-space: nowrap; }
    .package-desc { font-size: 11px; color: var(--text-muted); line-height: 1.4; margin-top: 2px; }
    .package-tag {
      display: inline-block; padding: 2px 6px; margin-top: 4px;
      background: rgba(99, 102, 241, 0.2); border-radius: 4px;
      font-size: 9px; color: var(--accent-blue-light);
    }
    /* Info Box */
    .info-box {
      background: rgba(99, 102, 241, 0.08);
      border: 1px solid rgba(99, 102, 241, 0.15);
      border-radius: var(--radius-sm);
      padding: 12px 14px;
      margin-top: 16px;
    }
    .info-box p { font-size: 12px; color: var(--text-muted); line-height: 1.5; margin: 0; }
    .info-box strong { color: var(--accent-blue-light); }

    @media (max-width: 768px) {
      .widget-window-base { width: calc(100vw - 24px); height: calc(100vh - 100px); right: -8px; }
      .validation-row { flex-direction: column; }
      .validate-btn { width: 100%; justify-content: center; }
      #maler-widget .result-highlight-box { grid-template-columns: 1fr; gap: 10px; }
      #maler-widget .result-highlight-item {
        flex-direction: row; justify-content: space-between; align-items: center;
        padding: 8px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.08);
      }
      #maler-widget .result-highlight-item:last-child { border-bottom: none; }
      #maler-widget .result-highlight-item.main {
        order: -1; background: rgba(217, 119, 6, 0.15);
        margin: -16px -16px 8px; padding: 12px 16px;
        border-radius: var(--radius-sm) var(--radius-sm) 0 0; border-bottom: none;
      }
      #b2b-widget { bottom: calc(var(--gap) + 80px); }
    }
  </style>
</head>
<body>
  <header class="agentic-header">
    <div class="agentic-badge">
      <div class="agentic-badge-icon">‚ö°</div>
      <div class="agentic-badge-text">
        <span class="agentic-badge-title">Agentic Solutions</span>
        <span class="agentic-badge-subtitle">Demo-Agents Showcase</span>
      </div>
    </div>
  </header>

  <div class="wrap">
    <h1 class="page-title">KI-Assistenten in Aktion</h1>
    <p class="page-subtitle">Erlebe unsere intelligenten Assistenten live. Zwei Demos verf√ºgbar ‚Äì klicke auf die Buttons unten rechts.</p>
    
    <div class="demo-cards">
      <div class="demo-card">
        <div class="demo-card-header">
          <div class="demo-card-icon blue">‚ö°</div>
          <div>
            <h2 class="demo-card-title">Agentic Solutions ‚Äì B2B Anfrage</h2>
            <p class="demo-card-desc">Sie m√∂chten unsere KI-L√∂sungen f√ºr Ihr Unternehmen? Stellen Sie hier Ihre Anfrage ‚Äì inkl. Preissch√§tzung.</p>
          </div>
        </div>
        <div class="demo-card-hint">Anfrage stellen mit dem ‚ö° Button</div>
      </div>
      
      <div class="demo-card">
        <div class="demo-card-header">
          <div class="demo-card-icon orange">üé®</div>
          <div>
            <h2 class="demo-card-title">ProjektBauGG Malerbetrieb</h2>
            <p class="demo-card-desc">Kundenbeispiel: Professionelle Malerarbeiten in Paderborn. Projektanfrage inkl. Preissch√§tzung.</p>
          </div>
        </div>
        <div class="demo-card-hint">Demo √∂ffnen mit dem üé® Button</div>
      </div>
    </div>
  </div>

  <!-- ==================== B2B WIDGET (BLUE) ==================== -->
  <div class="widget-base" id="b2b-widget">
    <div class="widget-toggle-base" id="b2b-toggle">‚ö°</div>
    <div class="widget-window-base" id="b2b-window">
      <div class="loading-overlay" id="b2b-loading">
        <div class="loading-spinner"></div>
        <div class="loading-text">Anfrage wird verarbeitet...</div>
      </div>
      <div class="widget-header-base">
        <h2 class="widget-header-title">‚ö° Agentic Solutions</h2>
        <p class="widget-header-subtitle">B2B Anfrage ‚Ä¢ KI-Automatisierung</p>
      </div>
      <div class="widget-body-base" id="b2b-body">
        <!-- FORM VIEW -->
        <div id="b2b-form-view">
          <form id="b2b-form">
            <!-- Firma & Ort -->
            <div class="validation-box">
              <div class="validation-box-title">üè¢ Unternehmen pr√ºfen</div>
              <div class="form-group" style="margin-bottom: 12px;">
                <label class="form-label">Firmenname <span class="required">*</span></label>
                <input type="text" class="form-input" id="b2b-company" placeholder="Ihr Unternehmen">
              </div>
              <div class="validation-row">
                <input type="text" class="form-input" id="b2b-location" placeholder="Standort (Stadt)">
                <button type="button" class="validate-btn" id="b2b-validate-btn">
                  <span class="spinner"></span>
                  <span class="btn-icon">üîç</span>
                  Pr√ºfen
                </button>
              </div>
              <div class="validation-status" id="b2b-company-status"></div>
            </div>

            <!-- Ansprechpartner -->
            <div class="form-group">
              <label class="form-label">Ansprechpartner <span class="required">*</span></label>
              <div class="input-wrapper">
                <input type="text" class="form-input" id="b2b-contact" placeholder="Vor- und Nachname">
                <span class="input-status" id="b2b-contact-status"></span>
              </div>
              <div class="field-error" id="b2b-contact-error"></div>
            </div>

            <!-- E-Mail -->
            <div class="form-group">
              <label class="form-label">E-Mail-Adresse <span class="required">*</span></label>
              <div class="input-wrapper">
                <input type="email" class="form-input" id="b2b-email" placeholder="ihre@firma.de">
                <span class="input-status" id="b2b-email-status"></span>
              </div>
            </div>

            <!-- Telefon -->
            <div class="form-group">
              <label class="form-label">Telefonnummer <span class="required">*</span></label>
              <div class="input-wrapper">
                <input type="tel" class="form-input" id="b2b-phone" placeholder="z.B. 0151 12345678">
                <span class="input-status" id="b2b-phone-status"></span>
              </div>
            </div>

            <!-- Leistungen -->
            <div class="form-section">
              <div class="form-section-title">Gew√ºnschte Leistungen</div>
              <div class="package-grid" id="b2b-packages">
                <div class="package-option" data-package="starter" data-setup="299" data-monthly="79">
                  <div class="package-checkbox">‚úì</div>
                  <div class="package-content">
                    <div class="package-header">
                      <span class="package-name">Starter</span>
                      <span class="package-price">79 ‚Ç¨/M + 299 ‚Ç¨ Setup</span>
                    </div>
                    <div class="package-desc">KI-Kontaktformular mit Validierung & Preissch√§tzung</div>
                  </div>
                </div>
                <div class="package-option" data-package="advanced" data-setup="499" data-monthly="139">
                  <div class="package-checkbox">‚úì</div>
                  <div class="package-content">
                    <div class="package-header">
                      <span class="package-name">Advanced</span>
                      <span class="package-price">ab 139 ‚Ç¨/M + ab 499 ‚Ç¨ Setup</span>
                    </div>
                    <div class="package-desc">Erweiterte Validierung, WhatsApp-Integration</div>
                  </div>
                </div>
                <div class="package-option" data-package="chatbot-basic" data-setup="299" data-monthly="79">
                  <div class="package-checkbox">‚úì</div>
                  <div class="package-content">
                    <div class="package-header">
                      <span class="package-name">ChatBot Basic</span>
                      <span class="package-price">79‚Äì300 ‚Ç¨/M + 299 ‚Ç¨ Setup</span>
                    </div>
                    <div class="package-desc">Automatische Terminbuchung, 1 Kanal</div>
                  </div>
                </div>
                <div class="package-option" data-package="chatbot-premium" data-setup="0" data-monthly="0">
                  <div class="package-checkbox">‚úì</div>
                  <div class="package-content">
                    <div class="package-header">
                      <span class="package-name">ChatBot Premium</span>
                      <span class="package-price">Individuell</span>
                    </div>
                    <div class="package-desc">Komplexe Logik, mehrere Kan√§le</div>
                    <span class="package-tag">üëâ Beschreibung erforderlich</span>
                  </div>
                </div>
                <div class="package-option" data-package="voice-info" data-setup="549" data-monthly="249">
                  <div class="package-checkbox">‚úì</div>
                  <div class="package-content">
                    <div class="package-header">
                      <span class="package-name">Info Voice Agent</span>
                      <span class="package-price">99‚Äì399 ‚Ç¨/M + 299‚Äì799 ‚Ç¨ Setup</span>
                    </div>
                    <div class="package-desc">24/7 Telefonassistent f√ºr Infos</div>
                  </div>
                </div>
                <div class="package-option" data-package="voice-pure" data-setup="1349" data-monthly="649">
                  <div class="package-checkbox">‚úì</div>
                  <div class="package-content">
                    <div class="package-header">
                      <span class="package-name">Voice Agent Pure</span>
                      <span class="package-price">299‚Äì999 ‚Ç¨/M + 699‚Äì1.999 ‚Ç¨ Setup</span>
                    </div>
                    <div class="package-desc">Vollautomatische Kundenabwicklung & Terminbuchung</div>
                  </div>
                </div>
                <div class="package-option" data-package="individual" data-setup="0" data-monthly="0">
                  <div class="package-checkbox">‚úì</div>
                  <div class="package-content">
                    <div class="package-header">
                      <span class="package-name">Individuelle Kombination</span>
                      <span class="package-price">Auf Anfrage</span>
                    </div>
                    <div class="package-desc">Ma√ügeschneiderte L√∂sung aus allen Modulen</div>
                    <span class="package-tag">üëâ Beschreibung erforderlich</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Beschreibung -->
            <div class="form-group">
              <label class="form-label">Beschreibung <span id="b2b-desc-required" class="optional">(optional)</span></label>
              <textarea class="form-textarea" id="b2b-description" placeholder="Beschreiben Sie Ihren Anwendungsfall, besondere Anforderungen oder Fragen..."></textarea>
            </div>

            <!-- Info Box -->
            <div class="info-box">
              <p><strong>Alle Pakete</strong> sind individuell anpassbar und beinhalten <strong>kostenlose Wartung</strong>. Bei individuellen L√∂sungen ben√∂tigen wir eine Beschreibung Ihres Anwendungsfalls.</p>
            </div>

            <!-- Checklist -->
            <div class="validation-checklist">
              <div class="validation-checklist-title">Checkliste</div>
              <div class="checklist-item unchecked" id="b2b-check-company">
                <span class="checklist-icon">‚óã</span>
                <span>Unternehmen gepr√ºft</span>
              </div>
              <div class="checklist-item unchecked" id="b2b-check-contact">
                <span class="checklist-icon">‚óã</span>
                <span>Ansprechpartner g√ºltig</span>
              </div>
              <div class="checklist-item unchecked" id="b2b-check-email">
                <span class="checklist-icon">‚óã</span>
                <span>E-Mail g√ºltig</span>
              </div>
              <div class="checklist-item unchecked" id="b2b-check-phone">
                <span class="checklist-icon">‚óã</span>
                <span>Telefon g√ºltig</span>
              </div>
              <div class="checklist-item unchecked" id="b2b-check-package">
                <span class="checklist-icon">‚óã</span>
                <span>Mindestens 1 Paket gew√§hlt</span>
              </div>
            </div>

            <!-- DSGVO -->
            <div class="dsgvo-box">
              <label class="dsgvo-row" for="b2b-dsgvo">
                <input type="checkbox" id="b2b-dsgvo">
                <span>
                  Ich stimme der Verarbeitung meiner Daten gem√§√ü
                  <button type="button" class="dsgvo-toggle" id="b2b-dsgvo-toggle">Datenschutz</button>
                  zu.
                </span>
              </label>
              <div class="dsgvo-details" id="b2b-dsgvo-details">
                <strong style="color: var(--accent-blue-light);">Kurzinfo:</strong>
                Ihre Angaben werden ausschlie√ülich zur Bearbeitung Ihrer Anfrage verwendet.
                Rechtsgrundlage: Art. 6 Abs. 1 lit. b DSGVO. Widerruf jederzeit m√∂glich.
              </div>
            </div>

            <button type="submit" class="submit-btn-base" id="b2b-submit" disabled>
              <span class="spinner"></span>
              <span class="btn-text">üöÄ Anfrage absenden</span>
            </button>
          </form>
        </div>

        <!-- RESULT VIEW -->
        <div class="result-view" id="b2b-result-view">
          <div class="result-success">
            <div class="result-success-icon">‚úÖ</div>
            <h3>Anfrage erhalten!</h3>
            <p>Wir melden uns morgen bei Ihnen</p>
          </div>
          <div class="result-highlight-box">
            <div style="text-align: center;">
              <div style="font-size: 11px; color: var(--text-muted); text-transform: uppercase; margin-bottom: 4px;">üí∞ Gesch√§tzte Kosten</div>
              <div style="font-size: 24px; font-weight: 600; color: var(--accent-blue-light);" id="b2b-result-price">-</div>
            </div>
          </div>
          <div class="result-summary">
            <div class="result-summary-title">üìã Ihre Anfrage</div>
            <div class="result-row"><span class="label">Unternehmen</span><span class="value" id="b2b-result-company">-</span></div>
            <div class="result-row"><span class="label">Standort</span><span class="value" id="b2b-result-location">-</span></div>
            <div class="result-row"><span class="label">Ansprechpartner</span><span class="value" id="b2b-result-contact">-</span></div>
            <div class="result-row"><span class="label">E-Mail</span><span class="value" id="b2b-result-email">-</span></div>
            <div class="result-row"><span class="label">Telefon</span><span class="value" id="b2b-result-phone">-</span></div>
            <div class="result-divider"></div>
            <div class="result-row"><span class="label">Gew√§hlte Pakete</span><span class="value" id="b2b-result-packages">-</span></div>
            <div class="result-row" id="b2b-result-desc-row" style="display:none;"><span class="label">Beschreibung</span><span class="value" id="b2b-result-description">-</span></div>
          </div>
          <p class="result-disclaimer">Unverbindliche Sch√§tzung. Das finale Angebot erhalten Sie nach pers√∂nlicher Beratung.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== MALERBETRIEB WIDGET (ORANGE) ==================== -->
  <div class="widget-base" id="maler-widget">
    <div class="widget-toggle-base" id="maler-toggle">üé®</div>
    <div class="widget-window-base" id="maler-window">
      <div class="loading-overlay" id="maler-loading">
        <div class="loading-spinner"></div>
        <div class="loading-text">Anfrage wird verarbeitet...</div>
      </div>
      <div class="widget-header-base">
        <h2 class="widget-header-title">üé® Malerbetrieb</h2>
        <p class="widget-header-subtitle">ProjektBauGG GmbH ‚Ä¢ Paderborn</p>
      </div>
      <div class="widget-body-base" id="maler-body">
        <!-- FORM VIEW -->
        <div id="maler-form-view">
          <div class="welcome-box">
            <p><strong>Willkommen!</strong> F√ºllen Sie das Formular aus, um eine <strong>Projektanfrage inkl. Preissch√§tzung & Aufwand</strong> zu erhalten.</p>
          </div>
          <form id="maler-form">
            <!-- Kundentyp -->
            <div class="form-section">
              <div class="form-section-title">Kundentyp</div>
              <div class="radio-group">
                <div class="radio-option">
                  <input type="radio" id="maler-type-privat" name="malerCustomerType" value="privat" checked>
                  <label for="maler-type-privat">üè† Privat</label>
                </div>
                <div class="radio-option">
                  <input type="radio" id="maler-type-gewerbe" name="malerCustomerType" value="gewerbe">
                  <label for="maler-type-gewerbe">üè¢ Gewerblich</label>
                </div>
              </div>
            </div>
            <!-- GEWERBE -->
            <div class="validation-box conditional-field" id="maler-gewerbe-box">
              <div class="validation-box-title">üîç Firma & Standort pr√ºfen</div>
              <div class="form-group" style="margin-bottom: 12px;">
                <label class="form-label">Firmenname <span class="required">*</span></label>
                <input type="text" class="form-input" id="maler-company" placeholder="Name Ihrer Firma">
              </div>
              <div class="validation-row">
                <input type="text" class="form-input" id="maler-location-gewerbe" placeholder="Ort des Objekts">
                <button type="button" class="validate-btn" id="maler-validate-gewerbe-btn">
                  <span class="spinner"></span>
                  <span class="btn-icon">üîç</span>
                  Pr√ºfen
                </button>
              </div>
              <div class="validation-status" id="maler-gewerbe-status"></div>
            </div>
            <!-- PRIVAT -->
            <div class="validation-box" id="maler-privat-box">
              <div class="validation-box-title">üîç Standort pr√ºfen</div>
              <div class="validation-row">
                <input type="text" class="form-input" id="maler-location-privat" placeholder="Ort des Objekts (Stadt oder PLZ)">
                <button type="button" class="validate-btn" id="maler-validate-privat-btn">
                  <span class="spinner"></span>
                  <span class="btn-icon">üîç</span>
                  Pr√ºfen
                </button>
              </div>
              <div class="validation-status" id="maler-privat-status"></div>
            </div>
            <!-- Name -->
            <div class="form-group">
              <label class="form-label">Ihr Name <span class="required">*</span></label>
              <div class="input-wrapper">
                <input type="text" class="form-input" id="maler-name" placeholder="Vor- und Nachname" required>
                <span class="input-status" id="maler-name-status"></span>
              </div>
              <div class="field-error" id="maler-name-error"></div>
            </div>
            <!-- E-Mail -->
            <div class="form-group">
              <label class="form-label">E-Mail-Adresse <span class="optional">(optional)</span></label>
              <input type="email" class="form-input" id="maler-email" placeholder="ihre@email.de">
            </div>
            <!-- Telefon -->
            <div class="form-group">
              <label class="form-label">Telefonnummer <span class="required">*</span></label>
              <div class="input-wrapper">
                <input type="tel" class="form-input" id="maler-phone" placeholder="z.B. 0151 12345678" required>
                <span class="input-status" id="maler-phone-status"></span>
              </div>
            </div>
            <!-- Leistung -->
            <div class="form-section">
              <div class="form-section-title">Projektdetails</div>
              <div class="form-group">
                <label class="form-label">Gew√ºnschte Leistung <span class="required">*</span></label>
                <select class="form-select" id="maler-service" required>
                  <option value="">Bitte w√§hlen...</option>
                  <option value="1">Innenw√§nde streichen</option>
                  <option value="2">Fassade streichen</option>
                  <option value="3">Tapezieren</option>
                  <option value="4">T√ºren / Fenster lackieren</option>
                  <option value="5">Verputzen / Grundieren</option>
                  <option value="6">Dekorative Techniken</option>
                </select>
              </div>
            </div>
            <!-- Gr√∂√üe -->
            <div class="form-group">
              <label class="form-label">Ungef√§hre Gr√∂√üe <span class="required">*</span></label>
              <input type="text" class="form-input" id="maler-size" placeholder="z.B. 50 m¬≤ oder 3 T√ºren" required>
            </div>
            <!-- Zeitraum -->
            <div class="form-group">
              <label class="form-label">Gew√ºnschter Zeitraum <span class="required">*</span></label>
              <input type="text" class="form-input" id="maler-timeframe" placeholder="z.B. Anfang M√§rz, KW 12" required>
            </div>
            <!-- Beschreibung -->
            <div class="form-group">
              <label class="form-label">Beschreibung <span class="optional">(optional)</span></label>
              <textarea class="form-textarea" id="maler-description" placeholder="Zus√§tzliche Informationen zum Projekt..."></textarea>
            </div>
            <!-- Bilder -->
            <div class="form-group">
              <label class="form-label">Bilder vom Objekt <span class="optional">(optional)</span></label>
              <div class="file-upload">
                <input type="file" id="maler-images" multiple accept="image/*">
                <div class="file-upload-icon">üì∑</div>
                <div class="file-upload-text">Bilder hier ablegen oder klicken</div>
                <div class="file-upload-hint">JPG, PNG bis 10MB</div>
              </div>
              <div class="file-list" id="maler-file-list"></div>
            </div>
            <!-- Checklist -->
            <div class="validation-checklist">
              <div class="validation-checklist-title">Checkliste vor Absenden</div>
              <div class="checklist-item unchecked" id="maler-check-location">
                <span class="checklist-icon">‚óã</span>
                <span>Standort gepr√ºft</span>
              </div>
              <div class="checklist-item unchecked" id="maler-check-name">
                <span class="checklist-icon">‚óã</span>
                <span>Name g√ºltig</span>
              </div>
              <div class="checklist-item unchecked" id="maler-check-phone">
                <span class="checklist-icon">‚óã</span>
                <span>Telefonnummer g√ºltig</span>
              </div>
            </div>
            <!-- DSGVO -->
            <div class="dsgvo-box">
              <label class="dsgvo-row" for="maler-dsgvo">
                <input type="checkbox" id="maler-dsgvo">
                <span>
                  Ich stimme der Verarbeitung meiner Daten gem√§√ü
                  <button type="button" class="dsgvo-toggle" id="maler-dsgvo-toggle">Datenschutz</button>
                  zu.
                </span>
              </label>
              <div class="dsgvo-details" id="maler-dsgvo-details">
                <strong style="color: var(--accent-orange-light);">Kurzinfo:</strong>
                Ihre Angaben werden ausschlie√ülich zur Bearbeitung Ihrer Anfrage verwendet.
                Rechtsgrundlage: Art. 6 Abs. 1 lit. b DSGVO.
              </div>
            </div>
            <button type="submit" class="submit-btn-base" id="maler-submit" disabled>
              <span class="spinner"></span>
              <span class="btn-text">üöÄ Anfrage absenden</span>
            </button>
          </form>
        </div>
        <!-- RESULT VIEW -->
        <div class="result-view" id="maler-result-view">
          <div class="result-success">
            <div class="result-success-icon">‚úÖ</div>
            <h3>Anfrage erhalten!</h3>
            <p>Ihre Projekt√ºbersicht</p>
          </div>
          <div class="result-highlight-box">
            <div class="result-highlight-item main">
              <span class="result-highlight-label">üí∞ Preissch√§tzung</span>
              <span class="result-highlight-value" id="maler-result-price">-</span>
            </div>
            <div class="result-highlight-item">
              <span class="result-highlight-label">üìÖ Dauer</span>
              <span class="result-highlight-value" id="maler-result-duration">-</span>
            </div>
            <div class="result-highlight-item">
              <span class="result-highlight-label">üë∑ MA</span>
              <span class="result-highlight-value" id="maler-result-workers">-</span>
            </div>
          </div>
          <div class="result-summary">
            <div class="result-summary-title">üìã Details</div>
            <div class="result-row"><span class="label">Kundentyp</span><span class="value" id="maler-result-type">-</span></div>
            <div class="result-row" id="maler-result-company-row" style="display:none"><span class="label">Firma</span><span class="value" id="maler-result-company">-</span></div>
            <div class="result-row"><span class="label">Name</span><span class="value" id="maler-result-name">-</span></div>
            <div class="result-row" id="maler-result-email-row" style="display:none"><span class="label">E-Mail</span><span class="value" id="maler-result-email">-</span></div>
            <div class="result-row"><span class="label">Telefon</span><span class="value" id="maler-result-phone">-</span></div>
            <div class="result-row"><span class="label">Standort</span><span class="value" id="maler-result-location">-</span></div>
            <div class="result-divider"></div>
            <div class="result-row"><span class="label">Leistung</span><span class="value" id="maler-result-service">-</span></div>
            <div class="result-row"><span class="label">Umfang</span><span class="value" id="maler-result-size">-</span></div>
            <div class="result-row"><span class="label">Zeitraum</span><span class="value" id="maler-result-timeframe">-</span></div>
            <div class="result-row" id="maler-result-desc-row" style="display:none"><span class="label">Beschreibung</span><span class="value" id="maler-result-description">-</span></div>
          </div>
          <p class="result-disclaimer">Unverbindliche Sch√§tzung. Abweichung ¬±15‚Äì20% m√∂glich.</p>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
  (function() {
    const $ = id => document.getElementById(id);
    
    // ==================== SHARED HELPERS ====================
    const BLOCKED_WORDS = ['arsch','arschloch','wichser','hurensohn','fotze','fick','ficken','schei√üe','scheisse','kacke','pisser','schwanz','hure','nutte','bastard','idiot','depp','trottel','vollidiot','missgeburt','spast','nazi','hitler','fuck','shit','asshole','bitch','cunt','dick','pussy','whore','slut','nigger','faggot','retard'];
    const FAKE_NAMES = ['brad pitt','angelina jolie','tom cruise','johnny depp','leonardo dicaprio','angela merkel','olaf scholz','donald trump','joe biden','elon musk','harry potter','darth vader','batman','superman','spider man','max mustermann','erika mustermann','john doe','jane doe','test test'];
    
    function validateName(name) {
      const trimmed = name.trim();
      const lower = trimmed.toLowerCase();
      if (trimmed.length < 3) return { valid: false, message: 'Name zu kurz' };
      if (trimmed.length > 100) return { valid: false, message: 'Name zu lang' };
      const words = trimmed.split(/\s+/).filter(w => w.length > 0);
      if (words.length < 2) return { valid: false, message: 'Bitte Vor- und Nachname angeben' };
      if (/\d/.test(trimmed)) return { valid: false, message: 'Name darf keine Zahlen enthalten' };
      if (/[^a-zA-Z√§√∂√º√Ñ√ñ√ú√ü√©√®√™√´√†√¢√°√≠√¨√Æ√Ø√≥√≤√¥√µ√∫√π√ª√±√ßƒáƒç≈æ≈°ƒë\s\-'.]/i.test(trimmed)) return { valid: false, message: 'Ung√ºltige Zeichen' };
      for (const word of BLOCKED_WORDS) { if (lower.includes(word)) return { valid: false, message: 'Bitte echten Namen eingeben' }; }
      for (const fake of FAKE_NAMES) { if (lower.includes(fake)) return { valid: false, message: 'Bitte echten Namen eingeben' }; }
      if (/(.)\1{3,}/i.test(trimmed)) return { valid: false, message: 'Ung√ºltiger Name' };
      return { valid: true, message: '' };
    }
    
    function validatePhone(phone) {
      return /^(\+49|0)[1-7]\d{8,11}$/.test(phone.replace(/\s/g, ''));
    }
    
    function validateEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }
    
    function showToast(msg, type = 'success') {
      $('toast').textContent = msg;
      $('toast').className = 'toast visible' + (type === 'error' ? ' error' : '');
      setTimeout(() => $('toast').classList.remove('visible'), 3500);
    }

    // ==================== B2B WIDGET ====================
    const B2B_WEBHOOK_VALIDATE = "https://seidel1502.app.n8n.cloud/webhook/ea32573a-1dea-4e1d-803f-fd0a5e7b3ca1";
    const B2B_WEBHOOK_SUBMIT = "https://seidel1502.app.n8n.cloud/webhook/b2b-contact-submit";
    
    const b2bState = {
      companyValid: false,
      contactValid: false,
      emailValid: false,
      phoneValid: false,
      packagesSelected: [],
      dsgvoAccepted: false
    };
    
    const PACKAGE_NAMES = {
      'starter': 'Starter',
      'advanced': 'Advanced',
      'chatbot-basic': 'ChatBot Basic',
      'chatbot-premium': 'ChatBot Premium',
      'voice-info': 'Info Voice Agent',
      'voice-pure': 'Voice Agent Pure',
      'individual': 'Individuelle Kombination'
    };
    
    // Toggle
    $('b2b-toggle').onclick = () => {
      $('b2b-window').classList.toggle('is-open');
      $('maler-window').classList.remove('is-open');
    };
    
    // Company Validation
    $('b2b-validate-btn').onclick = async () => {
      const company = $('b2b-company').value.trim();
      const location = $('b2b-location').value.trim();
      if (!company || !location) {
        $('b2b-company-status').className = 'validation-status visible error';
        $('b2b-company-status').textContent = '‚ùå Bitte Firma und Standort eingeben';
        return;
      }
      const btn = $('b2b-validate-btn');
      btn.classList.add('loading'); btn.disabled = true;
      try {
        const res = await fetch(B2B_WEBHOOK_VALIDATE, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ company, location })
        });
        const data = await res.json();
        const d = Array.isArray(data) ? data[0] : data;
        if (d.valid) {
          b2bState.companyValid = true;
          $('b2b-company-status').className = 'validation-status visible success';
          $('b2b-company-status').textContent = `‚úÖ ${d.companyInfo || company} best√§tigt`;
        } else {
          b2bState.companyValid = false;
          $('b2b-company-status').className = 'validation-status visible error';
          $('b2b-company-status').textContent = d.message || '‚ùå Firma nicht gefunden';
        }
      } catch (e) {
        $('b2b-company-status').className = 'validation-status visible error';
        $('b2b-company-status').textContent = '‚ùå Pr√ºfung fehlgeschlagen';
      }
      btn.classList.remove('loading'); btn.disabled = false;
      updateB2BUI();
    };
    
    // Contact Validation
    $('b2b-contact').oninput = e => {
      const name = e.target.value;
      const result = validateName(name);
      $('b2b-contact').classList.toggle('valid', result.valid);
      $('b2b-contact').classList.toggle('invalid', !result.valid && name.trim().length >= 3);
      $('b2b-contact-status').textContent = name.length === 0 ? '' : result.valid ? '‚úÖ' : name.trim().length >= 3 ? '‚ùå' : '';
      $('b2b-contact-error').textContent = !result.valid && name.trim().length >= 3 ? result.message : '';
      $('b2b-contact-error').classList.toggle('visible', !result.valid && name.trim().length >= 3);
      b2bState.contactValid = result.valid;
      updateB2BUI();
    };
    
    // Email Validation
    $('b2b-email').oninput = e => {
      const email = e.target.value.trim();
      const valid = validateEmail(email);
      $('b2b-email').classList.toggle('valid', valid);
      $('b2b-email').classList.toggle('invalid', email.length > 3 && !valid);
      $('b2b-email-status').textContent = email.length === 0 ? '' : valid ? '‚úÖ' : email.length > 3 ? '‚ùå' : '';
      b2bState.emailValid = valid;
      updateB2BUI();
    };
    
    // Phone Validation
    $('b2b-phone').oninput = e => {
      const phone = e.target.value;
      const valid = validatePhone(phone);
      $('b2b-phone').classList.toggle('valid', valid);
      $('b2b-phone').classList.toggle('invalid', phone.length >= 6 && !valid);
      $('b2b-phone-status').textContent = phone.length === 0 ? '' : valid ? '‚úÖ' : phone.length >= 6 ? '‚ùå' : '';
      b2bState.phoneValid = valid;
      updateB2BUI();
    };
    
    // Package Selection
    document.querySelectorAll('#b2b-packages .package-option').forEach(opt => {
      opt.onclick = () => {
        opt.classList.toggle('selected');
        const pkg = opt.dataset.package;
        if (opt.classList.contains('selected')) {
          if (!b2bState.packagesSelected.includes(pkg)) b2bState.packagesSelected.push(pkg);
        } else {
          b2bState.packagesSelected = b2bState.packagesSelected.filter(p => p !== pkg);
        }
        // Description required?
        const needsDesc = b2bState.packagesSelected.includes('chatbot-premium') || b2bState.packagesSelected.includes('individual');
        $('b2b-desc-required').className = needsDesc ? 'required' : 'optional';
        $('b2b-desc-required').textContent = needsDesc ? '*' : '(optional)';
        updateB2BUI();
      };
    });
    
    // DSGVO
    $('b2b-dsgvo').onchange = e => { b2bState.dsgvoAccepted = e.target.checked; updateB2BUI(); };
    $('b2b-dsgvo-toggle').onclick = e => { e.preventDefault(); e.stopPropagation(); $('b2b-dsgvo-details').classList.toggle('visible'); };
    
    function updateB2BUI() {
      const checks = [
        { id: 'b2b-check-company', valid: b2bState.companyValid },
        { id: 'b2b-check-contact', valid: b2bState.contactValid },
        { id: 'b2b-check-email', valid: b2bState.emailValid },
        { id: 'b2b-check-phone', valid: b2bState.phoneValid },
        { id: 'b2b-check-package', valid: b2bState.packagesSelected.length > 0 }
      ];
      checks.forEach(c => {
        $(c.id).className = c.valid ? 'checklist-item checked' : 'checklist-item unchecked';
        $(c.id).querySelector('.checklist-icon').textContent = c.valid ? '‚úì' : '‚óã';
      });
      
      const needsDesc = b2bState.packagesSelected.includes('chatbot-premium') || b2bState.packagesSelected.includes('individual');
      const descOk = !needsDesc || $('b2b-description').value.trim().length > 10;
      
      $('b2b-submit').disabled = !(b2bState.companyValid && b2bState.contactValid && b2bState.emailValid && b2bState.phoneValid && b2bState.packagesSelected.length > 0 && b2bState.dsgvoAccepted && descOk);
    }
    
    // Submit
    $('b2b-form').onsubmit = async e => {
      e.preventDefault();
      $('b2b-loading').classList.add('visible');
      
      // Calculate price
      let setupTotal = 0, monthlyTotal = 0;
      b2bState.packagesSelected.forEach(pkg => {
        const opt = document.querySelector(`[data-package="${pkg}"]`);
        setupTotal += parseInt(opt.dataset.setup) || 0;
        monthlyTotal += parseInt(opt.dataset.monthly) || 0;
      });
      
      const formData = {
        company: $('b2b-company').value.trim(),
        location: $('b2b-location').value.trim(),
        contact: $('b2b-contact').value.trim(),
        email: $('b2b-email').value.trim(),
        phone: $('b2b-phone').value.trim(),
        packages: b2bState.packagesSelected,
        packageNames: b2bState.packagesSelected.map(p => PACKAGE_NAMES[p]).join(', '),
        description: $('b2b-description').value.trim(),
        setupTotal,
        monthlyTotal,
        timestamp: new Date().toISOString()
      };
      
      try {
        await fetch(B2B_WEBHOOK_SUBMIT, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(formData)
        });
      } catch (e) { console.error(e); }
      
      // Show result
      const hasIndividual = b2bState.packagesSelected.includes('chatbot-premium') || b2bState.packagesSelected.includes('individual');
      $('b2b-result-price').textContent = hasIndividual ? 'Individuell' : `ab ${monthlyTotal} ‚Ç¨/M + ${setupTotal} ‚Ç¨ Setup`;
      $('b2b-result-company').textContent = formData.company;
      $('b2b-result-location').textContent = formData.location;
      $('b2b-result-contact').textContent = formData.contact;
      $('b2b-result-email').textContent = formData.email;
      $('b2b-result-phone').textContent = formData.phone;
      $('b2b-result-packages').textContent = formData.packageNames;
      $('b2b-result-desc-row').style.display = formData.description ? 'flex' : 'none';
      $('b2b-result-description').textContent = formData.description;
      
      $('b2b-loading').classList.remove('visible');
      $('b2b-form-view').style.display = 'none';
      $('b2b-result-view').classList.add('visible');
      $('b2b-body').scrollTop = 0;
    };

    // ==================== MALERBETRIEB WIDGET ====================
    const MALER_WEBHOOK_VALIDATE = "https://seidel1502.app.n8n.cloud/webhook/3ad0bd7f-1b6e-4501-ba99-0cf05a2b4565";
    const MALER_WEBHOOK_CALCULATE = "https://seidel1502.app.n8n.cloud/webhook/d71b1438-46b7-4d67-9517-c0b2d2be92bd";
    const SERVICE_NAMES = {1:'Innenw√§nde streichen',2:'Fassade streichen',3:'Tapezieren',4:'T√ºren/Fenster lackieren',5:'Verputzen/Grundieren',6:'Dekorative Techniken'};
    
    const malerState = { locationValid: false, nameValid: false, phoneValid: false, dsgvoAccepted: false, distance: null };
    let malerFiles = [];
    
    // Toggle
    $('maler-toggle').onclick = () => {
      $('maler-window').classList.toggle('is-open');
      $('b2b-window').classList.remove('is-open');
    };
    
    // Customer Type
    document.querySelectorAll('input[name="malerCustomerType"]').forEach(r => {
      r.onchange = e => {
        const isGewerbe = e.target.value === 'gewerbe';
        $('maler-gewerbe-box').classList.toggle('visible', isGewerbe);
        $('maler-privat-box').style.display = isGewerbe ? 'none' : 'block';
        malerState.locationValid = false;
        updateMalerUI();
      };
    });
    
    // Gewerbe Validation
    $('maler-validate-gewerbe-btn').onclick = async () => {
      const company = $('maler-company').value.trim();
      const location = $('maler-location-gewerbe').value.trim();
      if (!company || !location) {
        $('maler-gewerbe-status').className = 'validation-status visible error';
        $('maler-gewerbe-status').textContent = '‚ùå Bitte Firma und Ort eingeben';
        return;
      }
      const btn = $('maler-validate-gewerbe-btn');
      btn.classList.add('loading'); btn.disabled = true;
      try {
        const res = await fetch(MALER_WEBHOOK_VALIDATE, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ type: 'gewerbe', company, location })
        });
        const data = await res.json();
        const d = Array.isArray(data) ? data[0] : data;
        if (d.valid) {
          malerState.locationValid = true;
          malerState.distance = d.distance;
          $('maler-gewerbe-status').className = 'validation-status visible success';
          $('maler-gewerbe-status').textContent = `‚úÖ ${d.companyInfo || company} ‚Äì ${d.distance}km`;
        } else {
          malerState.locationValid = false;
          $('maler-gewerbe-status').className = 'validation-status visible error';
          $('maler-gewerbe-status').textContent = d.message || '‚ùå Nicht gefunden';
        }
      } catch (e) {
        $('maler-gewerbe-status').className = 'validation-status visible error';
        $('maler-gewerbe-status').textContent = '‚ùå Fehler';
      }
      btn.classList.remove('loading'); btn.disabled = false;
      updateMalerUI();
    };
    
    // Privat Validation
    $('maler-validate-privat-btn').onclick = async () => {
      const location = $('maler-location-privat').value.trim();
      if (!location) {
        $('maler-privat-status').className = 'validation-status visible error';
        $('maler-privat-status').textContent = '‚ùå Bitte Ort eingeben';
        return;
      }
      const btn = $('maler-validate-privat-btn');
      btn.classList.add('loading'); btn.disabled = true;
      try {
        const res = await fetch(MALER_WEBHOOK_VALIDATE, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ type: 'privat', location })
        });
        const data = await res.json();
        const d = Array.isArray(data) ? data[0] : data;
        if (d.valid) {
          malerState.locationValid = true;
          malerState.distance = d.distance;
          $('maler-privat-status').className = 'validation-status visible success';
          $('maler-privat-status').textContent = `‚úÖ Im Gebiet ‚Äì ${d.distance}km`;
        } else {
          malerState.locationValid = false;
          $('maler-privat-status').className = 'validation-status visible error';
          $('maler-privat-status').textContent = d.message || '‚ùå Au√üerhalb';
        }
      } catch (e) {
        $('maler-privat-status').className = 'validation-status visible error';
        $('maler-privat-status').textContent = '‚ùå Fehler';
      }
      btn.classList.remove('loading'); btn.disabled = false;
      updateMalerUI();
    };
    
    // Name Validation
    $('maler-name').oninput = e => {
      const name = e.target.value;
      const result = validateName(name);
      $('maler-name').classList.toggle('valid', result.valid);
      $('maler-name').classList.toggle('invalid', !result.valid && name.trim().length >= 3);
      $('maler-name-status').textContent = name.length === 0 ? '' : result.valid ? '‚úÖ' : name.trim().length >= 3 ? '‚ùå' : '';
      $('maler-name-error').textContent = !result.valid && name.trim().length >= 3 ? result.message : '';
      $('maler-name-error').classList.toggle('visible', !result.valid && name.trim().length >= 3);
      malerState.nameValid = result.valid;
      updateMalerUI();
    };
    
    // Phone Validation
    $('maler-phone').oninput = e => {
      const phone = e.target.value;
      const valid = validatePhone(phone);
      $('maler-phone').classList.toggle('valid', valid);
      $('maler-phone').classList.toggle('invalid', phone.length >= 6 && !valid);
      $('maler-phone-status').textContent = phone.length === 0 ? '' : valid ? '‚úÖ' : phone.length >= 6 ? '‚ùå' : '';
      malerState.phoneValid = valid;
      updateMalerUI();
    };
    
    // DSGVO
    $('maler-dsgvo').onchange = e => { malerState.dsgvoAccepted = e.target.checked; updateMalerUI(); };
    $('maler-dsgvo-toggle').onclick = e => { e.preventDefault(); e.stopPropagation(); $('maler-dsgvo-details').classList.toggle('visible'); };
    
    // Files
    $('maler-images').onchange = e => {
      Array.from(e.target.files).forEach(f => {
        if (f.size > 10*1024*1024) return showToast('Datei zu gro√ü', 'error');
        malerFiles.push(f);
      });
      renderMalerFiles();
      e.target.value = '';
    };
    
    function renderMalerFiles() {
      $('maler-file-list').innerHTML = malerFiles.map((f,i) => 
        `<div class="file-item">üì∑ ${f.name.slice(0,20)}${f.name.length>20?'...':''}<span class="file-item-remove" data-i="${i}">‚úï</span></div>`
      ).join('');
      $('maler-file-list').querySelectorAll('.file-item-remove').forEach(b => b.onclick = e => {
        malerFiles.splice(+e.target.dataset.i, 1);
        renderMalerFiles();
      });
    }
    
    function updateMalerUI() {
      const checks = [
        { id: 'maler-check-location', valid: malerState.locationValid },
        { id: 'maler-check-name', valid: malerState.nameValid },
        { id: 'maler-check-phone', valid: malerState.phoneValid }
      ];
      checks.forEach(c => {
        $(c.id).className = c.valid ? 'checklist-item checked' : 'checklist-item unchecked';
        $(c.id).querySelector('.checklist-icon').textContent = c.valid ? '‚úì' : '‚óã';
      });
      $('maler-submit').disabled = !(malerState.locationValid && malerState.nameValid && malerState.phoneValid && malerState.dsgvoAccepted);
    }
    
    // Submit
    $('maler-form').onsubmit = async e => {
      e.preventDefault();
      $('maler-loading').classList.add('visible');
      
      const isGewerbe = document.querySelector('input[name="malerCustomerType"]:checked').value === 'gewerbe';
      const serviceId = +$('maler-service').value;
      const sizeNum = parseFloat($('maler-size').value.replace(/[^\d.,]/g,'').replace(',','.')) || 30;
      
      const formData = {
        customerType: isGewerbe ? 'gewerbe' : 'privat',
        company: isGewerbe ? $('maler-company').value : '',
        name: $('maler-name').value,
        email: $('maler-email').value.trim(),
        phone: $('maler-phone').value,
        location: isGewerbe ? $('maler-location-gewerbe').value : $('maler-location-privat').value,
        distance: malerState.distance,
        serviceId,
        serviceName: SERVICE_NAMES[serviceId] || '',
        size: $('maler-size').value,
        sizeNumber: sizeNum,
        timeframe: $('maler-timeframe').value,
        description: $('maler-description').value.trim(),
        imagesCount: malerFiles.length,
        dsgvoAccepted: true,
        timestamp: new Date().toISOString()
      };
      
      try {
        const fd = new FormData();
        fd.append('formData', JSON.stringify(formData));
        malerFiles.forEach((f,i) => fd.append('image_'+i, f));
        const res = await fetch(MALER_WEBHOOK_CALCULATE, { method: 'POST', body: fd });
        const data = await res.json();
        
        $('maler-result-price').textContent = data.price ? `ca. ${data.price.toLocaleString('de-DE')} ‚Ç¨` : '-';
        $('maler-result-duration').textContent = data.duration || '-';
        $('maler-result-workers').textContent = data.workers || '-';
        $('maler-result-type').textContent = formData.customerType === 'gewerbe' ? 'Gewerblich üè¢' : 'Privat üè†';
        $('maler-result-company-row').style.display = formData.company ? 'flex' : 'none';
        $('maler-result-company').textContent = formData.company;
        $('maler-result-name').textContent = formData.name;
        $('maler-result-email-row').style.display = formData.email ? 'flex' : 'none';
        $('maler-result-email').textContent = formData.email;
        $('maler-result-phone').textContent = formData.phone;
        $('maler-result-location').textContent = `${formData.location} (${formData.distance}km)`;
        $('maler-result-service').textContent = formData.serviceName;
        $('maler-result-size').textContent = formData.size;
        $('maler-result-timeframe').textContent = formData.timeframe;
        $('maler-result-desc-row').style.display = formData.description ? 'flex' : 'none';
        $('maler-result-description').textContent = formData.description;
      } catch (e) {
        showToast('Fehler beim Senden', 'error');
      }
      
      $('maler-loading').classList.remove('visible');
      $('maler-form-view').style.display = 'none';
      $('maler-result-view').classList.add('visible');
      $('maler-body').scrollTop = 0;
    };
  })();
  </script>
</body>
</html>
